webpackHotUpdate_N_E("pages/index",{

/***/ "./node_modules/inkjs/dist/ink-es2015.js":
false,

/***/ "./node_modules/inkjs/dist/ink.js":
/*!****************************************!*\
  !*** ./node_modules/inkjs/dist/ink.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?e(exports):undefined}(this,function(o){"use strict";function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t,e,n){return(h=l()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&u(r,n.prototype),r}).apply(null,arguments)}function c(t){var i="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,n)}function n(){return h(t,arguments,r(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)})(t)}function f(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(n){var i=l();return function(){var t,e=r(n);return f(this,i?(t=r(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function pt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=d(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}var t,e,k,n,E=function(){function s(){var t,e,n,i,r;m(this,s),this._components=[],this._componentsString=null,this._isRelative=!1,"string"==typeof arguments[0]?(t=arguments[0],this.componentsString=t):arguments[0]instanceof s.Component&&arguments[1]instanceof s?(e=arguments[0],n=arguments[1],this._components.push(e),this._components=this._components.concat(n._components)):arguments[0]instanceof Array&&(i=arguments[0],r=!!arguments[1],this._components=this._components.concat(i),this._isRelative=r)}return a(s,[{key:"GetComponent",value:function(t){return this._components[t]}},{key:"PathByAppendingPath",value:function(t){for(var e=new s,n=0,i=0;i<t._components.length&&t._components[i].isParent;++i)n++;for(var r=0;r<this._components.length-n;++r)e._components.push(this._components[r]);for(var a=n;a<t._components.length;++a)e._components.push(t._components[a]);return e}},{key:"toString",value:function(){return this.componentsString}},{key:"Equals",value:function(t){if(null==t)return!1;if(t._components.length!=this._components.length)return!1;if(t.isRelative!=this.isRelative)return!1;for(var e=0,n=t._components.length;e<n;e++)if(!t._components[e].Equals(this._components[e]))return!1;return!0}},{key:"PathByAppendingComponent",value:function(t){var e=new s;return e._components.push.apply(e._components,this._components),e._components.push(t),e}},{key:"isRelative",get:function(){return this._isRelative}},{key:"componentCount",get:function(){return this._components.length}},{key:"head",get:function(){return 0<this._components.length?this._components[0]:null}},{key:"tail",get:function(){return 2<=this._components.length?new s(this._components.slice(1,this._components.length)):s.self}},{key:"length",get:function(){return this._components.length}},{key:"lastComponent",get:function(){var t=this._components.length-1;return 0<=t?this._components[t]:null}},{key:"containsNamedComponent",get:function(){for(var t=0,e=this._components.length;t<e;t++)if(!this._components[t].isIndex)return!0;return!1}},{key:"componentsString",get:function(){return null==this._componentsString&&(this._componentsString=this._components.join("."),this.isRelative&&(this._componentsString="."+this._componentsString)),this._componentsString},set:function(t){if(this._components.length=0,this._componentsString=t,null!=this._componentsString&&""!=this._componentsString){"."==this._componentsString[0]&&(this._isRelative=!0,this._componentsString=this._componentsString.substring(1));var e,n=pt(this._componentsString.split("."));try{for(n.s();!(e=n.n()).done;){var i=e.value;/^(\-|\+)?([0-9]+|Infinity)$/.test(i)?this._components.push(new s.Component(parseInt(i))):this._components.push(new s.Component(i))}}catch(t){n.e(t)}finally{n.f()}}}}],[{key:"self",get:function(){var t=new s;return t._isRelative=!0,t}}]),s}();function y(t,e){if(!t)throw void 0!==e&&console.warn(e),console.trace&&console.trace(),new Error("")}function yt(t,e){return t instanceof e?t:null}function mt(t,e){if(t instanceof e)return t;throw new Error("".concat(t," is not of type ").concat(e))}function C(t){return t.hasValidName&&t.name?t:null}function g(t){return void 0===t?null:t}function b(t){return"object"===O(t)&&"function"==typeof t.Equals}E.parentId="^",t=E=E||{},e=function(){function e(t){m(this,e),this.index=-1,this.name=null,"string"==typeof t?this.name=t:this.index=t}return a(e,[{key:"toString",value:function(){return this.isIndex?this.index.toString():this.name}},{key:"Equals",value:function(t){return null!=t&&t.isIndex==this.isIndex&&(this.isIndex?this.index==t.index:this.name==t.name)}},{key:"isIndex",get:function(){return 0<=this.index}},{key:"isParent",get:function(){return this.name==t.parentId}}],[{key:"ToParent",value:function(){return new e(t.parentId)}}]),e}(),t.Component=e,(n=k=k||{}).AssertType=function(t,e,n){y(t instanceof e,n)},n.Assert=y;var _=function(){s(e,c(Error));var t=v(e);function e(){return m(this,e),t.apply(this,arguments)}return e}();function gt(t){throw new _("".concat(t," is null or undefined"))}var T=function(){function t(){m(this,t),this.parent=null,this._debugMetadata=null,this._path=null}return a(t,[{key:"DebugLineNumberOfPath",value:function(t){if(null===t)return null;var e=this.rootContentContainer;if(e){var n=e.ContentAtPath(t).obj;if(n){var i=n.debugMetadata;if(null!==i)return i.startLineNumber}}return null}},{key:"ResolvePath",value:function(t){if(null===t)return gt("path");if(t.isRelative){var e=yt(this,Et);return null===e&&(k.Assert(null!==this.parent,"Can't resolve relative path because we don't have a parent"),e=yt(this.parent,Et),k.Assert(null!==e,"Expected parent to be a container"),k.Assert(t.GetComponent(0).isParent),t=t.tail),null===e?gt("nearestContainer"):e.ContentAtPath(t)}var n=this.rootContentContainer;return null===n?gt("contentContainer"):n.ContentAtPath(t)}},{key:"ConvertPathToRelative",value:function(t){for(var e=this.path,n=Math.min(t.length,e.length),i=-1,r=0;r<n;++r){var a=e.GetComponent(r),s=t.GetComponent(r);if(!a.Equals(s))break;i=r}if(-1==i)return t;for(var o=e.componentCount-1-i,u=[],l=0;l<o;++l)u.push(E.Component.ToParent());for(var h=i+1;h<t.componentCount;++h)u.push(t.GetComponent(h));return new E(u,!0)}},{key:"CompactPathString",value:function(t){var e=null,n=null;return e=t.isRelative?(n=t.componentsString,this.path.PathByAppendingPath(t).componentsString):(n=this.ConvertPathToRelative(t).componentsString,t.componentsString),n.length<e.length?n:e}},{key:"Copy",value:function(){throw Error("Not Implemented: Doesn't support copying")}},{key:"SetChild",value:function(t,e,n){t[e]&&(t[e]=null),t[e]=n,t[e]&&(t[e].parent=this)}},{key:"debugMetadata",get:function(){return null===this._debugMetadata&&this.parent?this.parent.debugMetadata:this._debugMetadata},set:function(t){this._debugMetadata=t}},{key:"ownDebugMetadata",get:function(){return this._debugMetadata}},{key:"path",get:function(){if(null==this._path)if(null==this.parent)this._path=new E;else{for(var t=[],e=this,n=yt(e.parent,Et);null!==n;){var i=C(e);null!=i&&i.hasValidName?t.unshift(new E.Component(i.name)):t.unshift(new E.Component(n.content.indexOf(e))),n=yt((e=n).parent,Et)}this._path=new E(t)}return this._path}},{key:"rootContentContainer",get:function(){for(var t=this;t.parent;)t=t.parent;return yt(t,Et)}}]),t}(),St=function(){function e(t){m(this,e),t=void 0!==t?t.toString():"",this.string=t}return a(e,[{key:"Append",value:function(t){null!==t&&(this.string+=t)}},{key:"AppendLine",value:function(t){void 0!==t&&this.Append(t),this.string+="\n"}},{key:"AppendFormat",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.string+=t.replace(/{(\d+)}/g,function(t,e){return void 0!==n[e]?n[e]:t})}},{key:"toString",value:function(){return this.string}},{key:"Length",get:function(){return this.string.length}}]),e}(),kt=function(){function i(){var t,e,n;m(this,i),this.originName=null,this.itemName=null,void 0!==arguments[1]?(t=arguments[0],e=arguments[1],this.originName=t,this.itemName=e):arguments[0]&&(n=arguments[0].toString().split("."),this.originName=n[0],this.itemName=n[1])}return a(i,[{key:"toString",value:function(){return this.fullName}},{key:"Equals",value:function(t){return t instanceof i&&(t.itemName==this.itemName&&t.originName==this.originName)}},{key:"copy",value:function(){return new i(this.originName,this.itemName)}},{key:"serialized",value:function(){return JSON.stringify({originName:this.originName,itemName:this.itemName})}},{key:"isNull",get:function(){return null==this.originName&&null==this.itemName}},{key:"fullName",get:function(){return(null!==this.originName?this.originName:"?")+"."+this.itemName}}],[{key:"fromSerializedKey",value:function(t){var e=JSON.parse(t);if(!i.isLikeInkListItem(e))return i.Null;return new i(e.originName,e.itemName)}},{key:"isLikeInkListItem",value:function(t){return"object"===O(t)&&(!(!t.hasOwnProperty("originName")||!t.hasOwnProperty("itemName"))&&(("string"==typeof t.originName||null===typeof t.originName)&&("string"==typeof t.itemName||null===typeof t.itemName)))}},{key:"Null",get:function(){return new i(null,null)}}]),i}(),Ct=function(){s(l,c(Map));var o=v(l);function l(){var t,e,n=arguments;if(m(this,l),(t=o.call(this,n[0]instanceof l?n[0]:[])).origins=null,t._originNames=[],arguments[0]instanceof l){var i=arguments[0];i._originNames&&(t._originNames=i._originNames.slice())}else if("string"==typeof arguments[0]){var r=arguments[0],a=arguments[1];t.SetInitialOriginName(r);var s=a.listDefinitions.TryListGetDefinition(r,null);if(!s.exists)throw new Error("InkList origin could not be found in story when constructing new list: "+r);t.origins=[s.result]}else{"object"===O(arguments[0])&&arguments[0].hasOwnProperty("Key")&&arguments[0].hasOwnProperty("Value")&&(e=arguments[0],t.Add(e.Key,e.Value))}return t}return a(l,[{key:"AddItem",value:function(t){if(t instanceof kt){var e=t;if(null==e.originName)return void this.AddItem(e.itemName);if(null===this.origins)return gt("this.origins");var n,i=pt(this.origins);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.name==e.originName){var a=r.TryGetValueForItem(e,0);if(a.exists)return void this.Add(e,a.result);throw new Error("Could not add the item "+e+" to this list because it doesn't exist in the original list definition in ink.")}}}catch(t){i.e(t)}finally{i.f()}throw new Error("Failed to add item to list because the item was from a new list definition that wasn't previously known to this list. Only items from previously known lists can be used, so that the int value can be found.")}var s=t,o=null;if(null===this.origins)return gt("this.origins");var u,l=pt(this.origins);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(null===s)return gt("itemName");if(h.ContainsItemWithName(s)){if(null!=o)throw new Error("Could not add the item "+s+" to this list because it could come from either "+h.name+" or "+o.name);o=h}}}catch(t){l.e(t)}finally{l.f()}if(null==o)throw new Error("Could not add the item "+s+" to this list because it isn't known to any list definitions previously associated with this list.");var c=new kt(o.name,s),f=o.ValueForItem(c);this.Add(c,f)}},{key:"ContainsItemNamed",value:function(t){var e,n=pt(this);try{for(n.s();!(e=n.n()).done;){var i=S(e.value,1)[0];if(kt.fromSerializedKey(i).itemName==t)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"ContainsKey",value:function(t){return this.has(t.serialized())}},{key:"Add",value:function(t,e){var n=t.serialized();if(this.has(n))throw new Error("The Map already contains an entry for ".concat(t));this.set(n,e)}},{key:"Remove",value:function(t){return this.delete(t.serialized())}},{key:"SetInitialOriginName",value:function(t){this._originNames=[t]}},{key:"SetInitialOriginNames",value:function(t){this._originNames=null==t?null:t.slice()}},{key:"Union",value:function(t){var e,n=new l(this),i=pt(t);try{for(i.s();!(e=i.n()).done;){var r=S(e.value,2),a=r[0],s=r[1];n.set(a,s)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"Intersect",value:function(t){var e,n=new l,i=pt(this);try{for(i.s();!(e=i.n()).done;){var r=S(e.value,2),a=r[0],s=r[1];t.has(a)&&n.set(a,s)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"Without",value:function(t){var e,n=new l(this),i=pt(t);try{for(i.s();!(e=i.n()).done;){var r=S(e.value,1)[0];n.delete(r)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"Contains",value:function(t){var e,n=pt(t);try{for(n.s();!(e=n.n()).done;){var i=S(e.value,1)[0];if(!this.has(i))return!1}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"GreaterThan",value:function(t){return 0!=this.Count&&(0==t.Count||this.minItem.Value>t.maxItem.Value)}},{key:"GreaterThanOrEquals",value:function(t){return 0!=this.Count&&(0==t.Count||this.minItem.Value>=t.minItem.Value&&this.maxItem.Value>=t.maxItem.Value)}},{key:"LessThan",value:function(t){return 0!=t.Count&&(0==this.Count||this.maxItem.Value<t.minItem.Value)}},{key:"LessThanOrEquals",value:function(t){return 0!=t.Count&&(0==this.Count||this.maxItem.Value<=t.maxItem.Value&&this.minItem.Value<=t.minItem.Value)}},{key:"MaxAsList",value:function(){return 0<this.Count?new l(this.maxItem):new l}},{key:"MinAsList",value:function(){return 0<this.Count?new l(this.minItem):new l}},{key:"ListWithSubRange",value:function(t,e){if(0==this.Count)return new l;var n=this.orderedItems,i=0,r=Number.MAX_SAFE_INTEGER;Number.isInteger(t)?i=t:t instanceof l&&0<t.Count&&(i=t.minItem.Value),Number.isInteger(e)?r=e:t instanceof l&&0<t.Count&&(r=e.maxItem.Value);var a=new l;a.SetInitialOriginNames(this.originNames);var s,o=pt(n);try{for(o.s();!(s=o.n()).done;){var u=s.value;u.Value>=i&&u.Value<=r&&a.Add(u.Key,u.Value)}}catch(t){o.e(t)}finally{o.f()}return a}},{key:"Equals",value:function(t){if(t instanceof l==!1)return!1;if(t.Count!=this.Count)return!1;var e,n=pt(this);try{for(n.s();!(e=n.n()).done;){var i=S(e.value,1)[0];if(!t.has(i))return!1}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"toString",value:function(){for(var t=this.orderedItems,e=new St,n=0;n<t.length;n++){0<n&&e.Append(", ");var i=t[n].Key;if(null===i.itemName)return gt("item.itemName");e.Append(i.itemName)}return e.toString()}},{key:"valueOf",value:function(){return NaN}},{key:"Count",get:function(){return this.size}},{key:"originOfMaxItem",get:function(){if(null==this.origins)return null;var e=this.maxItem.Key.originName,n=null;return this.origins.every(function(t){return t.name!=e||(n=t,!1)}),n}},{key:"originNames",get:function(){if(0<this.Count){null==this._originNames&&0<this.Count?this._originNames=[]:(this._originNames||(this._originNames=[]),this._originNames.length=0);var t,e=pt(this);try{for(e.s();!(t=e.n()).done;){var n=S(t.value,1)[0],i=kt.fromSerializedKey(n);if(null===i.originName)return gt("item.originName");this._originNames.push(i.originName)}}catch(t){e.e(t)}finally{e.f()}}return this._originNames}},{key:"maxItem",get:function(){var t,e={Key:kt.Null,Value:0},n=pt(this);try{for(n.s();!(t=n.n()).done;){var i=S(t.value,2),r=i[0],a=i[1],s=kt.fromSerializedKey(r);(e.Key.isNull||a>e.Value)&&(e={Key:s,Value:a})}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"minItem",get:function(){var t,e={Key:kt.Null,Value:0},n=pt(this);try{for(n.s();!(t=n.n()).done;){var i=S(t.value,2),r=i[0],a=i[1],s=kt.fromSerializedKey(r);(e.Key.isNull||a<e.Value)&&(e={Key:s,Value:a})}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"inverse",get:function(){var t=new l;if(null!=this.origins){var e,n=pt(this.origins);try{for(n.s();!(e=n.n()).done;){var i,r=pt(e.value.items);try{for(r.s();!(i=r.n()).done;){var a=S(i.value,2),s=a[0],o=a[1],u=kt.fromSerializedKey(s);this.ContainsKey(u)||t.Add(u,o)}}catch(t){r.e(t)}finally{r.f()}}}catch(t){n.e(t)}finally{n.f()}}return t}},{key:"all",get:function(){var t=new l;if(null!=this.origins){var e,n=pt(this.origins);try{for(n.s();!(e=n.n()).done;){var i,r=pt(e.value.items);try{for(r.s();!(i=r.n()).done;){var a=S(i.value,2),s=a[0],o=a[1],u=kt.fromSerializedKey(s);t.set(u.serialized(),o)}}catch(t){r.e(t)}finally{r.f()}}}catch(t){n.e(t)}finally{n.f()}}return t}},{key:"orderedItems",get:function(){var t,e=new Array,n=pt(this);try{for(n.s();!(t=n.n()).done;){var i=S(t.value,2),r=i[0],a=i[1],s=kt.fromSerializedKey(r);e.push({Key:s,Value:a})}}catch(t){n.e(t)}finally{n.f()}return e.sort(function(t,e){return null===t.Key.originName?gt("x.Key.originName"):null===e.Key.originName?gt("y.Key.originName"):t.Value==e.Value?t.Key.originName.localeCompare(e.Key.originName):t.Value<e.Value?-1:t.Value>e.Value?1:0}),e}}]),l}(),bt=function(){s(i,c(Error));var n=v(i);function i(t){var e;return m(this,i),(e=n.call(this,t)).useEndLineNumber=!1,e.message=t,e.name="StoryException",e}return i}();function w(t,e,n){if(null===t)return{result:n,exists:!1};var i=t.get(e);return void 0===i?{result:n,exists:!1}:{result:i,exists:!0}}var P,N,A=function(){s(e,T);var t=v(e);function e(){return m(this,e),t.apply(this,arguments)}return a(e,[{key:"Copy",value:function(){return mt(e.Create(this),T)}},{key:"BadCastException",value:function(t){return new bt("Can't cast "+this.valueObject+" from "+this.valueType+" to "+t)}}],[{key:"Create",value:function(t,e){if(e){if(e===P.Int&&Number.isInteger(Number(t)))return new Tt(Number(t));if(e===P.Float&&!isNaN(t))return new x(Number(t))}return"boolean"==typeof t&&(t=!!t?1:0),"string"==typeof t?new wt(String(t)):Number.isInteger(Number(t))?new Tt(Number(t)):isNaN(t)?t instanceof E?new Pt(mt(t,E)):t instanceof Ct?new Ot(mt(t,Ct)):null:new x(Number(t))}}]),e}(),_t=function(){s(i,A);var n=v(i);function i(t){var e;return m(this,i),(e=n.call(this)).value=t,e}return a(i,[{key:"toString",value:function(){return null===this.value?gt("Value.value"):this.value.toString()}},{key:"valueObject",get:function(){return this.value}}]),i}(),Tt=function(){s(n,_t);var e=v(n);function n(t){return m(this,n),e.call(this,t||0)}return a(n,[{key:"Cast",value:function(t){if(null===this.value)return gt("Value.value");if(t==this.valueType)return this;if(t==P.Float)return new x(this.value);if(t==P.String)return new wt(""+this.value);throw this.BadCastException(t)}},{key:"isTruthy",get:function(){return 0!=this.value}},{key:"valueType",get:function(){return P.Int}}]),n}(),x=function(){s(n,_t);var e=v(n);function n(t){return m(this,n),e.call(this,t||0)}return a(n,[{key:"Cast",value:function(t){if(null===this.value)return gt("Value.value");if(t==this.valueType)return this;if(t==P.Int)return new Tt(this.value);if(t==P.String)return new wt(""+this.value);throw this.BadCastException(t)}},{key:"isTruthy",get:function(){return 0!=this.value}},{key:"valueType",get:function(){return P.Float}}]),n}(),wt=function(){s(i,_t);var n=v(i);function i(t){var e;return m(this,i),(e=n.call(this,t||""))._isNewline="\n"==e.value,e._isInlineWhitespace=!0,null===e.value?f(e,gt("Value.value")):(0<e.value.length&&e.value.split("").every(function(t){return" "==t||"\t"==t||(e._isInlineWhitespace=!1)}),e)}return a(i,[{key:"Cast",value:function(t){if(t==this.valueType)return this;if(t==P.Int){var e=function(t,e){var n=1<arguments.length&&void 0!==e?e:0,i=parseInt(t);return Number.isNaN(i)?{result:n,exists:!1}:{result:i,exists:!0}}(this.value);if(e.exists)return new Tt(e.result);throw this.BadCastException(t)}if(t!=P.Float)throw this.BadCastException(t);var n=function(t,e){var n=1<arguments.length&&void 0!==e?e:0,i=parseFloat(t);return Number.isNaN(i)?{result:n,exists:!1}:{result:i,exists:!0}}(this.value);if(n.exists)return new x(n.result);throw this.BadCastException(t)}},{key:"valueType",get:function(){return P.String}},{key:"isTruthy",get:function(){return null===this.value?gt("Value.value"):0<this.value.length}},{key:"isNewline",get:function(){return this._isNewline}},{key:"isInlineWhitespace",get:function(){return this._isInlineWhitespace}},{key:"isNonWhitespace",get:function(){return!this.isNewline&&!this.isInlineWhitespace}}]),i}(),Pt=function(){s(n,_t);var e=v(n);function n(t){return m(this,n),e.call(this,t)}return a(n,[{key:"Cast",value:function(t){if(t==this.valueType)return this;throw this.BadCastException(t)}},{key:"toString",value:function(){return"DivertTargetValue("+this.targetPath+")"}},{key:"valueType",get:function(){return P.DivertTarget}},{key:"targetPath",get:function(){return null===this.value?gt("Value.value"):this.value},set:function(t){this.value=t}},{key:"isTruthy",get:function(){throw new Error("Shouldn't be checking the truthiness of a divert target")}}]),n}(),I=function(){s(r,_t);var i=v(r);function r(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;return m(this,r),(e=i.call(this,t))._contextIndex=n,e}return a(r,[{key:"Cast",value:function(t){if(t==this.valueType)return this;throw this.BadCastException(t)}},{key:"toString",value:function(){return"VariablePointerValue("+this.variableName+")"}},{key:"Copy",value:function(){return new r(this.variableName,this.contextIndex)}},{key:"contextIndex",get:function(){return this._contextIndex},set:function(t){this._contextIndex=t}},{key:"variableName",get:function(){return null===this.value?gt("Value.value"):this.value},set:function(t){this.value=t}},{key:"valueType",get:function(){return P.VariablePointer}},{key:"isTruthy",get:function(){throw new Error("Shouldn't be checking the truthiness of a variable pointer")}}]),r}(),Ot=function(){s(r,_t);var i=v(r);function r(t,e){var n;return m(this,r),n=i.call(this,null),t||e?t instanceof Ct?n.value=new Ct(t):t instanceof kt&&"number"==typeof e&&(n.value=new Ct({Key:t,Value:e})):n.value=new Ct,n}return a(r,[{key:"Cast",value:function(t){if(null===this.value)return gt("Value.value");if(t==P.Int){var e=this.value.maxItem;return e.Key.isNull?new Tt(0):new Tt(e.Value)}if(t==P.Float){var n=this.value.maxItem;return n.Key.isNull?new x(0):new x(n.Value)}if(t==P.String){var i=this.value.maxItem;return i.Key.isNull?new wt(""):new wt(i.Key.toString())}if(t==this.valueType)return this;throw this.BadCastException(t)}},{key:"isTruthy",get:function(){return null===this.value?gt("this.value"):0<this.value.Count}},{key:"valueType",get:function(){return P.List}}]),a(r,null,[{key:"RetainListOriginsForAssignment",value:function(t,e){var n=yt(t,r),i=yt(e,r);return i&&null===i.value?gt("newList.value"):n&&null===n.value?gt("oldList.value"):void(n&&i&&0==i.value.Count&&i.value.SetInitialOriginNames(n.value.originNames))}}]),r}();(N=P=P||{})[N.Int=0]="Int",N[N.Float=1]="Float",N[N.List=2]="List",N[N.String=3]="String",N[N.DivertTarget=4]="DivertTarget",N[N.VariablePointer=5]="VariablePointer";var W,F,V=function(){function e(){m(this,e),this.obj=null,this.approximate=!1}return a(e,[{key:"copy",value:function(){var t=new e;return t.obj=this.obj,t.approximate=this.approximate,t}},{key:"correctObj",get:function(){return this.approximate?null:this.obj}},{key:"container",get:function(){return this.obj instanceof Et?this.obj:null}}]),e}(),Et=function(){s(g,T);var e=v(g);function g(){var t;return m(this,g),(t=e.apply(this,arguments)).name="",t._content=[],t.namedContent=new Map,t.visitsShouldBeCounted=!1,t.turnIndexShouldBeCounted=!1,t.countingAtStartOnly=!1,t._pathToFirstLeafContent=null,t}return a(g,[{key:"AddContent",value:function(t){if(t instanceof Array){var e,n=pt(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.AddContent(i)}}catch(t){n.e(t)}finally{n.f()}}else{var r=t;if(this._content.push(r),r.parent)throw new Error("content is already in "+r.parent);(r.parent=this).TryAddNamedContent(r)}}},{key:"TryAddNamedContent",value:function(t){var e=C(t);null!=e&&e.hasValidName&&this.AddToNamedContentOnly(e)}},{key:"AddToNamedContentOnly",value:function(t){k.AssertType(t,T,"Can only add Runtime.Objects to a Runtime.Container"),(mt(t,T).parent=this).namedContent.set(t.name,t)}},{key:"ContentAtPath",value:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:0,r=2<arguments.length&&void 0!==n?n:-1;-1==r&&(r=t.length);var a=new V;a.approximate=!1;for(var s=this,o=this,u=i;u<r;++u){var l=t.GetComponent(u);if(null==s){a.approximate=!0;break}var h=s.ContentWithPathComponent(l);if(null==h){a.approximate=!0;break}s=yt(o=h,g)}return a.obj=o,a}},{key:"InsertContent",value:function(t,e){if((this.content[e]=t).parent)throw new Error("content is already in "+t.parent);(t.parent=this).TryAddNamedContent(t)}},{key:"AddContentsOfContainer",value:function(t){this.content=this.content.concat(t.content);var e,n=pt(t.content);try{for(n.s();!(e=n.n()).done;){var i=e.value;(i.parent=this).TryAddNamedContent(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"ContentWithPathComponent",value:function(t){if(t.isIndex)return 0<=t.index&&t.index<this.content.length?this.content[t.index]:null;if(t.isParent)return this.parent;if(null===t.name)return gt("component.name");var e=w(this.namedContent,t.name,null);return e.exists?mt(e.result,T):null}},{key:"BuildStringOfHierarchy",value:function(t,e,n){var i;if(0==arguments.length)return i=new St,this.BuildStringOfHierarchy(i,0,null),i.toString();i=t;var r=e,a=n;function s(){for(var t=0;t<4*r;++t)i.Append(" ")}s(),i.Append("["),this.hasValidName&&i.AppendFormat(" ({0})",this.name),this==a&&i.Append("  <---"),i.AppendLine(),r++;for(var o=0;o<this.content.length;++o){var u=this.content[o];u instanceof g?u.BuildStringOfHierarchy(i,r,a):(s(),u instanceof wt?(i.Append('"'),i.Append(u.toString().replace("\n","\\n")),i.Append('"')):i.Append(u.toString())),o!=this.content.length-1&&i.Append(","),u instanceof g||u!=a||i.Append("  <---"),i.AppendLine()}var l,h=new Map,c=pt(this.namedContent);try{for(c.s();!(l=c.n()).done;){var f=S(l.value,2),v=f[0],d=f[1];0<=this.content.indexOf(mt(d,T))||h.set(v,d)}}catch(t){c.e(t)}finally{c.f()}if(0<h.size){s(),i.AppendLine("-- named: --");var p,y=pt(h);try{for(y.s();!(p=y.n()).done;){var m=S(p.value,2)[1];k.AssertType(m,g,"Can only print out named Containers"),m.BuildStringOfHierarchy(i,r,a),i.AppendLine()}}catch(t){y.e(t)}finally{y.f()}}r--,s(),i.Append("]")}},{key:"hasValidName",get:function(){return null!=this.name&&0<this.name.length}},{key:"content",get:function(){return this._content},set:function(t){this.AddContent(t)}},{key:"namedOnlyContent",get:function(){var t,e=new Map,n=pt(this.namedContent);try{for(n.s();!(t=n.n()).done;){var i=S(t.value,2),r=i[0],a=mt(i[1],T);e.set(r,a)}}catch(t){n.e(t)}finally{n.f()}var s,o=pt(this.content);try{for(o.s();!(s=o.n()).done;){var u=C(s.value);null!=u&&u.hasValidName&&e.delete(u.name)}}catch(t){o.e(t)}finally{o.f()}return 0==e.size&&(e=null),e},set:function(t){var e=this.namedOnlyContent;if(null!=e){var n,i=pt(e);try{for(i.s();!(n=i.n()).done;){var r=S(n.value,1)[0];this.namedContent.delete(r)}}catch(t){i.e(t)}finally{i.f()}}if(null!=t){var a,s=pt(t);try{for(s.s();!(a=s.n()).done;){var o=C(S(a.value,2)[1]);null!=o&&this.AddToNamedContentOnly(o)}}catch(t){s.e(t)}finally{s.f()}}}},{key:"countFlags",get:function(){var t=0;return this.visitsShouldBeCounted&&(t|=g.CountFlags.Visits),this.turnIndexShouldBeCounted&&(t|=g.CountFlags.Turns),this.countingAtStartOnly&&(t|=g.CountFlags.CountStartOnly),t==g.CountFlags.CountStartOnly&&(t=0),t},set:function(t){var e=t;0<(e&g.CountFlags.Visits)&&(this.visitsShouldBeCounted=!0),0<(e&g.CountFlags.Turns)&&(this.turnIndexShouldBeCounted=!0),0<(e&g.CountFlags.CountStartOnly)&&(this.countingAtStartOnly=!0)}},{key:"pathToFirstLeafContent",get:function(){return null==this._pathToFirstLeafContent&&(this._pathToFirstLeafContent=this.path.PathByAppendingPath(this.internalPathToFirstLeafContent)),this._pathToFirstLeafContent}},{key:"internalPathToFirstLeafContent",get:function(){for(var t=[],e=this;e instanceof g;)0<e.content.length&&(t.push(new E.Component(0)),e=e.content[0]);return new E(t)}}]),g}();W=Et=Et||{},(F=W.CountFlags||(W.CountFlags={}))[F.Visits=1]="Visits",F[F.Turns=2]="Turns",F[F.CountStartOnly=4]="CountStartOnly";var R,L,Nt,j,D=function(){s(e,T);var t=v(e);function e(){return m(this,e),t.apply(this,arguments)}return a(e,[{key:"toString",value:function(){return"Glue"}}]),e}(),At=function(){s(i,T);var n=v(i);function i(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.CommandType.NotSet;return m(this,i),(t=n.call(this))._commandType=e,t}return a(i,[{key:"Copy",value:function(){return new i(this.commandType)}},{key:"toString",value:function(){return this.commandType.toString()}},{key:"commandType",get:function(){return this._commandType}}],[{key:"EvalStart",value:function(){return new i(i.CommandType.EvalStart)}},{key:"EvalOutput",value:function(){return new i(i.CommandType.EvalOutput)}},{key:"EvalEnd",value:function(){return new i(i.CommandType.EvalEnd)}},{key:"Duplicate",value:function(){return new i(i.CommandType.Duplicate)}},{key:"PopEvaluatedValue",value:function(){return new i(i.CommandType.PopEvaluatedValue)}},{key:"PopFunction",value:function(){return new i(i.CommandType.PopFunction)}},{key:"PopTunnel",value:function(){return new i(i.CommandType.PopTunnel)}},{key:"BeginString",value:function(){return new i(i.CommandType.BeginString)}},{key:"EndString",value:function(){return new i(i.CommandType.EndString)}},{key:"NoOp",value:function(){return new i(i.CommandType.NoOp)}},{key:"ChoiceCount",value:function(){return new i(i.CommandType.ChoiceCount)}},{key:"Turns",value:function(){return new i(i.CommandType.Turns)}},{key:"TurnsSince",value:function(){return new i(i.CommandType.TurnsSince)}},{key:"ReadCount",value:function(){return new i(i.CommandType.ReadCount)}},{key:"Random",value:function(){return new i(i.CommandType.Random)}},{key:"SeedRandom",value:function(){return new i(i.CommandType.SeedRandom)}},{key:"VisitIndex",value:function(){return new i(i.CommandType.VisitIndex)}},{key:"SequenceShuffleIndex",value:function(){return new i(i.CommandType.SequenceShuffleIndex)}},{key:"StartThread",value:function(){return new i(i.CommandType.StartThread)}},{key:"Done",value:function(){return new i(i.CommandType.Done)}},{key:"End",value:function(){return new i(i.CommandType.End)}},{key:"ListFromInt",value:function(){return new i(i.CommandType.ListFromInt)}},{key:"ListRange",value:function(){return new i(i.CommandType.ListRange)}},{key:"ListRandom",value:function(){return new i(i.CommandType.ListRandom)}}]),i}();R=At=At||{},(L=R.CommandType||(R.CommandType={}))[L.NotSet=-1]="NotSet",L[L.EvalStart=0]="EvalStart",L[L.EvalOutput=1]="EvalOutput",L[L.EvalEnd=2]="EvalEnd",L[L.Duplicate=3]="Duplicate",L[L.PopEvaluatedValue=4]="PopEvaluatedValue",L[L.PopFunction=5]="PopFunction",L[L.PopTunnel=6]="PopTunnel",L[L.BeginString=7]="BeginString",L[L.EndString=8]="EndString",L[L.NoOp=9]="NoOp",L[L.ChoiceCount=10]="ChoiceCount",L[L.Turns=11]="Turns",L[L.TurnsSince=12]="TurnsSince",L[L.Random=13]="Random",L[L.SeedRandom=14]="SeedRandom",L[L.VisitIndex=15]="VisitIndex",L[L.SequenceShuffleIndex=16]="SequenceShuffleIndex",L[L.StartThread=17]="StartThread",L[L.Done=18]="Done",L[L.End=19]="End",L[L.ListFromInt=20]="ListFromInt",L[L.ListRange=21]="ListRange",L[L.ListRandom=22]="ListRandom",L[L.ReadCount=23]="ReadCount",L[L.TOTAL_VALUES=24]="TOTAL_VALUES",(j=Nt=Nt||{})[j.Tunnel=0]="Tunnel",j[j.Function=1]="Function",j[j.FunctionEvaluationFromGame=2]="FunctionEvaluationFromGame";var xt=function(){function e(){m(this,e),this.container=null,this.index=-1,2===arguments.length&&(this.container=arguments[0],this.index=arguments[1])}return a(e,[{key:"Resolve",value:function(){return this.index<0?this.container:null==this.container?null:0==this.container.content.length?this.container:this.index>=this.container.content.length?null:this.container.content[this.index]}},{key:"toString",value:function(){return this.container?"Ink Pointer -> "+this.container.path.toString()+" -- index "+this.index:"Ink Pointer (null)"}},{key:"copy",value:function(){return new e(this.container,this.index)}},{key:"isNull",get:function(){return null==this.container}},{key:"path",get:function(){return this.isNull?null:0<=this.index?this.container.path.PathByAppendingComponent(new E.Component(this.index)):this.container.path}}],[{key:"StartOf",value:function(t){return new e(t,0)}},{key:"Null",get:function(){return new e(null,-1)}}]),e}(),It=function(){s(i,T);var n=v(i);function i(t){var e;return m(this,i),(e=n.call(this))._targetPath=null,e._targetPointer=xt.Null,e.variableDivertName=null,e.pushesToStack=!1,e.stackPushType=0,e.isExternal=!1,e.externalArgs=0,e.isConditional=!1,e.pushesToStack=!1,void 0!==t&&(e.pushesToStack=!0,e.stackPushType=t),e}return a(i,[{key:"Equals",value:function(t){var e=t;return e instanceof i&&this.hasVariableTarget==e.hasVariableTarget&&(this.hasVariableTarget?this.variableDivertName==e.variableDivertName:null===this.targetPath?gt("this.targetPath"):this.targetPath.Equals(e.targetPath))}},{key:"toString",value:function(){if(this.hasVariableTarget)return"Divert(variable: "+this.variableDivertName+")";if(null==this.targetPath)return"Divert(null)";var t=new St,e=this.targetPath.toString();return t.Append("Divert"),this.isConditional&&t.Append("?"),this.pushesToStack&&(this.stackPushType==Nt.Function?t.Append(" function"):t.Append(" tunnel")),t.Append(" -> "),t.Append(this.targetPathString),t.Append(" ("),t.Append(e),t.Append(")"),t.toString()}},{key:"targetPath",get:function(){var t;return null==this._targetPath||!this._targetPath.isRelative||(t=this.targetPointer.Resolve())&&(this._targetPath=t.path),this._targetPath},set:function(t){this._targetPath=t,this._targetPointer=xt.Null}},{key:"targetPointer",get:function(){if(this._targetPointer.isNull){var t=this.ResolvePath(this._targetPath).obj;if(null===this._targetPath)return gt("this._targetPath");if(null===this._targetPath.lastComponent)return gt("this._targetPath.lastComponent");if(this._targetPath.lastComponent.isIndex){if(null===t)return gt("targetObj");this._targetPointer.container=t.parent instanceof Et?t.parent:null,this._targetPointer.index=this._targetPath.lastComponent.index}else this._targetPointer=xt.StartOf(t instanceof Et?t:null)}return this._targetPointer.copy()}},{key:"targetPathString",get:function(){return null==this.targetPath?null:this.CompactPathString(this.targetPath)},set:function(t){this.targetPath=null==t?null:new E(t)}},{key:"hasVariableTarget",get:function(){return null!=this.variableDivertName}}]),i}(),G=function(){s(i,T);var n=v(i);function i(){var t,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return m(this,i),(t=n.call(this))._pathOnChoice=null,t.hasCondition=!1,t.hasStartContent=!1,t.hasChoiceOnlyContent=!1,t.isInvisibleDefault=!1,t.onceOnly=!0,t.onceOnly=e,t}return a(i,[{key:"toString",value:function(){return null===this.pathOnChoice?gt("ChoicePoint.pathOnChoice"):"Choice: -> "+this.pathOnChoice.toString()}},{key:"pathOnChoice",get:function(){var t;return null==this._pathOnChoice||!this._pathOnChoice.isRelative||(t=this.choiceTarget)&&(this._pathOnChoice=t.path),this._pathOnChoice},set:function(t){this._pathOnChoice=t}},{key:"choiceTarget",get:function(){return null===this._pathOnChoice?gt("ChoicePoint._pathOnChoice"):this.ResolvePath(this._pathOnChoice).container}},{key:"pathStringOnChoice",get:function(){return null===this.pathOnChoice?gt("ChoicePoint.pathOnChoice"):this.CompactPathString(this.pathOnChoice)},set:function(t){this.pathOnChoice=new E(t)}},{key:"flags",get:function(){var t=0;return this.hasCondition&&(t|=1),this.hasStartContent&&(t|=2),this.hasChoiceOnlyContent&&(t|=4),this.isInvisibleDefault&&(t|=8),this.onceOnly&&(t|=16),t},set:function(t){this.hasCondition=0<(1&t),this.hasStartContent=0<(2&t),this.hasChoiceOnlyContent=0<(4&t),this.isInvisibleDefault=0<(8&t),this.onceOnly=0<(16&t)}}]),i}(),Wt=function(){s(i,T);var n=v(i);function i(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return m(this,i),(t=n.call(this)).pathForCount=null,t.name=e,t}return a(i,[{key:"toString",value:function(){return null!=this.name?"var("+this.name+")":"read_count("+this.pathStringForCount+")"}},{key:"containerForCount",get:function(){return null===this.pathForCount?null:this.ResolvePath(this.pathForCount).container}},{key:"pathStringForCount",get:function(){return null===this.pathForCount?null:this.CompactPathString(this.pathForCount)},set:function(t){this.pathForCount=null===t?null:new E(t)}}]),i}(),Ft=function(){s(r,T);var i=v(r);function r(t,e){var n;return m(this,r),(n=i.call(this)).variableName=t||null,n.isNewDeclaration=!!e,n.isGlobal=!1,n}return a(r,[{key:"toString",value:function(){return"VarAssign to "+this.variableName}}]),r}(),Vt=function(){s(e,T);var t=v(e);function e(){return m(this,e),t.apply(this,arguments)}return e}(),Rt=function(){s(f,T);var r=v(f);function f(){var t,e,n,i;return m(this,f),(t=r.call(this))._name=null,t._numberOfParameters=0,t._prototype=null,t._isPrototype=!1,t._operationFuncs=null,0===arguments.length?f.GenerateNativeFunctionsIfNecessary():1===arguments.length?(e=arguments[0],f.GenerateNativeFunctionsIfNecessary(),t.name=e):2===arguments.length&&(n=arguments[0],i=arguments[1],t._isPrototype=!0,t.name=n,t.numberOfParameters=i),t}return a(f,[{key:"Call",value:function(t){if(this._prototype)return this._prototype.Call(t);if(this.numberOfParameters!=t.length)throw new Error("Unexpected number of parameters");var e,n=!1,i=pt(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r instanceof Vt)throw new bt('Attempting to perform operation on a void value. Did you forget to "return" a value from a function you called here?');r instanceof Ot&&(n=!0)}}catch(t){i.e(t)}finally{i.f()}if(2==t.length&&n)return this.CallBinaryListOperation(t);var a=this.CoerceValuesToSingleType(t),s=a[0].valueType;return s==P.Int||s==P.Float||s==P.String||s==P.DivertTarget||s==P.List?this.CallType(a):null}},{key:"CallType",value:function(t){var e=mt(t[0],_t),n=e.valueType,i=e,r=t.length;if(2!=r&&1!=r)throw new Error("Unexpected number of parameters to NativeFunctionCall: "+t.length);if(null===this._operationFuncs)return gt("NativeFunctionCall._operationFuncs");var a=this._operationFuncs.get(n);if(!a){var s=P[n];throw new bt("Cannot perform operation "+this.name+" on "+s)}if(2==r){var o=mt(t[1],_t),u=a;if(null===i.value||null===o.value)return gt("NativeFunctionCall.Call BinaryOp values");var l=u(i.value,o.value);return _t.Create(l)}var h=a;if(null===i.value)return gt("NativeFunctionCall.Call UnaryOp value");var c=h(i.value);return this.name===f.Int?_t.Create(c,P.Int):this.name===f.Float?_t.Create(c,P.Float):_t.Create(c,e.valueType)}},{key:"CallBinaryListOperation",value:function(t){if(("+"==this.name||"-"==this.name)&&t[0]instanceof Ot&&t[1]instanceof Tt)return this.CallListIncrementOperation(t);var e=mt(t[0],_t),n=mt(t[1],_t);if(!("&&"!=this.name&&"||"!=this.name||e.valueType==P.List&&n.valueType==P.List)){if(null===this._operationFuncs)return gt("NativeFunctionCall._operationFuncs");var i=this._operationFuncs.get(P.Int);if(null===i)return gt("NativeFunctionCall.CallBinaryListOperation op");var r=i(e.isTruthy?1:0,n.isTruthy?1:0);return new Tt(r)}if(e.valueType==P.List&&n.valueType==P.List)return this.CallType([e,n]);throw new bt("Can not call use "+this.name+" operation on "+P[e.valueType]+" and "+P[n.valueType])}},{key:"CallListIncrementOperation",value:function(t){var e=mt(t[0],Ot),n=mt(t[1],Tt),i=new Ct;if(null===e.value)return gt("NativeFunctionCall.CallListIncrementOperation listVal.value");var r,a=pt(e.value);try{for(a.s();!(r=a.n()).done;){var s=S(r.value,2),o=s[0],u=s[1],l=kt.fromSerializedKey(o);if(null===this._operationFuncs)return gt("NativeFunctionCall._operationFuncs");var h=this._operationFuncs.get(P.Int);if(null===n.value)return gt("NativeFunctionCall.CallListIncrementOperation intVal.value");var c=h(u,n.value),f=null;if(null===e.value.origins)return gt("NativeFunctionCall.CallListIncrementOperation listVal.value.origins");var v,d,p=pt(e.value.origins);try{for(p.s();!(v=p.n()).done;){var y=v.value;if(y.name==l.originName){f=y;break}}}catch(t){p.e(t)}finally{p.f()}null==f||(d=f.TryGetItemWithValue(c,kt.Null)).exists&&i.Add(d.result,c)}}catch(t){a.e(t)}finally{a.f()}return new Ot(i)}},{key:"CoerceValuesToSingleType",value:function(t){var e,n=P.Int,i=null,r=pt(t);try{for(r.s();!(e=r.n()).done;){var a=mt(e.value,_t);a.valueType>n&&(n=a.valueType),a.valueType==P.List&&(i=yt(a,Ot))}}catch(t){r.e(t)}finally{r.f()}var s=[];if(P[n]==P[P.List]){var o,u=pt(t);try{for(u.s();!(o=u.n()).done;){var l=mt(o.value,_t);if(l.valueType==P.List)s.push(l);else{if(l.valueType!=P.Int){var h=P[l.valueType];throw new bt("Cannot mix Lists and "+h+" values in this operation")}var c=parseInt(l.valueObject);if(null===(i=mt(i,Ot)).value)return gt("NativeFunctionCall.CoerceValuesToSingleType specialCaseList.value");var f=i.value.originOfMaxItem;if(null===f)return gt("NativeFunctionCall.CoerceValuesToSingleType list");var v=f.TryGetItemWithValue(c,kt.Null);if(!v.exists)throw new bt("Could not find List item with the value "+c+" in "+f.name);var d=new Ot(v.result,c);s.push(d)}}}catch(t){u.e(t)}finally{u.f()}}else{var p,y=pt(t);try{for(y.s();!(p=y.n()).done;){var m=mt(p.value,_t).Cast(n);s.push(m)}}catch(t){y.e(t)}finally{y.f()}}return s}},{key:"AddOpFuncForType",value:function(t,e){null==this._operationFuncs&&(this._operationFuncs=new Map),this._operationFuncs.set(t,e)}},{key:"toString",value:function(){return'Native "'+this.name+'"'}},{key:"name",get:function(){return null===this._name?gt("NativeFunctionCall._name"):this._name},set:function(t){this._name=t,this._isPrototype||(null===f._nativeFunctions?gt("NativeFunctionCall._nativeFunctions"):this._prototype=f._nativeFunctions.get(this._name)||null)}},{key:"numberOfParameters",get:function(){return this._prototype?this._prototype.numberOfParameters:this._numberOfParameters},set:function(t){this._numberOfParameters=t}}],[{key:"CallWithName",value:function(t){return new f(t)}},{key:"CallExistsWithName",value:function(t){return this.GenerateNativeFunctionsIfNecessary(),this._nativeFunctions.get(t)}},{key:"Identity",value:function(t){return t}},{key:"GenerateNativeFunctionsIfNecessary",value:function(){null==this._nativeFunctions&&(this._nativeFunctions=new Map,this.AddIntBinaryOp(this.Add,function(t,e){return t+e}),this.AddIntBinaryOp(this.Subtract,function(t,e){return t-e}),this.AddIntBinaryOp(this.Multiply,function(t,e){return t*e}),this.AddIntBinaryOp(this.Divide,function(t,e){return Math.floor(t/e)}),this.AddIntBinaryOp(this.Mod,function(t,e){return t%e}),this.AddIntUnaryOp(this.Negate,function(t){return-t}),this.AddIntBinaryOp(this.Equal,function(t,e){return t==e?1:0}),this.AddIntBinaryOp(this.Greater,function(t,e){return e<t?1:0}),this.AddIntBinaryOp(this.Less,function(t,e){return t<e?1:0}),this.AddIntBinaryOp(this.GreaterThanOrEquals,function(t,e){return e<=t?1:0}),this.AddIntBinaryOp(this.LessThanOrEquals,function(t,e){return t<=e?1:0}),this.AddIntBinaryOp(this.NotEquals,function(t,e){return t!=e?1:0}),this.AddIntUnaryOp(this.Not,function(t){return 0==t?1:0}),this.AddIntBinaryOp(this.And,function(t,e){return 0!=t&&0!=e?1:0}),this.AddIntBinaryOp(this.Or,function(t,e){return 0!=t||0!=e?1:0}),this.AddIntBinaryOp(this.Max,function(t,e){return Math.max(t,e)}),this.AddIntBinaryOp(this.Min,function(t,e){return Math.min(t,e)}),this.AddIntBinaryOp(this.Pow,function(t,e){return Math.pow(t,e)}),this.AddIntUnaryOp(this.Floor,f.Identity),this.AddIntUnaryOp(this.Ceiling,f.Identity),this.AddIntUnaryOp(this.Int,f.Identity),this.AddIntUnaryOp(this.Float,function(t){return t}),this.AddFloatBinaryOp(this.Add,function(t,e){return t+e}),this.AddFloatBinaryOp(this.Subtract,function(t,e){return t-e}),this.AddFloatBinaryOp(this.Multiply,function(t,e){return t*e}),this.AddFloatBinaryOp(this.Divide,function(t,e){return t/e}),this.AddFloatBinaryOp(this.Mod,function(t,e){return t%e}),this.AddFloatUnaryOp(this.Negate,function(t){return-t}),this.AddFloatBinaryOp(this.Equal,function(t,e){return t==e?1:0}),this.AddFloatBinaryOp(this.Greater,function(t,e){return e<t?1:0}),this.AddFloatBinaryOp(this.Less,function(t,e){return t<e?1:0}),this.AddFloatBinaryOp(this.GreaterThanOrEquals,function(t,e){return e<=t?1:0}),this.AddFloatBinaryOp(this.LessThanOrEquals,function(t,e){return t<=e?1:0}),this.AddFloatBinaryOp(this.NotEquals,function(t,e){return t!=e?1:0}),this.AddFloatUnaryOp(this.Not,function(t){return 0==t?1:0}),this.AddFloatBinaryOp(this.And,function(t,e){return 0!=t&&0!=e?1:0}),this.AddFloatBinaryOp(this.Or,function(t,e){return 0!=t||0!=e?1:0}),this.AddFloatBinaryOp(this.Max,function(t,e){return Math.max(t,e)}),this.AddFloatBinaryOp(this.Min,function(t,e){return Math.min(t,e)}),this.AddFloatBinaryOp(this.Pow,function(t,e){return Math.pow(t,e)}),this.AddFloatUnaryOp(this.Floor,function(t){return Math.floor(t)}),this.AddFloatUnaryOp(this.Ceiling,function(t){return Math.ceil(t)}),this.AddFloatUnaryOp(this.Int,function(t){return Math.floor(t)}),this.AddFloatUnaryOp(this.Float,f.Identity),this.AddStringBinaryOp(this.Add,function(t,e){return t+e}),this.AddStringBinaryOp(this.Equal,function(t,e){return t===e?1:0}),this.AddStringBinaryOp(this.NotEquals,function(t,e){return t!==e?1:0}),this.AddStringBinaryOp(this.Has,function(t,e){return t.includes(e)?1:0}),this.AddStringBinaryOp(this.Hasnt,function(t,e){return t.includes(e)?0:1}),this.AddListBinaryOp(this.Add,function(t,e){return t.Union(e)}),this.AddListBinaryOp(this.Subtract,function(t,e){return t.Without(e)}),this.AddListBinaryOp(this.Has,function(t,e){return t.Contains(e)?1:0}),this.AddListBinaryOp(this.Hasnt,function(t,e){return t.Contains(e)?0:1}),this.AddListBinaryOp(this.Intersect,function(t,e){return t.Intersect(e)}),this.AddListBinaryOp(this.Equal,function(t,e){return t.Equals(e)?1:0}),this.AddListBinaryOp(this.Greater,function(t,e){return t.GreaterThan(e)?1:0}),this.AddListBinaryOp(this.Less,function(t,e){return t.LessThan(e)?1:0}),this.AddListBinaryOp(this.GreaterThanOrEquals,function(t,e){return t.GreaterThanOrEquals(e)?1:0}),this.AddListBinaryOp(this.LessThanOrEquals,function(t,e){return t.LessThanOrEquals(e)?1:0}),this.AddListBinaryOp(this.NotEquals,function(t,e){return t.Equals(e)?0:1}),this.AddListBinaryOp(this.And,function(t,e){return 0<t.Count&&0<e.Count?1:0}),this.AddListBinaryOp(this.Or,function(t,e){return 0<t.Count||0<e.Count?1:0}),this.AddListUnaryOp(this.Not,function(t){return 0==t.Count?1:0}),this.AddListUnaryOp(this.Invert,function(t){return t.inverse}),this.AddListUnaryOp(this.All,function(t){return t.all}),this.AddListUnaryOp(this.ListMin,function(t){return t.MinAsList()}),this.AddListUnaryOp(this.ListMax,function(t){return t.MaxAsList()}),this.AddListUnaryOp(this.Count,function(t){return t.Count}),this.AddListUnaryOp(this.ValueOfList,function(t){return t.maxItem.Value}),this.AddOpToNativeFunc(this.Equal,2,P.DivertTarget,function(t,e){return t.Equals(e)?1:0}),this.AddOpToNativeFunc(this.NotEquals,2,P.DivertTarget,function(t,e){return t.Equals(e)?0:1}))}},{key:"AddOpToNativeFunc",value:function(t,e,n,i){if(null===this._nativeFunctions)return gt("NativeFunctionCall._nativeFunctions");var r=this._nativeFunctions.get(t);r||(r=new f(t,e),this._nativeFunctions.set(t,r)),r.AddOpFuncForType(n,i)}},{key:"AddIntBinaryOp",value:function(t,e){this.AddOpToNativeFunc(t,2,P.Int,e)}},{key:"AddIntUnaryOp",value:function(t,e){this.AddOpToNativeFunc(t,1,P.Int,e)}},{key:"AddFloatBinaryOp",value:function(t,e){this.AddOpToNativeFunc(t,2,P.Float,e)}},{key:"AddFloatUnaryOp",value:function(t,e){this.AddOpToNativeFunc(t,1,P.Float,e)}},{key:"AddStringBinaryOp",value:function(t,e){this.AddOpToNativeFunc(t,2,P.String,e)}},{key:"AddListBinaryOp",value:function(t,e){this.AddOpToNativeFunc(t,2,P.List,e)}},{key:"AddListUnaryOp",value:function(t,e){this.AddOpToNativeFunc(t,1,P.List,e)}}]),f}();Rt.Add="+",Rt.Subtract="-",Rt.Divide="/",Rt.Multiply="*",Rt.Mod="%",Rt.Negate="_",Rt.Equal="==",Rt.Greater=">",Rt.Less="<",Rt.GreaterThanOrEquals=">=",Rt.LessThanOrEquals="<=",Rt.NotEquals="!=",Rt.Not="!",Rt.And="&&",Rt.Or="||",Rt.Min="MIN",Rt.Max="MAX",Rt.Pow="POW",Rt.Floor="FLOOR",Rt.Ceiling="CEILING",Rt.Int="INT",Rt.Float="FLOAT",Rt.Has="?",Rt.Hasnt="!?",Rt.Intersect="^",Rt.ListMin="LIST_MIN",Rt.ListMax="LIST_MAX",Rt.All="LIST_ALL",Rt.Count="LIST_COUNT",Rt.ValueOfList="LIST_VALUE",Rt.Invert="LIST_INVERT",Rt._nativeFunctions=null;var B=function(){s(i,T);var n=v(i);function i(t){var e;return m(this,i),(e=n.call(this)).text=t.toString()||"",e}return a(i,[{key:"toString",value:function(){return"# "+this.text}}]),i}(),M=function(){s(n,T);var e=v(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).text="",t.index=0,t.threadAtGeneration=null,t.sourcePath="",t.targetPath=null,t.isInvisibleDefault=!1,t.originalThreadIndex=0,t}return a(n,[{key:"pathStringOnChoice",get:function(){return null===this.targetPath?gt("Choice.targetPath"):this.targetPath.toString()},set:function(t){this.targetPath=new E(t)}}]),n}(),q=function(){function n(t,e){m(this,n),this._name=t||"",this._items=null,this._itemNameToValues=e||new Map}return a(n,[{key:"ValueForItem",value:function(t){if(!t.itemName)return 0;var e=this._itemNameToValues.get(t.itemName);return void 0!==e?e:0}},{key:"ContainsItem",value:function(t){return!!t.itemName&&(t.originName==this.name&&this._itemNameToValues.has(t.itemName))}},{key:"ContainsItemWithName",value:function(t){return this._itemNameToValues.has(t)}},{key:"TryGetItemWithValue",value:function(t){var e,n=pt(this._itemNameToValues);try{for(n.s();!(e=n.n()).done;){var i=S(e.value,2),r=i[0];if(i[1]==t)return{result:new kt(this.name,r),exists:!0}}}catch(t){n.e(t)}finally{n.f()}return{result:kt.Null,exists:!1}}},{key:"TryGetValueForItem",value:function(t){if(!t.itemName)return{result:0,exists:!1};var e=this._itemNameToValues.get(t.itemName);return e?{result:e,exists:!0}:{result:0,exists:!1}}},{key:"name",get:function(){return this._name}},{key:"items",get:function(){if(null==this._items){this._items=new Map;var t,e=pt(this._itemNameToValues);try{for(e.s();!(t=e.n()).done;){var n=S(t.value,2),i=n[0],r=n[1],a=new kt(this.name,i);this._items.set(a.serialized(),r)}}catch(t){e.e(t)}finally{e.f()}}return this._items}}]),n}(),J=function(){function c(t){m(this,c),this._lists=new Map,this._allUnambiguousListValueCache=new Map;var e,n=pt(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this._lists.set(i.name,i);var r,a=pt(i.items);try{for(a.s();!(r=a.n()).done;){var s=S(r.value,2),o=s[0],u=s[1],l=kt.fromSerializedKey(o),h=new Ot(l,u);if(!l.itemName)throw new Error("item.itemName is null or undefined.");this._allUnambiguousListValueCache.set(l.itemName,h),this._allUnambiguousListValueCache.set(l.fullName,h)}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}}return a(c,[{key:"TryListGetDefinition",value:function(t,e){if(null===t)return{result:e,exists:!1};var n=this._lists.get(t);return n?{result:n,exists:!0}:{result:e,exists:!1}}},{key:"FindSingleItemListWithName",value:function(t){if(null===t)return gt("name");var e=this._allUnambiguousListValueCache.get(t);return void 0!==e?e:null}},{key:"lists",get:function(){var t,e=[],n=pt(this._lists);try{for(n.s();!(t=n.n()).done;){var i=S(t.value,2)[1];e.push(i)}}catch(t){n.e(t)}finally{n.f()}return e}}]),c}(),K=function(){function P(){m(this,P)}return a(P,null,[{key:"JArrayToRuntimeObjList",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=t.length;n&&i--;for(var r=[],a=0;a<i;a++){var s=t[a],o=this.JTokenToRuntimeObject(s);if(null===o)return gt("runtimeObj");r.push(o)}return r}},{key:"WriteDictionaryRuntimeObjs",value:function(t,e){t.WriteObjectStart();var n,i=pt(e);try{for(i.s();!(n=i.n()).done;){var r=S(n.value,2),a=r[0],s=r[1];t.WritePropertyStart(a),this.WriteRuntimeObject(t,s),t.WritePropertyEnd()}}catch(t){i.e(t)}finally{i.f()}t.WriteObjectEnd()}},{key:"WriteListRuntimeObjs",value:function(t,e){t.WriteArrayStart();var n,i=pt(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.WriteRuntimeObject(t,r)}}catch(t){i.e(t)}finally{i.f()}t.WriteArrayEnd()}},{key:"WriteIntDictionary",value:function(t,e){t.WriteObjectStart();var n,i=pt(e);try{for(i.s();!(n=i.n()).done;){var r=S(n.value,2),a=r[0],s=r[1];t.WriteIntProperty(a,s)}}catch(t){i.e(t)}finally{i.f()}t.WriteObjectEnd()}},{key:"WriteRuntimeObject",value:function(t,e){var n=yt(e,Et);if(n)this.WriteRuntimeContainer(t,n);else{var i=yt(e,It);if(i){var r,a="->";return i.isExternal?a="x()":i.pushesToStack&&(i.stackPushType==Nt.Function?a="f()":i.stackPushType==Nt.Tunnel&&(a="->t->")),r=i.hasVariableTarget?i.variableDivertName:i.targetPathString,t.WriteObjectStart(),t.WriteProperty(a,r),i.hasVariableTarget&&t.WriteProperty("var",!0),i.isConditional&&t.WriteProperty("c",!0),0<i.externalArgs&&t.WriteIntProperty("exArgs",i.externalArgs),void t.WriteObjectEnd()}var s=yt(e,G);if(s)return t.WriteObjectStart(),t.WriteProperty("*",s.pathStringOnChoice),t.WriteIntProperty("flg",s.flags),void t.WriteObjectEnd();var o=yt(e,Tt);if(o)t.WriteInt(o.value);else{var u=yt(e,x);if(u)t.WriteFloat(u.value);else{var l=yt(e,wt);if(l)l.isNewline?t.Write("\n",!1):(t.WriteStringStart(),t.WriteStringInner("^"),t.WriteStringInner(l.value),t.WriteStringEnd());else{var h=yt(e,Ot);if(h)this.WriteInkList(t,h);else{var c=yt(e,Pt);if(c)return t.WriteObjectStart(),null===c.value?gt("divTargetVal.value"):(t.WriteProperty("^->",c.value.componentsString),void t.WriteObjectEnd());var f=yt(e,I);if(f)return t.WriteObjectStart(),t.WriteProperty("^var",f.value),t.WriteIntProperty("ci",f.contextIndex),void t.WriteObjectEnd();if(yt(e,D))t.Write("<>");else{var v=yt(e,At);if(v)t.Write(P._controlCommandNames[v.commandType]);else{var d=yt(e,Rt);if(d){var p=d.name;return"^"==p&&(p="L^"),void t.Write(p)}var y=yt(e,Wt);if(y){t.WriteObjectStart();var m=y.pathStringForCount;return null!=m?t.WriteProperty("CNT?",m):t.WriteProperty("VAR?",y.name),void t.WriteObjectEnd()}var g=yt(e,Ft);if(g){t.WriteObjectStart();var S=g.isGlobal?"VAR=":"temp=";return t.WriteProperty(S,g.variableName),g.isNewDeclaration||t.WriteProperty("re",!0),void t.WriteObjectEnd()}if(yt(e,Vt))t.Write("void");else{var k=yt(e,B);if(k)return t.WriteObjectStart(),t.WriteProperty("#",k.text),void t.WriteObjectEnd();var C=yt(e,M);if(!C)throw new Error("Failed to convert runtime object to Json token: "+e);this.WriteChoice(t,C)}}}}}}}}}},{key:"JObjectToDictionaryRuntimeObjs",value:function(t){var e=new Map;for(var n in t)if(t.hasOwnProperty(n)){var i=this.JTokenToRuntimeObject(t[n]);if(null===i)return gt("inkObject");e.set(n,i)}return e}},{key:"JObjectToIntDictionary",value:function(t){var e=new Map;for(var n in t)t.hasOwnProperty(n)&&e.set(n,parseInt(t[n]));return e}},{key:"JTokenToRuntimeObject",value:function(t){if("number"==typeof t&&!isNaN(t))return _t.Create(t);if("string"==typeof t){var e=t.toString(),n=e[0];if("^"==n)return new wt(e.substring(1));if("\n"==n&&1==e.length)return new wt("\n");if("<>"==e)return new D;for(var i=0;i<P._controlCommandNames.length;++i){if(e==P._controlCommandNames[i])return new At(i)}if("L^"==e&&(e="^"),Rt.CallExistsWithName(e))return Rt.CallWithName(e);if("->->"==e)return At.PopTunnel();if("~ret"==e)return At.PopFunction();if("void"==e)return new Vt}if("object"===O(t)&&!Array.isArray(t)){var r,a=t;if(a["^->"])return r=a["^->"],new Pt(new E(r.toString()));if(a["^var"]){r=a["^var"];var s=new I(r.toString());return"ci"in a&&(r=a.ci,s.contextIndex=parseInt(r)),s}var o=!1,u=!1,l=Nt.Function,h=!1;if((r=a["->"])?o=!0:(r=a["f()"])?(u=o=!0,l=Nt.Function):(r=a["->t->"])?(u=o=!0,l=Nt.Tunnel):(r=a["x()"])&&(u=!(h=o=!0),l=Nt.Function),o){var c=new It;c.pushesToStack=u,c.stackPushType=l,c.isExternal=h;var f=r.toString();return(r=a.var)?c.variableDivertName=f:c.targetPathString=f,c.isConditional=!!a.c,h&&(r=a.exArgs)&&(c.externalArgs=parseInt(r)),c}if(r=a["*"]){var v=new G;return v.pathStringOnChoice=r.toString(),(r=a.flg)&&(v.flags=parseInt(r)),v}if(r=a["VAR?"])return new Wt(r.toString());if(r=a["CNT?"]){var d=new Wt;return d.pathStringForCount=r.toString(),d}var p=!1,y=!1;if((r=a["VAR="])?y=p=!0:(r=a["temp="])&&(y=!(p=!0)),p){var m=r.toString(),g=!a.re,S=new Ft(m,g);return S.isGlobal=y,S}if(void 0!==a["#"])return r=a["#"],new B(r.toString());if(r=a.list){var k,C,b,_=r,T=new Ct;for(var w in(r=a.origins)&&T.SetInitialOriginNames(r),_){_.hasOwnProperty(w)&&(k=_[w],C=new kt(w),b=parseInt(k),T.Add(C,b))}return new Ot(T)}if(null!=a.originalChoicePath)return this.JObjectToChoice(a)}if(Array.isArray(t))return this.JArrayToContainer(t);if(null==t)return null;throw new Error("Failed to convert token to runtime object: "+JSON.stringify(t))}},{key:"WriteRuntimeContainer",value:function(t,e,n){var i=2<arguments.length&&void 0!==n&&n;if(t.WriteArrayStart(),null===e)return gt("container");var r,a=pt(e.content);try{for(a.s();!(r=a.n()).done;){var s=r.value;this.WriteRuntimeObject(t,s)}}catch(t){a.e(t)}finally{a.f()}var o=e.namedOnlyContent,u=e.countFlags,l=null!=e.name&&!i,h=null!=o||0<u||l;if(h&&t.WriteObjectStart(),null!=o){var c,f=pt(o);try{for(f.s();!(c=f.n()).done;){var v=S(c.value,2),d=v[0],p=yt(v[1],Et);t.WritePropertyStart(d),this.WriteRuntimeContainer(t,p,!0),t.WritePropertyEnd()}}catch(t){f.e(t)}finally{f.f()}}l&&t.WriteProperty("#n",e.name),h?t.WriteObjectEnd():t.WriteNull(),t.WriteArrayEnd()}},{key:"JArrayToContainer",value:function(t){var e=new Et;e.content=this.JArrayToRuntimeObjList(t,!0);var n=t[t.length-1];if(null!=n){var i,r,a=new Map;for(var s in n){"#f"==s?e.countFlags=parseInt(n[s]):"#n"==s?e.name=n[s].toString():((r=yt(i=this.JTokenToRuntimeObject(n[s]),Et))&&(r.name=s),a.set(s,i))}e.namedOnlyContent=a}return e}},{key:"JObjectToChoice",value:function(t){var e=new M;return e.text=t.text.toString(),e.index=parseInt(t.index),e.sourcePath=t.originalChoicePath.toString(),e.originalThreadIndex=parseInt(t.originalThreadIndex),e.pathStringOnChoice=t.targetPath.toString(),e}},{key:"WriteChoice",value:function(t,e){t.WriteObjectStart(),t.WriteProperty("text",e.text),t.WriteIntProperty("index",e.index),t.WriteProperty("originalChoicePath",e.sourcePath),t.WriteIntProperty("originalThreadIndex",e.originalThreadIndex),t.WriteProperty("targetPath",e.pathStringOnChoice),t.WriteObjectEnd()}},{key:"WriteInkList",value:function(t,e){var n=e.value;if(null===n)return gt("rawList");t.WriteObjectStart(),t.WritePropertyStart("list"),t.WriteObjectStart();var i,r=pt(n);try{for(r.s();!(i=r.n()).done;){var a=S(i.value,2),s=a[0],o=a[1],u=kt.fromSerializedKey(s),l=o;if(null===u.itemName)return gt("item.itemName");t.WritePropertyNameStart(),t.WritePropertyNameInner(u.originName?u.originName:"?"),t.WritePropertyNameInner("."),t.WritePropertyNameInner(u.itemName),t.WritePropertyNameEnd(),t.Write(l),t.WritePropertyEnd()}}catch(t){r.e(t)}finally{r.f()}if(t.WriteObjectEnd(),t.WritePropertyEnd(),0==n.Count&&null!=n.originNames&&0<n.originNames.length){t.WritePropertyStart("origins"),t.WriteArrayStart();var h,c=pt(n.originNames);try{for(c.s();!(h=c.n()).done;){var f=h.value;t.Write(f)}}catch(t){c.e(t)}finally{c.f()}t.WriteArrayEnd(),t.WritePropertyEnd()}t.WriteObjectEnd()}},{key:"ListDefinitionsToJToken",value:function(t){var e,n={},i=pt(t.lists);try{for(i.s();!(e=i.n()).done;){var r,a=e.value,s={},o=pt(a.items);try{for(o.s();!(r=o.n()).done;){var u=S(r.value,2),l=u[0],h=u[1],c=kt.fromSerializedKey(l);if(null===c.itemName)return gt("item.itemName");s[c.itemName]=h}}catch(t){o.e(t)}finally{o.f()}n[a.name]=s}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"JTokenToListDefinitions",value:function(t){var e=t,n=[];for(var i in e)if(e.hasOwnProperty(i)){var r,a=i.toString(),s=e[i],o=new Map;for(var u in s){e.hasOwnProperty(i)&&(r=s[u],o.set(u,parseInt(r)))}var l=new q(a,o);n.push(l)}return new J(n)}}]),P}();K._controlCommandNames=function(){var t=[];t[At.CommandType.EvalStart]="ev",t[At.CommandType.EvalOutput]="out",t[At.CommandType.EvalEnd]="/ev",t[At.CommandType.Duplicate]="du",t[At.CommandType.PopEvaluatedValue]="pop",t[At.CommandType.PopFunction]="~ret",t[At.CommandType.PopTunnel]="->->",t[At.CommandType.BeginString]="str",t[At.CommandType.EndString]="/str",t[At.CommandType.NoOp]="nop",t[At.CommandType.ChoiceCount]="choiceCnt",t[At.CommandType.Turns]="turn",t[At.CommandType.TurnsSince]="turns",t[At.CommandType.ReadCount]="readc",t[At.CommandType.Random]="rnd",t[At.CommandType.SeedRandom]="srnd",t[At.CommandType.VisitIndex]="visit",t[At.CommandType.SequenceShuffleIndex]="seq",t[At.CommandType.StartThread]="thread",t[At.CommandType.Done]="done",t[At.CommandType.End]="end",t[At.CommandType.ListFromInt]="listInt",t[At.CommandType.ListRange]="range",t[At.CommandType.ListRandom]="lrnd";for(var e=0;e<At.CommandType.TOTAL_VALUES;++e)if(null==t[e])throw new Error("Control command not accounted for in serialisation");return t}();var U=function(){function s(){if(m(this,s),this._threadCounter=0,this._startOfRoot=xt.Null,arguments[0]instanceof o.Story){var t=arguments[0];this._startOfRoot=xt.StartOf(t.rootContentContainer),this.Reset()}else{var e=arguments[0];this._threads=[];var n,i=pt(e._threads);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._threads.push(r.Copy())}}catch(t){i.e(t)}finally{i.f()}this._threadCounter=e._threadCounter,this._startOfRoot=e._startOfRoot}}return a(s,[{key:"Reset",value:function(){this._threads=[],this._threads.push(new s.Thread),this._threads[0].callstack.push(new s.Element(Nt.Tunnel,this._startOfRoot))}},{key:"SetJsonToken",value:function(t,e){this._threads.length=0;var n,i=pt(t.threads);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=new s.Thread(r,e);this._threads.push(a)}}catch(t){i.e(t)}finally{i.f()}this._threadCounter=parseInt(t.threadCounter),this._startOfRoot=xt.StartOf(e.rootContentContainer)}},{key:"WriteJson",value:function(t){var i=this;t.WriteObject(function(t){t.WritePropertyStart("threads"),t.WriteArrayStart();var e,n=pt(i._threads);try{for(n.s();!(e=n.n()).done;){e.value.WriteJson(t)}}catch(t){n.e(t)}finally{n.f()}t.WriteArrayEnd(),t.WritePropertyEnd(),t.WritePropertyStart("threadCounter"),t.WriteInt(i._threadCounter),t.WritePropertyEnd()})}},{key:"PushThread",value:function(){var t=this.currentThread.Copy();this._threadCounter++,t.threadIndex=this._threadCounter,this._threads.push(t)}},{key:"ForkThread",value:function(){var t=this.currentThread.Copy();return this._threadCounter++,t.threadIndex=this._threadCounter,t}},{key:"PopThread",value:function(){if(!this.canPopThread)throw new Error("Can't pop thread");this._threads.splice(this._threads.indexOf(this.currentThread),1)}},{key:"Push",value:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:0,r=2<arguments.length&&void 0!==n?n:0,a=new s.Element(t,this.currentElement.currentPointer,!1);a.evaluationStackHeightWhenPushed=i,a.functionStartInOutputStream=r,this.callStack.push(a)}},{key:"CanPop",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;return!!this.canPop&&(null==e||this.currentElement.type==e)}},{key:"Pop",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;if(!this.CanPop(e))throw new Error("Mismatched push/pop in Callstack");this.callStack.pop()}},{key:"GetTemporaryVariableWithName",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:-1;-1==n&&(n=this.currentElementIndex+1);var i=w(this.callStack[n-1].temporaryVariables,t,null);return i.exists?i.result:null}},{key:"SetTemporaryVariable",value:function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:-1;-1==r&&(r=this.currentElementIndex+1);var a=this.callStack[r-1];if(!n&&!a.temporaryVariables.get(t))throw new bt("Could not find temporary variable to set: "+t);var s=w(a.temporaryVariables,t,null);s.exists&&Ot.RetainListOriginsForAssignment(s.result,e),a.temporaryVariables.set(t,e)}},{key:"ContextForVariableNamed",value:function(t){return this.currentElement.temporaryVariables.get(t)?this.currentElementIndex+1:0}},{key:"ThreadWithIndex",value:function(e){var t=this._threads.filter(function(t){if(t.threadIndex==e)return t});return 0<t.length?t[0]:null}},{key:"elements",get:function(){return this.callStack}},{key:"depth",get:function(){return this.elements.length}},{key:"currentElement",get:function(){var t=this._threads[this._threads.length-1].callstack;return t[t.length-1]}},{key:"currentElementIndex",get:function(){return this.callStack.length-1}},{key:"currentThread",get:function(){return this._threads[this._threads.length-1]},set:function(t){k.Assert(1==this._threads.length,"Shouldn't be directly setting the current thread when we have a stack of them"),this._threads.length=0,this._threads.push(t)}},{key:"canPop",get:function(){return 1<this.callStack.length}},{key:"canPopThread",get:function(){return 1<this._threads.length&&!this.elementIsEvaluateFromGame}},{key:"elementIsEvaluateFromGame",get:function(){return this.currentElement.type==Nt.FunctionEvaluationFromGame}},{key:"callStack",get:function(){return this.currentThread.callstack}},{key:"callStackTrace",get:function(){for(var t=new St,e=0;e<this._threads.length;e++){var n=this._threads[e],i=e==this._threads.length-1;t.AppendFormat("=== THREAD {0}/{1} {2}===\n",e+1,this._threads.length,i?"(current) ":"");for(var r=0;r<n.callstack.length;r++){n.callstack[r].type==Nt.Function?t.Append("  [FUNCTION] "):t.Append("  [TUNNEL] ");var a=n.callstack[r].currentPointer;if(!a.isNull){if(t.Append("<SOMEWHERE IN "),null===a.container)return gt("pointer.container");t.Append(a.container.path.toString()),t.AppendLine(">")}}}return t.toString()}}]),s}();!function(t){var y=function(){function i(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];m(this,i),this.evaluationStackHeightWhenPushed=0,this.functionStartInOutputStream=0,this.currentPointer=e.copy(),this.inExpressionEvaluation=n,this.temporaryVariables=new Map,this.type=t}return a(i,[{key:"Copy",value:function(){var t=new i(this.type,this.currentPointer,this.inExpressionEvaluation);return t.temporaryVariables=new Map(this.temporaryVariables),t.evaluationStackHeightWhenPushed=this.evaluationStackHeightWhenPushed,t.functionStartInOutputStream=this.functionStartInOutputStream,t}}]),i}();t.Element=y;var e=function(){function p(){if(m(this,p),this.threadIndex=0,this.previousPointer=xt.Null,this.callstack=[],arguments[0]&&arguments[1]){var t=arguments[0],e=arguments[1];this.threadIndex=parseInt(t.threadIndex);var n,i=pt(t.callstack);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=parseInt(r.type),s=xt.Null,o=void 0,u=r.cPath;if(void 0!==u){o=u.toString();var l=e.ContentAtPath(new E(o));if(s.container=l.container,s.index=parseInt(r.idx),null==l.obj)throw new Error("When loading state, internal story location couldn't be found: "+o+". Has the story changed since this save data was created?");if(l.approximate){if(null===s.container)return gt("pointer.container");e.Warning("When loading state, exact internal story location couldn't be found: '"+o+"', so it was approximated to '"+s.container.path.toString()+"' to recover. Has the story changed since this save data was created?")}}var h=!!r.exp,c=new y(a,s,h),f=r.temp;void 0!==f?c.temporaryVariables=K.JObjectToDictionaryRuntimeObjs(f):c.temporaryVariables.clear(),this.callstack.push(c)}}catch(t){i.e(t)}finally{i.f()}var v,d=t.previousContentObject;void 0!==d&&(v=new E(d.toString()),this.previousPointer=e.PointerAtPath(v))}}return a(p,[{key:"Copy",value:function(){var t=new p;t.threadIndex=this.threadIndex;var e,n=pt(this.callstack);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.callstack.push(i.Copy())}}catch(t){n.e(t)}finally{n.f()}return t.previousPointer=this.previousPointer.copy(),t}},{key:"WriteJson",value:function(t){t.WriteObjectStart(),t.WritePropertyStart("callstack"),t.WriteArrayStart();var e,n=pt(this.callstack);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(t.WriteObjectStart(),!i.currentPointer.isNull){if(null===i.currentPointer.container)return gt("el.currentPointer.container");t.WriteProperty("cPath",i.currentPointer.container.path.componentsString),t.WriteIntProperty("idx",i.currentPointer.index)}t.WriteProperty("exp",i.inExpressionEvaluation),t.WriteIntProperty("type",i.type),0<i.temporaryVariables.size&&(t.WritePropertyStart("temp"),K.WriteDictionaryRuntimeObjs(t,i.temporaryVariables),t.WritePropertyEnd()),t.WriteObjectEnd()}}catch(t){n.e(t)}finally{n.f()}if(t.WriteArrayEnd(),t.WritePropertyEnd(),t.WriteIntProperty("threadIndex",this.threadIndex),!this.previousPointer.isNull){var r=this.previousPointer.Resolve();if(null===r)return gt("this.previousPointer.Resolve()");t.WriteProperty("previousContentObject",r.path.toString())}t.WriteObjectEnd()}}]),p}();t.Thread=e}(U=U||{});var z=function(){function l(t,e){m(this,l),this.variableChangedEventCallbacks=[],this.patch=null,this._batchObservingVariableChanges=!1,this._defaultGlobalVariables=new Map,this._changedVariablesForBatchObs=new Set,this._globalVariables=new Map,this._callStack=t,this._listDefsOrigin=e;try{return new Proxy(this,{get:function(t,e){return e in t?t[e]:t.$(e)},set:function(t,e,n){return e in t?t[e]=n:t.$(e,n),!0}})}catch(t){}}return a(l,[{key:"variableChangedEvent",value:function(t,e){var n,i=pt(this.variableChangedEventCallbacks);try{for(i.s();!(n=i.n()).done;){(0,n.value)(t,e)}}catch(t){i.e(t)}finally{i.f()}}},{key:"$",value:function(t,e){if(void 0===e){var n=null;return null!==this.patch&&(n=this.patch.TryGetGlobal(t,null)).exists?n.result.valueObject:(void 0===(n=this._globalVariables.get(t))&&(n=this._defaultGlobalVariables.get(t)),void 0!==n?n.valueObject:null)}if(void 0===this._defaultGlobalVariables.get(t))throw new bt("Cannot assign to a variable ("+t+") that hasn't been declared in the story");var i=_t.Create(e);if(null==i)throw new bt(null==e?"Cannot pass null to VariableState":"Invalid value passed to VariableState: "+e.toString());this.SetGlobal(t,i)}},{key:"ApplyPatch",value:function(){if(null===this.patch)return gt("this.patch");var t,e=pt(this.patch.globals);try{for(e.s();!(t=e.n()).done;){var n=S(t.value,2),i=n[0],r=n[1];this._globalVariables.set(i,r)}}catch(t){e.e(t)}finally{e.f()}if(null!==this._changedVariablesForBatchObs){var a,s=pt(this.patch.changedVariables);try{for(s.s();!(a=s.n()).done;){var o=a.value;this._changedVariablesForBatchObs.add(o)}}catch(t){s.e(t)}finally{s.f()}}this.patch=null}},{key:"SetJsonToken",value:function(t){this._globalVariables.clear();var e,n=pt(this._defaultGlobalVariables);try{for(n.s();!(e=n.n()).done;){var i=S(e.value,2),r=i[0],a=i[1],s=t[r];if(void 0!==s){var o=K.JTokenToRuntimeObject(s);if(null===o)return gt("tokenInkObject");this._globalVariables.set(r,o)}else this._globalVariables.set(r,a)}}catch(t){n.e(t)}finally{n.f()}}},{key:"WriteJson",value:function(t){t.WriteObjectStart();var e,n=pt(this._globalVariables);try{for(n.s();!(e=n.n()).done;){var i=S(e.value,2),r=i[0],a=i[1],s=r,o=a;if(l.dontSaveDefaultValues&&this._defaultGlobalVariables.has(s)){var u=this._defaultGlobalVariables.get(s);if(this.RuntimeObjectsEqual(o,u))continue}t.WritePropertyStart(s),K.WriteRuntimeObject(t,o),t.WritePropertyEnd()}}catch(t){n.e(t)}finally{n.f()}t.WriteObjectEnd()}},{key:"RuntimeObjectsEqual",value:function(t,e){if(null===t)return gt("obj1");if(null===e)return gt("obj2");if(t.constructor!==e.constructor)return!1;var n=yt(t,Tt);if(null!==n)return n.value===mt(e,Tt).value;var i=yt(t,x);if(null!==i)return i.value===mt(e,x).value;var r=yt(t,_t),a=yt(e,_t);if(null!==r&&null!==a)return b(r.valueObject)&&b(a.valueObject)?r.valueObject.Equals(a.valueObject):r.valueObject===a.valueObject;throw new Error("FastRoughDefinitelyEquals: Unsupported runtime object type: "+t.constructor.name)}},{key:"GetVariableWithName",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:-1,i=this.GetRawVariableWithName(t,n),r=yt(i,I);return null!==r&&(i=this.ValueAtVariablePointer(r)),i}},{key:"TryGetDefaultVariableValue",value:function(t){var e=w(this._defaultGlobalVariables,t,null);return e.exists?e.result:null}},{key:"GlobalVariableExistsWithName",value:function(t){return this._globalVariables.has(t)||null!==this._defaultGlobalVariables&&this._defaultGlobalVariables.has(t)}},{key:"GetRawVariableWithName",value:function(t,e){if(0==e||-1==e){var n=null;if(null!==this.patch&&(n=this.patch.TryGetGlobal(t,null)).exists)return n.result;if((n=w(this._globalVariables,t,null)).exists)return n.result;if(null!==this._defaultGlobalVariables&&(n=w(this._defaultGlobalVariables,t,null)).exists)return n.result;if(null===this._listDefsOrigin)return gt("VariablesState._listDefsOrigin");var i=this._listDefsOrigin.FindSingleItemListWithName(t);if(i)return i}return this._callStack.GetTemporaryVariableWithName(t,e)}},{key:"ValueAtVariablePointer",value:function(t){return this.GetVariableWithName(t.variableName,t.contextIndex)}},{key:"Assign",value:function(t,e){var n=t.variableName;if(null===n)return gt("name");var i=-1,r=!1,r=t.isNewDeclaration?t.isGlobal:this.GlobalVariableExistsWithName(n);if(t.isNewDeclaration){var a=yt(e,I);null!==a&&(e=this.ResolveVariablePointer(a))}else for(var s=null;null!=(s=yt(this.GetRawVariableWithName(n,i),I))&&(n=s.variableName,r=0==(i=s.contextIndex)),null!=s;);r?this.SetGlobal(n,e):this._callStack.SetTemporaryVariable(n,e,t.isNewDeclaration,i)}},{key:"SnapshotDefaultGlobals",value:function(){this._defaultGlobalVariables=new Map(this._globalVariables)}},{key:"RetainListOriginsForAssignment",value:function(t,e){var n=mt(t,Ot),i=mt(e,Ot);n.value&&i.value&&0==i.value.Count&&i.value.SetInitialOriginNames(n.value.originNames)}},{key:"SetGlobal",value:function(t,e){var n=null;if(null===this.patch&&(n=w(this._globalVariables,t,null)),null!==this.patch&&((n=this.patch.TryGetGlobal(t,null)).exists||(n=w(this._globalVariables,t,null))),Ot.RetainListOriginsForAssignment(n.result,e),null===t)return gt("variableName");if(null!==this.patch?this.patch.SetGlobal(t,e):this._globalVariables.set(t,e),null!==this.variableChangedEvent&&null!==n&&e!==n.result)if(this.batchObservingVariableChanges){if(null===this._changedVariablesForBatchObs)return gt("this._changedVariablesForBatchObs");null!==this.patch?this.patch.AddChangedVariable(t):null!==this._changedVariablesForBatchObs&&this._changedVariablesForBatchObs.add(t)}else this.variableChangedEvent(t,e)}},{key:"ResolveVariablePointer",value:function(t){var e=t.contextIndex;-1==e&&(e=this.GetContextIndexOfVariableNamed(t.variableName));var n=yt(this.GetRawVariableWithName(t.variableName,e),I);return null!=n?n:new I(t.variableName,e)}},{key:"GetContextIndexOfVariableNamed",value:function(t){return this.GlobalVariableExistsWithName(t)?0:this._callStack.currentElementIndex}},{key:"ObserveVariableChange",value:function(t){this.variableChangedEventCallbacks.push(t)}},{key:"batchObservingVariableChanges",get:function(){return this._batchObservingVariableChanges},set:function(t){if(this._batchObservingVariableChanges=t)this._changedVariablesForBatchObs=new Set;else if(null!=this._changedVariablesForBatchObs){var e,n=pt(this._changedVariablesForBatchObs);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=this._globalVariables.get(i);r?this.variableChangedEvent(i,r):gt("currentValue")}}catch(t){n.e(t)}finally{n.f()}this._changedVariablesForBatchObs=null}}},{key:"callStack",get:function(){return this._callStack},set:function(t){this._callStack=t}}]),l}();z.dontSaveDefaultValues=!0;var Lt=function(){function e(t){m(this,e),this.seed=t%2147483647,this.seed<=0&&(this.seed+=2147483646)}return a(e,[{key:"next",value:function(){return this.seed=16807*this.seed%2147483647}},{key:"nextFloat",value:function(){return(this.next()-1)/2147483646}}]),e}(),H=function(){function e(){var t;m(this,e),this._changedVariables=new Set,this._visitCounts=new Map,this._turnIndices=new Map,1===arguments.length&&null!==arguments[0]?(t=arguments[0],this._globals=new Map(t._globals),this._changedVariables=new Set(t._changedVariables),this._visitCounts=new Map(t._visitCounts),this._turnIndices=new Map(t._turnIndices)):(this._globals=new Map,this._changedVariables=new Set,this._visitCounts=new Map,this._turnIndices=new Map)}return a(e,[{key:"TryGetGlobal",value:function(t,e){return null!==t&&this._globals.has(t)?{result:this._globals.get(t),exists:!0}:{result:e,exists:!1}}},{key:"SetGlobal",value:function(t,e){this._globals.set(t,e)}},{key:"AddChangedVariable",value:function(t){return this._changedVariables.add(t)}},{key:"TryGetVisitCount",value:function(t,e){return this._visitCounts.has(t)?{result:this._visitCounts.get(t),exists:!0}:{result:e,exists:!1}}},{key:"SetVisitCount",value:function(t,e){this._visitCounts.set(t,e)}},{key:"SetTurnIndex",value:function(t,e){this._turnIndices.set(t,e)}},{key:"TryGetTurnIndex",value:function(t,e){return this._turnIndices.has(t)?{result:this._turnIndices.get(t),exists:!0}:{result:e,exists:!1}}},{key:"globals",get:function(){return this._globals}},{key:"changedVariables",get:function(){return this._changedVariables}},{key:"visitCounts",get:function(){return this._visitCounts}},{key:"turnIndices",get:function(){return this._turnIndices}}]),e}(),$=function(){function e(){m(this,e)}return a(e,null,[{key:"TextToDictionary",value:function(t){return new e.Reader(t).ToDictionary()}},{key:"TextToArray",value:function(t){return new e.Reader(t).ToArray()}}]),e}();!function(n){var t=function(){function e(t){m(this,e),this._rootObject=JSON.parse(t)}return a(e,[{key:"ToDictionary",value:function(){return this._rootObject}},{key:"ToArray",value:function(){return this._rootObject}}]),e}();n.Reader=t;var e=function(){function t(){m(this,t),this._currentPropertyName=null,this._currentString=null,this._stateStack=[],this._collectionStack=[],this._propertyNameStack=[],this._jsonObject=null}return a(t,[{key:"WriteObject",value:function(t){this.WriteObjectStart(),t(this),this.WriteObjectEnd()}},{key:"WriteObjectStart",value:function(){this.StartNewObject(!0);var t,e={};this.state===n.Writer.State.Property?(this.Assert(null!==this.currentCollection),this.Assert(null!==this.currentPropertyName),t=this._propertyNameStack.pop(),this.currentCollection[t]=e):this.state===n.Writer.State.Array?(this.Assert(null!==this.currentCollection),this.currentCollection.push(e)):(this.Assert(this.state===n.Writer.State.None),this._jsonObject=e),this._collectionStack.push(e),this._stateStack.push(new n.Writer.StateElement(n.Writer.State.Object))}},{key:"WriteObjectEnd",value:function(){this.Assert(this.state===n.Writer.State.Object),this._collectionStack.pop(),this._stateStack.pop()}},{key:"WriteProperty",value:function(t,e){this.WritePropertyStart(t),e instanceof Function?e(this):this.Write(e),this.WritePropertyEnd()}},{key:"WriteIntProperty",value:function(t,e){this.WritePropertyStart(t),this.WriteInt(e),this.WritePropertyEnd()}},{key:"WriteFloatProperty",value:function(t,e){this.WritePropertyStart(t),this.WriteFloat(e),this.WritePropertyEnd()}},{key:"WritePropertyStart",value:function(t){this.Assert(this.state===n.Writer.State.Object),this._propertyNameStack.push(t),this.IncrementChildCount(),this._stateStack.push(new n.Writer.StateElement(n.Writer.State.Property))}},{key:"WritePropertyEnd",value:function(){this.Assert(this.state===n.Writer.State.Property),this.Assert(1===this.childCount),this._stateStack.pop()}},{key:"WritePropertyNameStart",value:function(){this.Assert(this.state===n.Writer.State.Object),this.IncrementChildCount(),this._currentPropertyName="",this._stateStack.push(new n.Writer.StateElement(n.Writer.State.Property)),this._stateStack.push(new n.Writer.StateElement(n.Writer.State.PropertyName))}},{key:"WritePropertyNameEnd",value:function(){this.Assert(this.state===n.Writer.State.PropertyName),this.Assert(null!==this._currentPropertyName),this._propertyNameStack.push(this._currentPropertyName),this._currentPropertyName=null,this._stateStack.pop()}},{key:"WritePropertyNameInner",value:function(t){this.Assert(this.state===n.Writer.State.PropertyName),this.Assert(null!==this._currentPropertyName),this._currentPropertyName+=t}},{key:"WriteArrayStart",value:function(){this.StartNewObject(!0);var t,e=[];this.state===n.Writer.State.Property?(this.Assert(null!==this.currentCollection),this.Assert(null!==this.currentPropertyName),t=this._propertyNameStack.pop(),this.currentCollection[t]=e):this.state===n.Writer.State.Array?(this.Assert(null!==this.currentCollection),this.currentCollection.push(e)):(this.Assert(this.state===n.Writer.State.None),this._jsonObject=e),this._collectionStack.push(e),this._stateStack.push(new n.Writer.StateElement(n.Writer.State.Array))}},{key:"WriteArrayEnd",value:function(){this.Assert(this.state===n.Writer.State.Array),this._collectionStack.pop(),this._stateStack.pop()}},{key:"Write",value:function(t){null!==t?(this.StartNewObject(!1),this._addToCurrentObject(t)):console.error("Warning: trying to write a null string")}},{key:"WriteInt",value:function(t){null!==t&&(this.StartNewObject(!1),this._addToCurrentObject(Math.floor(t)))}},{key:"WriteFloat",value:function(t){null!==t&&(this.StartNewObject(!1),t==Number.POSITIVE_INFINITY?this._addToCurrentObject(34e37):t==Number.NEGATIVE_INFINITY?this._addToCurrentObject(-34e37):isNaN(t)?this._addToCurrentObject(0):this._addToCurrentObject(t))}},{key:"WriteNull",value:function(){this.StartNewObject(!1),this._addToCurrentObject(null)}},{key:"WriteStringStart",value:function(){this.StartNewObject(!1),this._currentString="",this._stateStack.push(new n.Writer.StateElement(n.Writer.State.String))}},{key:"WriteStringEnd",value:function(){this.Assert(this.state==n.Writer.State.String),this._stateStack.pop(),this._addToCurrentObject(this._currentString),this._currentString=null}},{key:"WriteStringInner",value:function(t){this.Assert(this.state===n.Writer.State.String),null!==t?this._currentString+=t:console.error("Warning: trying to write a null string")}},{key:"ToString",value:function(){return null===this._jsonObject?"":JSON.stringify(this._jsonObject)}},{key:"StartNewObject",value:function(t){t?this.Assert(this.state===n.Writer.State.None||this.state===n.Writer.State.Property||this.state===n.Writer.State.Array):this.Assert(this.state===n.Writer.State.Property||this.state===n.Writer.State.Array),this.state===n.Writer.State.Property&&this.Assert(0===this.childCount),this.state!==n.Writer.State.Array&&this.state!==n.Writer.State.Property||this.IncrementChildCount()}},{key:"IncrementChildCount",value:function(){this.Assert(0<this._stateStack.length);var t=this._stateStack.pop();t.childCount++,this._stateStack.push(t)}},{key:"Assert",value:function(t){if(!t)throw Error("Assert failed while writing JSON")}},{key:"_addToCurrentObject",value:function(t){this.Assert(null!==this.currentCollection),this.state===n.Writer.State.Array?(this.Assert(Array.isArray(this.currentCollection)),this.currentCollection.push(t)):this.state===n.Writer.State.Property&&(this.Assert(!Array.isArray(this.currentCollection)),this.Assert(null!==this.currentPropertyName),this.currentCollection[this.currentPropertyName]=t,this._propertyNameStack.pop())}},{key:"state",get:function(){return 0<this._stateStack.length?this._stateStack[this._stateStack.length-1].type:n.Writer.State.None}},{key:"childCount",get:function(){return 0<this._stateStack.length?this._stateStack[this._stateStack.length-1].childCount:0}},{key:"currentCollection",get:function(){return 0<this._collectionStack.length?this._collectionStack[this._collectionStack.length-1]:null}},{key:"currentPropertyName",get:function(){return 0<this._propertyNameStack.length?this._propertyNameStack[this._propertyNameStack.length-1]:null}}]),t}();n.Writer=e,function(t){var e;(e=t.State||(t.State={}))[e.None=0]="None",e[e.Object=1]="Object",e[e.Array=2]="Array",e[e.Property=3]="Property",e[e.PropertyName=4]="PropertyName",e[e.String=5]="String";t.StateElement=function t(e){m(this,t),this.type=n.Writer.State.None,this.childCount=0,this.type=e}}(e=n.Writer||(n.Writer={}))}($=$||{});var X,Y,Q=function(){function n(t){m(this,n),this.kInkSaveStateVersion=8,this.kMinCompatibleLoadVersion=8,this._currentErrors=null,this._currentWarnings=null,this.divertedPointer=xt.Null,this._currentTurnIndex=0,this.storySeed=0,this.previousRandom=0,this.didSafeExit=!1,this._currentText=null,this._currentTags=null,this._outputStreamTextDirty=!0,this._outputStreamTagsDirty=!0,this._patch=null,this.story=t,this._outputStream=[],this.OutputStreamDirty(),this._evaluationStack=[],this.callStack=new U(t),this._variablesState=new z(this.callStack,t.listDefinitions),this._visitCounts=new Map,this._turnIndices=new Map,this.currentTurnIndex=-1;var e=(new Date).getTime();this.storySeed=new Lt(e).next()%100,this.previousRandom=0,this._currentChoices=[],this.GoToStart()}return a(n,[{key:"ToJson",value:function(){var t=new $.Writer;return this.WriteJson(t),t.ToString()}},{key:"toJson",value:function(t){var e=0<arguments.length&&void 0!==t&&t;return this.ToJson(e)}},{key:"LoadJson",value:function(t){var e=$.TextToDictionary(t);this.LoadJsonObj(e)}},{key:"VisitCountAtPathString",value:function(t){var e;if(null!==this._patch){var n=this.story.ContentAtPath(new E(t)).container;if(null===n)throw new Error("Content at path not found: "+t);if((e=this._patch.TryGetVisitCount(n,0)).exists)return e.result}return(e=w(this._visitCounts,t,null)).exists?e.result:0}},{key:"VisitCountForContainer",value:function(t){if(null===t)return gt("container");if(!t.visitsShouldBeCounted)return this.story.Error("Read count for target ("+t.name+" - on "+t.debugMetadata+") unknown. The story may need to be compiled with countAllVisits flag (-c)."),0;if(null!==this._patch){var e=this._patch.TryGetVisitCount(t,0);if(e.exists)return e.result}var n=t.path.toString(),i=w(this._visitCounts,n,null);return i.exists?i.result:0}},{key:"IncrementVisitCountForContainer",value:function(t){if(null!==this._patch){var e=this.VisitCountForContainer(t);return e++,void this._patch.SetVisitCount(t,e)}var n=t.path.toString(),i=w(this._visitCounts,n,null);i.exists?this._visitCounts.set(n,i.result+1):this._visitCounts.set(n,1)}},{key:"RecordTurnIndexVisitToContainer",value:function(t){var e;null===this._patch?(e=t.path.toString(),this._turnIndices.set(e,this.currentTurnIndex)):this._patch.SetTurnIndex(t,this.currentTurnIndex)}},{key:"TurnsSinceForContainer",value:function(t){if(t.turnIndexShouldBeCounted||this.story.Error("TURNS_SINCE() for target ("+t.name+" - on "+t.debugMetadata+") unknown. The story may need to be compiled with countAllVisits flag (-c)."),null!==this._patch){var e=this._patch.TryGetTurnIndex(t,0);if(e.exists)return this.currentTurnIndex-e.result}var n=t.path.toString(),i=w(this._turnIndices,n,0);return i.exists?this.currentTurnIndex-i.result:-1}},{key:"CleanOutputWhitespace",value:function(t){for(var e=new St,n=-1,i=0,r=0;r<t.length;r++){var a=t.charAt(r),s=" "==a||"\t"==a;s&&-1==n&&(n=r),s||("\n"!=a&&0<n&&n!=i&&e.Append(" "),n=-1),"\n"==a&&(i=r+1),s||e.Append(a)}return e.toString()}},{key:"GoToStart",value:function(){this.callStack.currentElement.currentPointer=xt.StartOf(this.story.mainContentContainer)}},{key:"CopyAndStartPatching",value:function(){var t=new n(this.story);return t._patch=new H(this._patch),t.outputStream.push.apply(t.outputStream,this._outputStream),t.OutputStreamDirty(),t._currentChoices.push.apply(t._currentChoices,this._currentChoices),this.hasError&&(t._currentErrors=[],t._currentErrors.push.apply(t._currentErrors,this.currentErrors||[])),this.hasWarning&&(t._currentWarnings=[],t._currentWarnings.push.apply(t._currentWarnings,this.currentWarnings||[])),t.callStack=new U(this.callStack),t.variablesState=this.variablesState,t.variablesState.callStack=t.callStack,t.variablesState.patch=t._patch,t.evaluationStack.push.apply(t.evaluationStack,this.evaluationStack),this.divertedPointer.isNull||(t.divertedPointer=this.divertedPointer.copy()),t.previousPointer=this.previousPointer.copy(),t._visitCounts=this._visitCounts,t._turnIndices=this._turnIndices,t.currentTurnIndex=this.currentTurnIndex,t.storySeed=this.storySeed,t.previousRandom=this.previousRandom,t.didSafeExit=this.didSafeExit,t}},{key:"RestoreAfterPatch",value:function(){this.variablesState.callStack=this.callStack,this.variablesState.patch=this._patch}},{key:"ApplyAnyPatch",value:function(){if(null!==this._patch){this.variablesState.ApplyPatch();var t,e=pt(this._patch.visitCounts);try{for(e.s();!(t=e.n()).done;){var n=S(t.value,2),i=n[0],r=n[1];this.ApplyCountChanges(i,r,!0)}}catch(t){e.e(t)}finally{e.f()}var a,s=pt(this._patch.turnIndices);try{for(s.s();!(a=s.n()).done;){var o=S(a.value,2),u=o[0],l=o[1];this.ApplyCountChanges(u,l,!1)}}catch(t){s.e(t)}finally{s.f()}this._patch=null}}},{key:"ApplyCountChanges",value:function(t,e,n){(n?this._visitCounts:this._turnIndices).set(t.path.toString(),e)}},{key:"WriteJson",value:function(t){var r=this;t.WriteObjectStart();var e,n=!1,i=pt(this._currentChoices);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(null===a.threadAtGeneration)return gt("c.threadAtGeneration");a.originalThreadIndex=a.threadAtGeneration.threadIndex,null===this.callStack.ThreadWithIndex(a.originalThreadIndex)&&(n||(n=!0,t.WritePropertyStart("choiceThreads"),t.WriteObjectStart()),t.WritePropertyStart(a.originalThreadIndex),a.threadAtGeneration.WriteJson(t),t.WritePropertyEnd())}}catch(t){i.e(t)}finally{i.f()}if(n&&(t.WriteObjectEnd(),t.WritePropertyEnd()),t.WriteProperty("callstackThreads",function(t){return r.callStack.WriteJson(t)}),t.WriteProperty("variablesState",function(t){return r.variablesState.WriteJson(t)}),t.WriteProperty("evalStack",function(t){return K.WriteListRuntimeObjs(t,r.evaluationStack)}),t.WriteProperty("outputStream",function(t){return K.WriteListRuntimeObjs(t,r._outputStream)}),t.WriteProperty("currentChoices",function(t){t.WriteArrayStart();var e,n=pt(r._currentChoices);try{for(n.s();!(e=n.n()).done;){var i=e.value;K.WriteChoice(t,i)}}catch(t){n.e(t)}finally{n.f()}t.WriteArrayEnd()}),!this.divertedPointer.isNull){if(null===this.divertedPointer.path)return gt("divertedPointer");t.WriteProperty("currentDivertTarget",this.divertedPointer.path.componentsString)}t.WriteProperty("visitCounts",function(t){return K.WriteIntDictionary(t,r._visitCounts)}),t.WriteProperty("turnIndices",function(t){return K.WriteIntDictionary(t,r._turnIndices)}),t.WriteIntProperty("turnIdx",this.currentTurnIndex),t.WriteIntProperty("storySeed",this.storySeed),t.WriteIntProperty("previousRandom",this.previousRandom),t.WriteIntProperty("inkSaveVersion",this.kInkSaveStateVersion),t.WriteIntProperty("inkFormatVersion",o.Story.inkVersionCurrent),t.WriteObjectEnd()}},{key:"LoadJsonObj",value:function(t){var e=t,n=e.inkSaveVersion;if(null==n)throw new bt("ink save format incorrect, can't load.");if(parseInt(n)<this.kMinCompatibleLoadVersion)throw new bt("Ink save format isn't compatible with the current version (saw '"+n+"', but minimum is "+this.kMinCompatibleLoadVersion+"), so can't load.");this.callStack.SetJsonToken(e.callstackThreads,this.story),this.variablesState.SetJsonToken(e.variablesState),this._evaluationStack=K.JArrayToRuntimeObjList(e.evalStack),this._outputStream=K.JArrayToRuntimeObjList(e.outputStream),this.OutputStreamDirty(),this._currentChoices=K.JArrayToRuntimeObjList(e.currentChoices);var i,r=e.currentDivertTarget;null!=r&&(i=new E(r.toString()),this.divertedPointer=this.story.PointerAtPath(i)),this._visitCounts=K.JObjectToIntDictionary(e.visitCounts),this._turnIndices=K.JObjectToIntDictionary(e.turnIndices),this.currentTurnIndex=parseInt(e.turnIdx),this.storySeed=parseInt(e.storySeed),this.previousRandom=parseInt(e.previousRandom);var a,s=e.choiceThreads,o=pt(this._currentChoices);try{for(o.s();!(a=o.n()).done;){var u,l=a.value,h=this.callStack.ThreadWithIndex(l.originalThreadIndex);null!=h?l.threadAtGeneration=h.Copy():(u=s[l.originalThreadIndex.toString()],l.threadAtGeneration=new U.Thread(u,this.story))}}catch(t){o.e(t)}finally{o.f()}}},{key:"ResetErrors",value:function(){this._currentErrors=null,this._currentWarnings=null}},{key:"ResetOutput",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;this._outputStream.length=0,null!==e&&this._outputStream.push.apply(this._outputStream,e),this.OutputStreamDirty()}},{key:"PushToOutputStream",value:function(t){var e=yt(t,wt);if(null!==e){var n=this.TrySplittingHeadTailWhitespace(e);if(null!==n){var i,r=pt(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.PushToOutputStreamIndividual(a)}}catch(t){r.e(t)}finally{r.f()}return void this.OutputStreamDirty()}}this.PushToOutputStreamIndividual(t),this.OutputStreamDirty()}},{key:"PopFromOutputStream",value:function(t){this.outputStream.splice(this.outputStream.length-t,t),this.OutputStreamDirty()}},{key:"TrySplittingHeadTailWhitespace",value:function(t){var e=t.value;if(null===e)return gt("single.value");for(var n=-1,i=-1,r=0;r<e.length;++r){var a=e[r];if("\n"!=a){if(" "==a||"\t"==a)continue;break}-1==n&&(n=r),i=r}for(var s=-1,o=-1,u=0;u<e.length;++u){var l=e[u];if("\n"!=l){if(" "==l||"\t"==l)continue;break}-1==s&&(s=u),o=u}if(-1==n&&-1==s)return null;var h,c,f,v,d=[],p=0,y=e.length;return-1!=n&&(0<n&&(h=new wt(e.substring(0,n)),d.push(h)),d.push(new wt("\n")),p=i+1),-1!=s&&(y=o),p<y&&(c=e.substring(p,y-p),d.push(new wt(c))),-1!=s&&i<o&&(d.push(new wt("\n")),s<e.length-1&&(f=e.length-s-1,v=new wt(e.substring(s+1,f)),d.push(v))),d}},{key:"PushToOutputStreamIndividual",value:function(t){var e=yt(t,D),n=yt(t,wt),i=!0;if(e)this.TrimNewlinesFromOutputStream(),i=!0;else if(n){var r=-1,a=this.callStack.currentElement;a.type==Nt.Function&&(r=a.functionStartInOutputStream);for(var s=-1,o=this._outputStream.length-1;0<=o;o--){var u=this._outputStream[o],l=u instanceof At?u:null;if(null!=(u instanceof D?u:null)){s=o;break}if(null!=l&&l.commandType==At.CommandType.BeginString){r<=o&&(r=-1);break}}if(-1!=(-1!=s&&-1!=r?Math.min(r,s):-1!=s?s:r)){if(n.isNewline)i=!1;else if(n.isNonWhitespace&&(-1<s&&this.RemoveExistingGlue(),-1<r))for(var h=this.callStack.elements,c=h.length-1;0<=c;c--){var f=h[c];if(f.type!=Nt.Function)break;f.functionStartInOutputStream=-1}}else n.isNewline&&(!this.outputStreamEndsInNewline&&this.outputStreamContainsContent||(i=!1))}if(i){if(null===t)return gt("obj");this._outputStream.push(t),this.OutputStreamDirty()}}},{key:"TrimNewlinesFromOutputStream",value:function(){for(var t=-1,e=this._outputStream.length-1;0<=e;){var n=this._outputStream[e],i=yt(n,At),r=yt(n,wt);if(null!=i||null!=r&&r.isNonWhitespace)break;null!=r&&r.isNewline&&(t=e),e--}if(0<=t)for(e=t;e<this._outputStream.length;){yt(this._outputStream[e],wt)?this._outputStream.splice(e,1):e++}this.OutputStreamDirty()}},{key:"RemoveExistingGlue",value:function(){for(var t=this._outputStream.length-1;0<=t;t--){var e=this._outputStream[t];if(e instanceof D)this._outputStream.splice(t,1);else if(e instanceof At)break}this.OutputStreamDirty()}},{key:"PushEvaluationStack",value:function(t){var e=yt(t,Ot);if(e){var n=e.value;if(null===n)return gt("rawList");if(null!=n.originNames){n.origins||(n.origins=[]),n.origins.length=0;var i,r=pt(n.originNames);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(null===this.story.listDefinitions)return gt("StoryState.story.listDefinitions");var s=this.story.listDefinitions.TryListGetDefinition(a,null);if(null===s.result)return gt("StoryState def.result");n.origins.indexOf(s.result)<0&&n.origins.push(s.result)}}catch(t){r.e(t)}finally{r.f()}}}if(null===t)return gt("obj");this.evaluationStack.push(t)}},{key:"PopEvaluationStack",value:function(t){if(void 0===t)return g(this.evaluationStack.pop());if(t>this.evaluationStack.length)throw new Error("trying to pop too many objects");return g(this.evaluationStack.splice(this.evaluationStack.length-t,t))}},{key:"PeekEvaluationStack",value:function(){return this.evaluationStack[this.evaluationStack.length-1]}},{key:"ForceEnd",value:function(){this.callStack.Reset(),this._currentChoices.length=0,this.currentPointer=xt.Null,this.previousPointer=xt.Null,this.didSafeExit=!0}},{key:"TrimWhitespaceFromFunctionEnd",value:function(){k.Assert(this.callStack.currentElement.type==Nt.Function);var t=this.callStack.currentElement.functionStartInOutputStream;-1==t&&(t=0);for(var e=this._outputStream.length-1;t<=e;e--){var n=this._outputStream[e],i=yt(n,wt),r=yt(n,At);if(null!=i){if(r)break;if(!i.isNewline&&!i.isInlineWhitespace)break;this._outputStream.splice(e,1),this.OutputStreamDirty()}}}},{key:"PopCallStack",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;this.callStack.currentElement.type==Nt.Function&&this.TrimWhitespaceFromFunctionEnd(),this.callStack.Pop(e)}},{key:"SetChosenPath",value:function(t,e){this._currentChoices.length=0;var n=this.story.PointerAtPath(t);n.isNull||-1!=n.index||(n.index=0),this.currentPointer=n,e&&this.currentTurnIndex++}},{key:"StartFunctionEvaluationFromGame",value:function(t,e){this.callStack.Push(Nt.FunctionEvaluationFromGame,this.evaluationStack.length),this.callStack.currentElement.currentPointer=xt.StartOf(t),this.PassArgumentsToEvaluationStack(e)}},{key:"PassArgumentsToEvaluationStack",value:function(t){if(null!=t)for(var e=0;e<t.length;e++){if("number"!=typeof t[e]&&"string"!=typeof t[e])throw new Error("ink arguments when calling EvaluateFunction / ChoosePathStringWithParameters  must be int, float or string");this.PushEvaluationStack(_t.Create(t[e]))}}},{key:"TryExitFunctionEvaluationFromGame",value:function(){return this.callStack.currentElement.type==Nt.FunctionEvaluationFromGame&&(this.currentPointer=xt.Null,this.didSafeExit=!0)}},{key:"CompleteFunctionEvaluationFromGame",value:function(){if(this.callStack.currentElement.type!=Nt.FunctionEvaluationFromGame)throw new bt("Expected external function evaluation to be complete. Stack trace: "+this.callStack.callStackTrace);for(var t=this.callStack.currentElement.evaluationStackHeightWhenPushed,e=null;this.evaluationStack.length>t;){var n=this.PopEvaluationStack();null===e&&(e=n)}if(this.PopCallStack(Nt.FunctionEvaluationFromGame),e){if(e instanceof Vt)return null;var i=mt(e,_t);return i.valueType==P.DivertTarget?i.valueObject.toString():i.valueObject}return null}},{key:"AddError",value:function(t,e){e?(null==this._currentWarnings&&(this._currentWarnings=[]),this._currentWarnings.push(t)):(null==this._currentErrors&&(this._currentErrors=[]),this._currentErrors.push(t))}},{key:"OutputStreamDirty",value:function(){this._outputStreamTextDirty=!0,this._outputStreamTagsDirty=!0}},{key:"callstackDepth",get:function(){return this.callStack.depth}},{key:"outputStream",get:function(){return this._outputStream}},{key:"currentChoices",get:function(){return this.canContinue?[]:this._currentChoices}},{key:"generatedChoices",get:function(){return this._currentChoices}},{key:"currentErrors",get:function(){return this._currentErrors}},{key:"currentWarnings",get:function(){return this._currentWarnings}},{key:"variablesState",get:function(){return this._variablesState},set:function(t){this._variablesState=t}},{key:"evaluationStack",get:function(){return this._evaluationStack}},{key:"visitCounts",get:function(){return this._visitCounts}},{key:"turnIndices",get:function(){return this._turnIndices}},{key:"currentTurnIndex",get:function(){return this._currentTurnIndex},set:function(t){this._currentTurnIndex=t}},{key:"currentPathString",get:function(){var t=this.currentPointer;return t.isNull?null:null===t.path?gt("pointer.path"):t.path.toString()}},{key:"currentPointer",get:function(){return this.callStack.currentElement.currentPointer.copy()},set:function(t){this.callStack.currentElement.currentPointer=t.copy()}},{key:"previousPointer",get:function(){return this.callStack.currentThread.previousPointer.copy()},set:function(t){this.callStack.currentThread.previousPointer=t.copy()}},{key:"canContinue",get:function(){return!this.currentPointer.isNull&&!this.hasError}},{key:"hasError",get:function(){return null!=this.currentErrors&&0<this.currentErrors.length}},{key:"hasWarning",get:function(){return null!=this.currentWarnings&&0<this.currentWarnings.length}},{key:"currentText",get:function(){if(this._outputStreamTextDirty){var t,e=new St,n=pt(this._outputStream);try{for(n.s();!(t=n.n()).done;){var i=yt(t.value,wt);null!==i&&e.Append(i.value)}}catch(t){n.e(t)}finally{n.f()}this._currentText=this.CleanOutputWhitespace(e.toString()),this._outputStreamTextDirty=!1}return this._currentText}},{key:"currentTags",get:function(){if(this._outputStreamTagsDirty){this._currentTags=[];var t,e=pt(this._outputStream);try{for(e.s();!(t=e.n()).done;){var n=yt(t.value,B);null!==n&&this._currentTags.push(n.text)}}catch(t){e.e(t)}finally{e.f()}this._outputStreamTagsDirty=!1}return this._currentTags}},{key:"inExpressionEvaluation",get:function(){return this.callStack.currentElement.inExpressionEvaluation},set:function(t){this.callStack.currentElement.inExpressionEvaluation=t}},{key:"outputStreamEndsInNewline",get:function(){if(0<this._outputStream.length)for(var t=this._outputStream.length-1;0<=t;t--){if(this._outputStream[t]instanceof At)break;var e=this._outputStream[t];if(e instanceof wt){if(e.isNewline)return!0;if(e.isNonWhitespace)break}}return!1}},{key:"outputStreamContainsContent",get:function(){for(var t=0;t<this._outputStream.length;t++)if(this._outputStream[t]instanceof wt)return!0;return!1}},{key:"inStringEvaluation",get:function(){for(var t=this._outputStream.length-1;0<=t;t--){var e=yt(this._outputStream[t],At);if(e instanceof At&&e.commandType==At.CommandType.BeginString)return!0}return!1}}]),n}(),Z=function(){function t(){m(this,t),this.startTime=void 0}return a(t,[{key:"Start",value:function(){this.startTime=(new Date).getTime()}},{key:"Stop",value:function(){this.startTime=void 0}},{key:"ElapsedMilliseconds",get:function(){return void 0===this.startTime?0:(new Date).getTime()-this.startTime}}]),t}();Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&-9007199254740992<t&&t<9007199254740992&&Math.floor(t)===t}),o.Story=function(){s(f,T);var h=v(f);function f(){var t,e;m(this,f),(t=h.call(this)).inkVersionMinimumCompatible=18,t._prevContainers=[],t.allowExternalFunctionFallbacks=!1,t._listDefinitions=null,t._variableObservers=null,t._hasValidatedExternals=!1,t._temporaryEvaluationContainer=null,t._asyncContinueActive=!1,t._stateSnapshotAtLastNewline=null,t._recursiveContinueCount=0,t._asyncSaving=!1;var n,i=t._profiler=null,r=null;if(arguments[0]instanceof Et?(e=arguments[0],void 0!==arguments[1]&&(i=arguments[1]),t._mainContentContainer=e):r="string"==typeof arguments[0]?(n=arguments[0],$.TextToDictionary(n)):arguments[0],null!=i&&(t._listDefinitions=new J(i)),t._externals=new Map,null!==r){var a=r,s=a.inkVersion;if(null==s)throw new Error("ink version number not found. Are you sure it's a valid .ink.json file?");var o=parseInt(s);if(f.inkVersionCurrent<o)throw new Error("Version of ink used to build story was newer than the current version of the engine");if(o<t.inkVersionMinimumCompatible)throw new Error("Version of ink used to build story is too old to be loaded by this version of the engine");o!=f.inkVersionCurrent&&console.warn("WARNING: Version of ink used to build story doesn't match current version of engine. Non-critical, but recommend synchronising.");var u,l=a.root;if(null==l)throw new Error("Root node for ink not found. Are you sure it's a valid .ink.json file?");(u=a.listDefs)&&(t._listDefinitions=K.JTokenToListDefinitions(u)),t._mainContentContainer=mt(K.JTokenToRuntimeObject(l),Et),t.ResetState()}return t}return a(f,[{key:"StartProfiling",value:function(){}},{key:"EndProfiling",value:function(){}},{key:"ToJson",value:function(t){var e=this,n=!1;if(t||(n=!0,t=new $.Writer),t.WriteObjectStart(),t.WriteIntProperty("inkVersion",f.inkVersionCurrent),t.WriteProperty("root",function(t){return K.WriteRuntimeContainer(t,e._mainContentContainer)}),null!=this._listDefinitions){t.WritePropertyStart("listDefs"),t.WriteObjectStart();var i,r=pt(this._listDefinitions.lists);try{for(r.s();!(i=r.n()).done;){var a=i.value;t.WritePropertyStart(a.name),t.WriteObjectStart();var s,o=pt(a.items);try{for(o.s();!(s=o.n()).done;){var u=S(s.value,2),l=u[0],h=u[1],c=kt.fromSerializedKey(l);t.WriteIntProperty(c.itemName,h)}}catch(t){o.e(t)}finally{o.f()}t.WriteObjectEnd(),t.WritePropertyEnd()}}catch(t){r.e(t)}finally{r.f()}t.WriteObjectEnd(),t.WritePropertyEnd()}if(t.WriteObjectEnd(),n)return t.ToString()}},{key:"ResetState",value:function(){this.IfAsyncWeCant("ResetState"),this._state=new Q(this),this._state.variablesState.ObserveVariableChange(this.VariableStateDidChangeEvent.bind(this)),this.ResetGlobals()}},{key:"ResetErrors",value:function(){if(null===this._state)return gt("this._state");this._state.ResetErrors()}},{key:"ResetCallstack",value:function(){if(this.IfAsyncWeCant("ResetCallstack"),null===this._state)return gt("this._state");this._state.ForceEnd()}},{key:"ResetGlobals",value:function(){var t;this._mainContentContainer.namedContent.get("global decl")&&(t=this.state.currentPointer.copy(),this.ChoosePath(new E("global decl"),!1),this.ContinueInternal(),this.state.currentPointer=t),this.state.variablesState.SnapshotDefaultGlobals()}},{key:"Continue",value:function(){return this.ContinueAsync(0),this.currentText}},{key:"ContinueAsync",value:function(t){this._hasValidatedExternals||this.ValidateExternalBindings(),this.ContinueInternal(t)}},{key:"ContinueInternal",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;null!=this._profiler&&this._profiler.PreContinue();var n=0<e;if(this._recursiveContinueCount++,!this._asyncContinueActive){if(this._asyncContinueActive=n,!this.canContinue)throw new bt("Can't continue - should check canContinue before calling Continue");this._state.didSafeExit=!1,this._state.ResetOutput(),1==this._recursiveContinueCount&&(this._state.variablesState.batchObservingVariableChanges=!0)}var i=new Z;i.Start();var r=!1;do{try{r=this.ContinueSingleStep()}catch(t){if(!(t instanceof bt))throw t;this.AddError(t.message,void 0,t.useEndLineNumber);break}if(r)break;if(this._asyncContinueActive&&i.ElapsedMilliseconds>e)break}while(this.canContinue);i.Stop(),!r&&this.canContinue||(null!==this._stateSnapshotAtLastNewline&&this.RestoreStateSnapshot(),this.canContinue||(this.state.callStack.canPopThread&&this.AddError("Thread available to pop, threads should always be flat by the end of evaluation?"),0!=this.state.generatedChoices.length||this.state.didSafeExit||null!=this._temporaryEvaluationContainer||(this.state.callStack.CanPop(Nt.Tunnel)?this.AddError("unexpectedly reached end of content. Do you need a '->->' to return from a tunnel?"):this.state.callStack.CanPop(Nt.Function)?this.AddError("unexpectedly reached end of content. Do you need a '~ return'?"):this.state.callStack.canPop?this.AddError("unexpectedly reached end of content for unknown reason. Please debug compiler!"):this.AddError("ran out of content. Do you need a '-> DONE' or '-> END'?"))),this.state.didSafeExit=!1,1==this._recursiveContinueCount&&(this._state.variablesState.batchObservingVariableChanges=!1),this._asyncContinueActive=!1),this._recursiveContinueCount--,null!=this._profiler&&this._profiler.PostContinue()}},{key:"ContinueSingleStep",value:function(){if(null!=this._profiler&&this._profiler.PreStep(),this.Step(),null!=this._profiler&&this._profiler.PostStep(),this.canContinue||this.state.callStack.elementIsEvaluateFromGame||this.TryFollowDefaultInvisibleChoice(),null!=this._profiler&&this._profiler.PreSnapshot(),!this.state.inStringEvaluation){if(null!==this._stateSnapshotAtLastNewline){if(null===this._stateSnapshotAtLastNewline.currentTags)return gt("this._stateAtLastNewline.currentTags");if(null===this.state.currentTags)return gt("this.state.currentTags");var t=this.CalculateNewlineOutputStateChange(this._stateSnapshotAtLastNewline.currentText,this.state.currentText,this._stateSnapshotAtLastNewline.currentTags.length,this.state.currentTags.length);if(t==f.OutputStateChange.ExtendedBeyondNewline)return this.RestoreStateSnapshot(),!0;t==f.OutputStateChange.NewlineRemoved&&this.DiscardSnapshot()}this.state.outputStreamEndsInNewline&&(this.canContinue?null==this._stateSnapshotAtLastNewline&&this.StateSnapshot():this.DiscardSnapshot())}return null!=this._profiler&&this._profiler.PostSnapshot(),!1}},{key:"CalculateNewlineOutputStateChange",value:function(t,e,n,i){if(null===t)return gt("prevText");if(null===e)return gt("currText");var r=e.length>=t.length&&"\n"==e.charAt(t.length-1);if(n==i&&t.length==e.length&&r)return f.OutputStateChange.NoChange;if(!r)return f.OutputStateChange.NewlineRemoved;if(n<i)return f.OutputStateChange.ExtendedBeyondNewline;for(var a=t.length;a<e.length;a++){var s=e.charAt(a);if(" "!=s&&"\t"!=s)return f.OutputStateChange.ExtendedBeyondNewline}return f.OutputStateChange.NoChange}},{key:"ContinueMaximally",value:function(){this.IfAsyncWeCant("ContinueMaximally");for(var t=new St;this.canContinue;)t.Append(this.Continue());return t.toString()}},{key:"ContentAtPath",value:function(t){return this.mainContentContainer.ContentAtPath(t)}},{key:"KnotContainerWithName",value:function(t){var e=this.mainContentContainer.namedContent.get(t);return e instanceof Et?e:null}},{key:"PointerAtPath",value:function(t){if(0==t.length)return xt.Null;var e=new xt,n=t.length,i=null;return null===t.lastComponent?gt("path.lastComponent"):(t.lastComponent.isIndex?(n=t.length-1,i=this.mainContentContainer.ContentAtPath(t,void 0,n),e.container=i.container,e.index=t.lastComponent.index):(i=this.mainContentContainer.ContentAtPath(t),e.container=i.container,e.index=-1),null==i.obj||i.obj==this.mainContentContainer&&0<n?this.Error("Failed to find content at path '"+t+"', and no approximation of it was possible."):i.approximate&&this.Warning("Failed to find content at path '"+t+"', so it was approximated to: '"+i.obj.path+"'."),e)}},{key:"StateSnapshot",value:function(){this._stateSnapshotAtLastNewline=this._state,this._state=this._state.CopyAndStartPatching()}},{key:"RestoreStateSnapshot",value:function(){null===this._stateSnapshotAtLastNewline&&gt("_stateSnapshotAtLastNewline"),this._stateSnapshotAtLastNewline.RestoreAfterPatch(),this._state=this._stateSnapshotAtLastNewline,this._stateSnapshotAtLastNewline=null,this._asyncSaving||this._state.ApplyAnyPatch()}},{key:"DiscardSnapshot",value:function(){this._asyncSaving||this._state.ApplyAnyPatch(),this._stateSnapshotAtLastNewline=null}},{key:"CopyStateForBackgroundThreadSave",value:function(){if(this.IfAsyncWeCant("start saving on a background thread"),this._asyncSaving)throw new Error("Story is already in background saving mode, can't call CopyStateForBackgroundThreadSave again!");var t=this._state;return this._state=this._state.CopyAndStartPatching(),this._asyncSaving=!0,t}},{key:"BackgroundSaveComplete",value:function(){null===this._stateSnapshotAtLastNewline&&this._state.ApplyAnyPatch(),this._asyncSaving=!1}},{key:"Step",value:function(){var t=!0,e=this.state.currentPointer.copy();if(!e.isNull){for(var n=yt(e.Resolve(),Et);n&&(this.VisitContainer(n,!0),0!=n.content.length);)n=yt((e=xt.StartOf(n)).Resolve(),Et);this.state.currentPointer=e.copy(),null!=this._profiler&&this._profiler.Step(this.state.callStack);var i,r,a,s,o,u=e.Resolve(),l=this.PerformLogicAndFlowControl(u);this.state.currentPointer.isNull||(l&&(t=!1),(i=yt(u,G))&&((r=this.ProcessChoice(i))&&this.state.generatedChoices.push(r),u=null,t=!1),u instanceof Et&&(t=!1),t&&((a=yt(u,I))&&-1==a.contextIndex&&(s=this.state.callStack.ContextForVariableNamed(a.variableName),u=new I(a.variableName,s)),this.state.inExpressionEvaluation?this.state.PushEvaluationStack(u):this.state.PushToOutputStream(u)),this.NextContent(),(o=yt(u,At))&&o.commandType==At.CommandType.StartThread&&this.state.callStack.PushThread())}}},{key:"VisitContainer",value:function(t,e){t.countingAtStartOnly&&!e||(t.visitsShouldBeCounted&&this.state.IncrementVisitCountForContainer(t),t.turnIndexShouldBeCounted&&this.state.RecordTurnIndexVisitToContainer(t))}},{key:"VisitChangedContainersDueToDivert",value:function(){var t=this.state.previousPointer.copy(),e=this.state.currentPointer.copy();if(!e.isNull&&-1!=e.index){if(this._prevContainers.length=0,!t.isNull)for(var n=yt(t.Resolve(),Et)||yt(t.container,Et);n;)this._prevContainers.push(n),n=yt(n.parent,Et);var i=e.Resolve();if(null!=i)for(var r=yt(i.parent,Et);r&&(this._prevContainers.indexOf(r)<0||r.countingAtStartOnly);){var a=0<r.content.length&&i==r.content[0];this.VisitContainer(r,a),r=yt((i=r).parent,Et)}}}},{key:"ProcessChoice",value:function(t){var e,n=!0;t.hasCondition&&(e=this.state.PopEvaluationStack(),this.IsTruthy(e)||(n=!1));var i="",r="";if(t.hasChoiceOnlyContent&&(r=mt(this.state.PopEvaluationStack(),wt).value||""),t.hasStartContent&&(i=mt(this.state.PopEvaluationStack(),wt).value||""),t.onceOnly&&0<this.state.VisitCountForContainer(t.choiceTarget)&&(n=!1),!n)return null;var a=new M;return a.targetPath=t.pathOnChoice,a.sourcePath=t.path.toString(),a.isInvisibleDefault=t.isInvisibleDefault,a.threadAtGeneration=this.state.callStack.ForkThread(),a.text=(i+r).replace(/^[ \t]+|[ \t]+$/g,""),a}},{key:"IsTruthy",value:function(t){if(t instanceof _t){var e=t;return e instanceof Pt?(this.Error("Shouldn't use a divert target (to "+e.targetPath+") as a conditional value. Did you intend a function call 'likeThis()' or a read count check 'likeThis'? (no arrows)"),!1):e.isTruthy}return!1}},{key:"PerformLogicAndFlowControl",value:function(t){if(null==t)return!1;if(t instanceof It){var e=t;if(e.isConditional){var n=this.state.PopEvaluationStack();if(!this.IsTruthy(n))return!0}if(e.hasVariableTarget){var i,r,a=e.variableDivertName,s=this.state.variablesState.GetVariableWithName(a);null==s?this.Error("Tried to divert using a target from a variable that could not be found ("+a+")"):s instanceof Pt||(r="Tried to divert to a target from a variable, but the variable ("+a+") didn't contain a divert target, it ",(i=yt(s,Tt))instanceof Tt&&0==i.value?r+="was empty/null (the value 0).":r+="contained '"+s+"'.",this.Error(r));var o=mt(s,Pt);this.state.divertedPointer=this.PointerAtPath(o.targetPath)}else{if(e.isExternal)return this.CallExternalFunction(e.targetPathString,e.externalArgs),!0;this.state.divertedPointer=e.targetPointer.copy()}return e.pushesToStack&&this.state.callStack.Push(e.stackPushType,void 0,this.state.outputStream.length),this.state.divertedPointer.isNull&&!e.isExternal&&(e&&e.debugMetadata&&null!=e.debugMetadata.sourceName?this.Error("Divert target doesn't exist: "+e.debugMetadata.sourceName):this.Error("Divert resolution failed: "+e)),!0}if(t instanceof At){var u,l,h=t;switch(h.commandType){case At.CommandType.EvalStart:this.Assert(!1===this.state.inExpressionEvaluation,"Already in expression evaluation?"),this.state.inExpressionEvaluation=!0;break;case At.CommandType.EvalEnd:this.Assert(!0===this.state.inExpressionEvaluation,"Not in expression evaluation mode"),this.state.inExpressionEvaluation=!1;break;case At.CommandType.EvalOutput:0<this.state.evaluationStack.length&&((u=this.state.PopEvaluationStack())instanceof Vt||(l=new wt(u.toString()),this.state.PushToOutputStream(l)));break;case At.CommandType.NoOp:break;case At.CommandType.Duplicate:this.state.PushEvaluationStack(this.state.PeekEvaluationStack());break;case At.CommandType.PopEvaluatedValue:this.state.PopEvaluationStack();break;case At.CommandType.PopFunction:case At.CommandType.PopTunnel:var c,f,v,d,p=h.commandType==At.CommandType.PopFunction?Nt.Function:Nt.Tunnel,y=null;if(p!=Nt.Tunnel||null===(y=yt(c=this.state.PopEvaluationStack(),Pt))&&this.Assert(c instanceof Vt,"Expected void if ->-> doesn't override target"),this.state.TryExitFunctionEvaluationFromGame())break;this.state.callStack.currentElement.type==p&&this.state.callStack.canPop?(this.state.PopCallStack(),y&&(this.state.divertedPointer=this.PointerAtPath(y.targetPath))):((f=new Map).set(Nt.Function,"function return statement (~ return)"),f.set(Nt.Tunnel,"tunnel onwards statement (->->)"),v=f.get(this.state.callStack.currentElement.type),this.state.callStack.canPop||(v="end of flow (-> END or choice)"),d="Found "+f.get(p)+", when expected "+v,this.Error(d));break;case At.CommandType.BeginString:this.state.PushToOutputStream(h),this.Assert(!0===this.state.inExpressionEvaluation,"Expected to be in an expression when evaluating a string"),this.state.inExpressionEvaluation=!1;break;case At.CommandType.EndString:for(var m=[],g=0,S=this.state.outputStream.length-1;0<=S;--S){var k=this.state.outputStream[S];g++;var C=yt(k,At);if(C&&C.commandType==At.CommandType.BeginString)break;k instanceof wt&&m.push(k)}this.state.PopFromOutputStream(g),m=m.reverse();var b,_=new St,T=pt(m);try{for(T.s();!(b=T.n()).done;){var w=b.value;_.Append(w.toString())}}catch(t){T.e(t)}finally{T.f()}this.state.inExpressionEvaluation=!0,this.state.PushEvaluationStack(new wt(_.toString()));break;case At.CommandType.ChoiceCount:var P=this.state.generatedChoices.length;this.state.PushEvaluationStack(new Tt(P));break;case At.CommandType.Turns:this.state.PushEvaluationStack(new Tt(this.state.currentTurnIndex+1));break;case At.CommandType.TurnsSince:case At.CommandType.ReadCount:var O=this.state.PopEvaluationStack();if(!(O instanceof Pt)){var E=O instanceof Tt?". Did you accidentally pass a read count ('knot_name') instead of a target ('-> knot_name')?":"";this.Error("TURNS_SINCE / READ_COUNT expected a divert target (knot, stitch, label name), but saw "+O+E);break}var N,A=mt(O,Pt),x=yt(this.ContentAtPath(A.targetPath).correctObj,Et);null!=x?N=h.commandType==At.CommandType.TurnsSince?this.state.TurnsSinceForContainer(x):this.state.VisitCountForContainer(x):(N=h.commandType==At.CommandType.TurnsSince?-1:0,this.Warning("Failed to find container for "+h.toString()+" lookup at "+A.targetPath.toString())),this.state.PushEvaluationStack(new Tt(N));break;case At.CommandType.Random:var I=yt(this.state.PopEvaluationStack(),Tt),W=yt(this.state.PopEvaluationStack(),Tt);if(null==W||W instanceof Tt==!1)return this.Error("Invalid value for minimum parameter of RANDOM(min, max)");if(null==I||W instanceof Tt==!1)return this.Error("Invalid value for maximum parameter of RANDOM(min, max)");if(null===I.value)return gt("maxInt.value");if(null===W.value)return gt("minInt.value");var F=I.value-W.value+1;F<=0&&this.Error("RANDOM was called with minimum as "+W.value+" and maximum as "+I.value+". The maximum must be larger");var V=this.state.storySeed+this.state.previousRandom,R=new Lt(V).next(),L=R%F+W.value;this.state.PushEvaluationStack(new Tt(L)),this.state.previousRandom=R;break;case At.CommandType.SeedRandom:var j=yt(this.state.PopEvaluationStack(),Tt);if(null==j||j instanceof Tt==!1)return this.Error("Invalid value passed to SEED_RANDOM");if(null===j.value)return gt("minInt.value");this.state.storySeed=j.value,this.state.previousRandom=0,this.state.PushEvaluationStack(new Vt);break;case At.CommandType.VisitIndex:var D=this.state.VisitCountForContainer(this.state.currentPointer.container)-1;this.state.PushEvaluationStack(new Tt(D));break;case At.CommandType.SequenceShuffleIndex:var G=this.NextSequenceShuffleIndex();this.state.PushEvaluationStack(new Tt(G));break;case At.CommandType.StartThread:break;case At.CommandType.Done:this.state.callStack.canPopThread?this.state.callStack.PopThread():(this.state.didSafeExit=!0,this.state.currentPointer=xt.Null);break;case At.CommandType.End:this.state.ForceEnd();break;case At.CommandType.ListFromInt:var B=yt(this.state.PopEvaluationStack(),Tt),M=mt(this.state.PopEvaluationStack(),wt);if(null===B)throw new bt("Passed non-integer when creating a list element from a numerical value.");var q=null;if(null===this.listDefinitions)return gt("this.listDefinitions");var J=this.listDefinitions.TryListGetDefinition(M.value,null);if(!J.exists)throw new bt("Failed to find LIST called "+M.value);if(null===B.value)return gt("minInt.value");var K=J.result.TryGetItemWithValue(B.value,kt.Null);K.exists&&(q=new Ot(K.result,B.value)),null==q&&(q=new Ot),this.state.PushEvaluationStack(q);break;case At.CommandType.ListRange:var U=yt(this.state.PopEvaluationStack(),_t),z=yt(this.state.PopEvaluationStack(),_t),H=yt(this.state.PopEvaluationStack(),Ot);if(null===H||null===z||null===U)throw new bt("Expected list, minimum and maximum for LIST_RANGE");if(null===H.value)return gt("targetList.value");var $=H.value.ListWithSubRange(z.valueObject,U.valueObject);this.state.PushEvaluationStack(new Ot($));break;case At.CommandType.ListRandom:var X=this.state.PopEvaluationStack();if(null===X)throw new bt("Expected list for LIST_RANDOM");var Y=X.value,Q=null;if(null===Y)throw gt("list");if(0==Y.Count)Q=new Ct;else{for(var Z=this.state.storySeed+this.state.previousRandom,tt=new Lt(Z).next(),et=tt%Y.Count,nt=Y.entries(),it=0;it<=et-1;it++)nt.next();var rt=nt.next().value,at={Key:kt.fromSerializedKey(rt[0]),Value:rt[1]};if(null===at.Key.originName)return gt("randomItem.Key.originName");(Q=new Ct(at.Key.originName,this)).Add(at.Key,at.Value),this.state.previousRandom=tt}this.state.PushEvaluationStack(new Ot(Q));break;default:this.Error("unhandled ControlCommand: "+h)}return!0}if(t instanceof Ft){var st=t,ot=this.state.PopEvaluationStack();return this.state.variablesState.Assign(st,ot),!0}if(t instanceof Wt){var ut,lt,ht=t,ct=null;return null!=ht.pathForCount?(ut=ht.containerForCount,lt=this.state.VisitCountForContainer(ut),ct=new Tt(lt)):null==(ct=this.state.variablesState.GetVariableWithName(ht.name))&&(this.Warning("Variable not found: '"+ht.name+"'. Using default value of 0 (false). This can happen with temporary variables if the declaration hasn't yet been hit. Globals are always given a default value on load if a value doesn't exist in the save state."),ct=new Tt(0)),this.state.PushEvaluationStack(ct),!0}if(t instanceof Rt){var ft=t,vt=this.state.PopEvaluationStack(ft.numberOfParameters),dt=ft.Call(vt);return this.state.PushEvaluationStack(dt),!0}return!1}},{key:"ChoosePathString",value:function(t,e,n){var i=!(1<arguments.length&&void 0!==e)||e,r=2<arguments.length&&void 0!==n?n:[];if(this.IfAsyncWeCant("call ChoosePathString right now"),i)this.ResetCallstack();else if(this.state.callStack.currentElement.type==Nt.Function){var a="",s=this.state.callStack.currentElement.currentPointer.container;throw null!=s&&(a="("+s.path.toString()+") "),new Error("Story was running a function "+a+"when you called ChoosePathString("+t+") - this is almost certainly not not what you want! Full stack trace: \n"+this.state.callStack.callStackTrace)}this.state.PassArgumentsToEvaluationStack(r),this.ChoosePath(new E(t))}},{key:"IfAsyncWeCant",value:function(t){if(this._asyncContinueActive)throw new Error("Can't "+t+". Story is in the middle of a ContinueAsync(). Make more ContinueAsync() calls or a single Continue() call beforehand.")}},{key:"ChoosePath",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e;this.state.SetChosenPath(t,n),this.VisitChangedContainersDueToDivert()}},{key:"ChooseChoiceIndex",value:function(t){t=t;var e=this.currentChoices;this.Assert(0<=t&&t<e.length,"choice out of range");var n=e[t];return null===n.threadAtGeneration?gt("choiceToChoose.threadAtGeneration"):null===n.targetPath?gt("choiceToChoose.targetPath"):(this.state.callStack.currentThread=n.threadAtGeneration,void this.ChoosePath(n.targetPath))}},{key:"HasFunction",value:function(t){try{return null!=this.KnotContainerWithName(t)}catch(t){return!1}}},{key:"EvaluateFunction",value:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:[],r=2<arguments.length&&void 0!==n&&n;if(this.IfAsyncWeCant("evaluate a function"),null==t)throw new Error("Function is null");if(""==t||""==t.trim())throw new Error("Function is empty or white space.");var a=this.KnotContainerWithName(t);if(null==a)throw new Error("Function doesn't exist: '"+t+"'");var s=[];s.push.apply(s,this.state.outputStream),this._state.ResetOutput(),this.state.StartFunctionEvaluationFromGame(a,i);for(var o=new St;this.canContinue;)o.Append(this.Continue());var u=o.toString();this._state.ResetOutput(s);var l=this.state.CompleteFunctionEvaluationFromGame();return r?{returned:l,output:u}:l}},{key:"EvaluateExpression",value:function(t){var e=this.state.callStack.elements.length;this.state.callStack.Push(Nt.Tunnel),this._temporaryEvaluationContainer=t,this.state.GoToStart();var n=this.state.evaluationStack.length;return this.Continue(),this._temporaryEvaluationContainer=null,this.state.callStack.elements.length>e&&this.state.PopCallStack(),n<this.state.evaluationStack.length?this.state.PopEvaluationStack():null}},{key:"CallExternalFunction",value:function(t,e){if(null===t)return gt("funcName");var n=this._externals.get(t),i=null;if(!(void 0!==n)){if(this.allowExternalFunctionFallbacks)return i=this.KnotContainerWithName(t),this.Assert(null!==i,"Trying to call EXTERNAL function '"+t+"' which has not been bound, and fallback ink function could not be found."),this.state.callStack.Push(Nt.Function,void 0,this.state.outputStream.length),void(this.state.divertedPointer=xt.StartOf(i));this.Assert(!1,"Trying to call EXTERNAL function '"+t+"' which has not been bound (and ink fallbacks disabled).")}for(var r=[],a=0;a<e;++a){var s=mt(this.state.PopEvaluationStack(),_t).valueObject;r.push(s)}r.reverse();var o=n(r),u=null;null!=o?(u=_t.Create(o),this.Assert(null!==u,"Could not create ink value from returned object of type "+O(o))):u=new Vt,this.state.PushEvaluationStack(u)}},{key:"BindExternalFunctionGeneral",value:function(t,e){this.IfAsyncWeCant("bind an external function"),this.Assert(!this._externals.has(t),"Function '"+t+"' has already been bound."),this._externals.set(t,e)}},{key:"TryCoerce",value:function(t){return t}},{key:"BindExternalFunction",value:function(t,r){var a=this;this.Assert(null!=r,"Can't bind a null function"),this.BindExternalFunctionGeneral(t,function(t){a.Assert(t.length>=r.length,"External function expected "+r.length+" arguments");for(var e=[],n=0,i=t.length;n<i;n++)e[n]=a.TryCoerce(t[n]);return r.apply(null,e)})}},{key:"UnbindExternalFunction",value:function(t){this.IfAsyncWeCant("unbind an external a function"),this.Assert(this._externals.has(t),"Function '"+t+"' has not been bound."),this._externals.delete(t)}},{key:"ValidateExternalBindings",value:function(t,e){var n,i=null,r=null,a=e||new Set;if(t instanceof Et&&(i=t),t instanceof T&&(r=t),null===i&&null===r)this.ValidateExternalBindings(this._mainContentContainer,a),this._hasValidatedExternals=!0,0==a.size?this._hasValidatedExternals=!0:(n="Error: Missing function binding for external",n+=1<a.size?"s":"",n+=": '",n+=Array.from(a).join("', '"),n+="' ",n+=this.allowExternalFunctionFallbacks?", and no fallback ink function found.":" (ink fallbacks disabled)",this.Error(n));else if(null!=i){var s,o=pt(i.content);try{for(o.s();!(s=o.n()).done;){var u=s.value;null!=u&&u.hasValidName||this.ValidateExternalBindings(u,a)}}catch(t){o.e(t)}finally{o.f()}var l,h=pt(i.namedContent);try{for(h.s();!(l=h.n()).done;){var c=S(l.value,2)[1];this.ValidateExternalBindings(yt(c,T),a)}}catch(t){h.e(t)}finally{h.f()}}else if(null!=r){var f=yt(r,It);if(f&&f.isExternal){var v=f.targetPathString;if(null===v)return gt("name");this._externals.has(v)||this.allowExternalFunctionFallbacks&&this.mainContentContainer.namedContent.has(v)||a.add(v)}}}},{key:"ObserveVariable",value:function(t,e){if(this.IfAsyncWeCant("observe a new variable"),null===this._variableObservers&&(this._variableObservers=new Map),!this.state.variablesState.GlobalVariableExistsWithName(t))throw new bt("Cannot observe variable '"+t+"' because it wasn't declared in the ink story.");this._variableObservers.has(t)?this._variableObservers.get(t).push(e):this._variableObservers.set(t,[e])}},{key:"ObserveVariables",value:function(t,e){for(var n=0,i=t.length;n<i;n++)this.ObserveVariable(t[n],e[n])}},{key:"RemoveVariableObserver",value:function(t,e){var n;if(this.IfAsyncWeCant("remove a variable observer"),null!==this._variableObservers)if(void 0!==e)this._variableObservers.has(e)&&(n=this._variableObservers.get(e),null!==t?n.splice(n.indexOf(t),1):this._variableObservers.delete(e));else if(null!==t){var i,r=pt(this._variableObservers.keys());try{for(r.s();!(i=r.n()).done;){var a=i.value,s=this._variableObservers.get(a);s.splice(s.indexOf(t),1)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"VariableStateDidChangeEvent",value:function(t,e){if(null!==this._variableObservers){var n=this._variableObservers.get(t);if(void 0!==n){if(!(e instanceof _t))throw new Error("Tried to get the value of a variable that isn't a standard type");var i,r=mt(e,_t),a=pt(n);try{for(a.s();!(i=a.n()).done;){(0,i.value)(t,r.valueObject)}}catch(t){a.e(t)}finally{a.f()}}}}},{key:"TagsForContentAtPath",value:function(t){return this.TagsAtStartOfFlowContainerWithPathString(t)}},{key:"TagsAtStartOfFlowContainerWithPathString",value:function(t){var e=new E(t),n=this.ContentAtPath(e).container;if(null===n)return gt("flowContainer");for(;;){var i=n.content[0];if(!(i instanceof Et))break;n=i}var r,a=null,s=pt(n.content);try{for(s.s();!(r=s.n()).done;){var o=yt(r.value,B);if(!o)break;null==a&&(a=[]),a.push(o.text)}}catch(t){s.e(t)}finally{s.f()}return a}},{key:"BuildStringOfHierarchy",value:function(){var t=new St;return this.mainContentContainer.BuildStringOfHierarchy(t,0,this.state.currentPointer.Resolve()),t.toString()}},{key:"BuildStringOfContainer",value:function(t){var e=new St;return t.BuildStringOfHierarchy(e,0,this.state.currentPointer.Resolve()),e.toString()}},{key:"NextContent",value:function(){var t;this.state.previousPointer=this.state.currentPointer.copy(),(this.state.divertedPointer.isNull||(this.state.currentPointer=this.state.divertedPointer.copy(),this.state.divertedPointer=xt.Null,this.VisitChangedContainersDueToDivert(),this.state.currentPointer.isNull))&&(this.IncrementContentPointer()||(t=!1,this.state.callStack.CanPop(Nt.Function)?(this.state.PopCallStack(Nt.Function),this.state.inExpressionEvaluation&&this.state.PushEvaluationStack(new Vt),t=!0):this.state.callStack.canPopThread?(this.state.callStack.PopThread(),t=!0):this.state.TryExitFunctionEvaluationFromGame(),t&&!this.state.currentPointer.isNull&&this.NextContent()))}},{key:"IncrementContentPointer",value:function(){var t=!0,e=this.state.callStack.currentElement.currentPointer.copy();if(e.index++,null===e.container)return gt("pointer.container");for(;e.index>=e.container.content.length;){t=!1;var n=yt(e.container.parent,Et);if(n instanceof Et==!1)break;var i=n.content.indexOf(e.container);if(-1==i)break;if((e=new xt(n,i)).index++,t=!0,null===e.container)return gt("pointer.container")}return t||(e=xt.Null),this.state.callStack.currentElement.currentPointer=e.copy(),t}},{key:"TryFollowDefaultInvisibleChoice",value:function(){var t=this._state.currentChoices,e=t.filter(function(t){return t.isInvisibleDefault});if(0==e.length||t.length>e.length)return!1;var n=e[0];return null===n.targetPath?gt("choice.targetPath"):null===n.threadAtGeneration?gt("choice.threadAtGeneration"):(this.state.callStack.currentThread=n.threadAtGeneration,this.ChoosePath(n.targetPath,!1),!0)}},{key:"NextSequenceShuffleIndex",value:function(){var t=yt(this.state.PopEvaluationStack(),Tt);if(!(t instanceof Tt))return this.Error("expected number of elements in sequence for shuffle index"),0;var e=this.state.currentPointer.container;if(null===e)return gt("seqContainer");if(null===t.value)return gt("numElementsIntVal.value");var n=t.value,i=mt(this.state.PopEvaluationStack(),Tt).value;if(null===i)return gt("seqCount");for(var r=i/n,a=i%n,s=e.path.toString(),o=0,u=0,l=s.length;u<l;u++)o+=s.charCodeAt(u)||0;for(var h=o+r+this.state.storySeed,c=new Lt(Math.floor(h)),f=[],v=0;v<n;++v)f.push(v);for(var d=0;d<=a;++d){var p=c.next()%f.length,y=f[p];if(f.splice(p,1),d==a)return y}throw new Error("Should never reach here")}},{key:"Error",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=new bt(t);throw i.useEndLineNumber=n,i}},{key:"Warning",value:function(t){this.AddError(t,!0)}},{key:"AddError",value:function(t,e,n){var i,r=1<arguments.length&&void 0!==e&&e,a=2<arguments.length&&void 0!==n&&n,s=this.currentDebugMetadata,o=r?"WARNING":"ERROR";t=null!=s?(i=a?s.endLineNumber:s.startLineNumber,"RUNTIME "+o+": '"+s.fileName+"' line "+i+": "+t):this.state.currentPointer.isNull?"RUNTIME "+o+": "+t:"RUNTIME "+o+": ("+this.state.currentPointer+"): "+t,this.state.AddError(t,r),r||this.state.ForceEnd()}},{key:"Assert",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:null;if(0==t)throw null==n&&(n="Story assert"),new Error(n+" "+this.currentDebugMetadata)}},{key:"currentChoices",get:function(){var t=[];if(null===this._state)return gt("this._state");var e,n=pt(this._state.currentChoices);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.isInvisibleDefault||(i.index=t.length,t.push(i))}}catch(t){n.e(t)}finally{n.f()}return t}},{key:"currentText",get:function(){return this.IfAsyncWeCant("call currentText since it's a work in progress"),this.state.currentText}},{key:"currentTags",get:function(){return this.IfAsyncWeCant("call currentTags since it's a work in progress"),this.state.currentTags}},{key:"currentErrors",get:function(){return this.state.currentErrors}},{key:"currentWarnings",get:function(){return this.state.currentWarnings}},{key:"hasError",get:function(){return this.state.hasError}},{key:"hasWarning",get:function(){return this.state.hasWarning}},{key:"variablesState",get:function(){return this.state.variablesState}},{key:"listDefinitions",get:function(){return this._listDefinitions}},{key:"state",get:function(){return this._state}},{key:"canContinue",get:function(){return this.state.canContinue}},{key:"asyncContinueComplete",get:function(){return!this._asyncContinueActive}},{key:"globalTags",get:function(){return this.TagsAtStartOfFlowContainerWithPathString("")}},{key:"currentDebugMetadata",get:function(){var t=this.state.currentPointer;if(!t.isNull&&null!==t.Resolve()&&null!==(n=t.Resolve().debugMetadata))return n;for(var e=this.state.callStack.elements.length-1;0<=e;--e)if(!(t=this.state.callStack.elements[e].currentPointer).isNull&&null!==t.Resolve()&&null!==(n=t.Resolve().debugMetadata))return n;for(var n,i=this.state.outputStream.length-1;0<=i;--i){if(null!==(n=this.state.outputStream[i].debugMetadata))return n}return null}},{key:"mainContentContainer",get:function(){return this._temporaryEvaluationContainer?this._temporaryEvaluationContainer:this._mainContentContainer}}]),f}(),o.Story.inkVersionCurrent=19,X=o.Story||(o.Story={}),(Y=X.OutputStateChange||(X.OutputStateChange={}))[Y.NoChange=0]="NoChange",Y[Y.ExtendedBeyondNewline=1]="ExtendedBeyondNewline",Y[Y.NewlineRemoved=2]="NewlineRemoved",o.InkList=Ct,Object.defineProperty(o,"__esModule",{value:!0})});
//# sourceMappingURL=ink.js.map


/***/ }),

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Home; });
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ "./node_modules/react/jsx-dev-runtime.js");
/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/head */ "./node_modules/next/dist/next-server/lib/head.js");
/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var inkjs_dist_ink__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! inkjs/dist/ink */ "./node_modules/inkjs/dist/ink.js");
/* harmony import */ var inkjs_dist_ink__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(inkjs_dist_ink__WEBPACK_IMPORTED_MODULE_3__);


var _jsxFileName = "C:\\Users\\mael\\Documents\\Cours\\mini-projet-2\\app\\pages\\index.js",
    _s = $RefreshSig$();




function Home() {
  _s();

  Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function () {
    console.log(inkjs_dist_ink__WEBPACK_IMPORTED_MODULE_3___default.a);
    /* fetch("story.json")
        .then(function (response) {
            console.log(response);
            return response.text();
        })
        .then(function (storyContent) {
            console.log(storyContent);
            story = new inkjs.Story(storyContent);
            continueStory();
        }); */
  });
  return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__["jsxDEV"])("div", {
    children: [/*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__["jsxDEV"])(next_head__WEBPACK_IMPORTED_MODULE_1___default.a, {
      children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__["jsxDEV"])("title", {
        children: "Dating Sim"
      }, void 0, false, {
        fileName: _jsxFileName,
        lineNumber: 25,
        columnNumber: 17
      }, this)
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 24,
      columnNumber: 13
    }, this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__["jsxDEV"])("main", {
      children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__["jsxDEV"])("h1", {
        children: "Dating Sim"
      }, void 0, false, {
        fileName: _jsxFileName,
        lineNumber: 29,
        columnNumber: 17
      }, this)
    }, void 0, false, {
      fileName: _jsxFileName,
      lineNumber: 28,
      columnNumber: 13
    }, this)]
  }, void 0, true, {
    fileName: _jsxFileName,
    lineNumber: 23,
    columnNumber: 9
  }, this);
}

_s(Home, "OD7bBpZva5O2jO+Puf00hKivP7c=");

_c = Home;

var _c;

$RefreshReg$(_c, "Home");

;
    var _a, _b;
    // Legacy CSS implementations will `eval` browser code in a Node.js context
    // to extract CSS. For backwards compatibility, we need to check we're in a
    // browser context before continuing.
    if (typeof self !== 'undefined' &&
        // AMP / No-JS mode does not inject these helpers:
        '$RefreshHelpers$' in self) {
        var currentExports = module.__proto__.exports;
        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;
        // This cannot happen in MainTemplate because the exports mismatch between
        // templating and execution.
        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.i);
        // A module can be accepted automatically based on its exports, e.g. when
        // it is a Refresh Boundary.
        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {
            // Save the previous exports on update so we can compare the boundary
            // signatures.
            module.hot.dispose(function (data) {
                data.prevExports = currentExports;
            });
            // Unconditionally accept an update to this module, we'll check if it's
            // still a Refresh Boundary later.
            module.hot.accept();
            // This field is set when the previous version of this module was a
            // Refresh Boundary, letting us know we need to check for invalidation or
            // enqueue an update.
            if (prevExports !== null) {
                // A boundary can become ineligible if its exports are incompatible
                // with the previous exports.
                //
                // For example, if you add/remove/change exports, we'll want to
                // re-execute the importing modules, and force those components to
                // re-render. Similarly, if you convert a class component to a
                // function, we want to invalidate the boundary.
                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {
                    module.hot.invalidate();
                }
                else {
                    self.$RefreshHelpers$.scheduleUpdate();
                }
            }
        }
        else {
            // Since we just executed the code for the module, it's possible that the
            // new exports made it ineligible for being a boundary.
            // We only care about the case when we were _previously_ a boundary,
            // because we already accepted this update (accidental side effect).
            var isNoLongerABoundary = prevExports !== null;
            if (isNoLongerABoundary) {
                module.hot.invalidate();
            }
        }
    }

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/webpack/buildin/harmony-module.js */ "./node_modules/webpack/buildin/harmony-module.js")(module)))

/***/ })

})
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2lua2pzL2Rpc3QvaW5rLmpzIiwid2VicGFjazovL19OX0UvLi9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJIb21lIiwidXNlRWZmZWN0IiwiY29uc29sZSIsImxvZyIsImlua2pzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxlQUFlLEtBQW9ELFlBQVksU0FBbUYsQ0FBQyxrQkFBa0IsYUFBYSxjQUFjLGlGQUFpRixnQkFBZ0IsYUFBYSxvR0FBb0csS0FBSyxnQkFBZ0IsOEVBQThFLGdCQUFnQixZQUFZLFdBQVcsS0FBSyxXQUFXLCtHQUErRyxrQkFBa0IsdUNBQXVDLGdCQUFnQiw0R0FBNEcsMENBQTBDLGFBQWEscUNBQXFDLFlBQVksY0FBYyxpRUFBaUUsNkNBQTZDLEtBQUssZ0JBQWdCLDhDQUE4Qyx1QkFBdUIsT0FBTyxhQUFhLDREQUE0RCxtQ0FBbUMscUNBQXFDLElBQUksMEVBQTBFLE1BQU0sU0FBUyxVQUFVLGtCQUFrQiwrQ0FBK0MsYUFBYSxrQkFBa0Isb0NBQW9DLDZCQUE2Qix3QkFBd0IsY0FBYyw0Q0FBNEMscUJBQXFCLG9GQUFvRixNQUFNLGtHQUFrRyxlQUFlLDRCQUE0QixXQUFXLGFBQWEsMENBQTBDLDhDQUE4QyxhQUFhLG1EQUFtRCxTQUFTLEtBQUssZ0JBQWdCLCtEQUErRCxvR0FBb0csU0FBUyxNQUFNLGNBQWMsVUFBVSxrQkFBa0IsYUFBYSxtR0FBbUcsZ0JBQWdCLG1CQUFtQiw2QkFBNkIsbUJBQW1CLHNFQUFzRSw0QkFBNEIsSUFBSSxpQ0FBaUMsMkRBQTJELE9BQU8sU0FBUyxTQUFTLFFBQVEsSUFBSSw4QkFBOEIsUUFBUSxjQUFjLFNBQVMsMEJBQTBCLGlLQUFpSyxHQUFHLGdCQUFnQixNQUFNLG9DQUFvQyxvREFBb0QsZ0xBQWdMLGdCQUFnQixvQ0FBb0MsMkJBQTJCLElBQUksY0FBYyxTQUFTLGlCQUFpQixNQUFNLHlEQUF5RCxnRUFBZ0UsU0FBUyx1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aUNBQWlDLG9HQUFvRyxFQUFFLGlDQUFpQyxvR0FBb0csRUFBRSxtQ0FBbUMsaUNBQWlDLEVBQUUscUNBQXFDLG1DQUFtQyxFQUFFLDhCQUE4Qiw0QkFBNEIsRUFBRSxnQ0FBZ0MsOEJBQThCLEVBQUUsb0NBQW9DLGtDQUFrQyxFQUFFLHFDQUFxQyw4QkFBOEIsRUFBRSwyQkFBMkIsb0JBQW9CLEVBQUUsaUNBQWlDLCtCQUErQixFQUFFLDJDQUEyQyxrQ0FBa0MsRUFBRSxnQ0FBZ0MsMERBQTBELEVBQUUsMENBQTBDLGdDQUFnQyxnRkFBZ0YsaURBQWlELEtBQUssc0lBQXNJLDZDQUE2QyxLQUFLLEtBQUssZ0VBQWdFLGFBQWEsRUFBRSwwQ0FBMEMseUdBQXlHLEtBQUssc0RBQXNELGlEQUFpRCwyS0FBMkssU0FBUyxFQUFFO0FBQzFsckk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNEQTtBQUNBO0FBRUE7QUFFZSxTQUFTQSxJQUFULEdBQWdCO0FBQUE7O0FBRTNCQyx5REFBUyxDQUFDLFlBQU07QUFDWkMsV0FBTyxDQUFDQyxHQUFSLENBQVlDLHFEQUFaO0FBQ0E7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSyxHQVpRLENBQVQ7QUFjQSxzQkFDSTtBQUFBLDRCQUNJLHFFQUFDLGdEQUFEO0FBQUEsNkJBQ0k7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFESjtBQUFBO0FBQUE7QUFBQTtBQUFBLFlBREosZUFLSTtBQUFBLDZCQUNJO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREo7QUFBQTtBQUFBO0FBQUE7QUFBQSxZQUxKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQURKO0FBYUg7O0dBN0J1QkosSTs7S0FBQUEsSSIsImZpbGUiOiJzdGF0aWMvd2VicGFjay9wYWdlcy9pbmRleC5jZjhiNWRkMjg2MWQ4ZjAxNGI2My5ob3QtdXBkYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/ZShleHBvcnRzKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0sZSk6ZSgodD10fHxzZWxmKS5pbmtqcz17fSl9KHRoaXMsZnVuY3Rpb24obyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gTyh0KXtyZXR1cm4oTz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSkodCl9ZnVuY3Rpb24gbSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaSh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19ZnVuY3Rpb24gYSh0LGUsbil7cmV0dXJuIGUmJmkodC5wcm90b3R5cGUsZSksbiYmaSh0LG4pLHR9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmdSh0LGUpfWZ1bmN0aW9uIHIodCl7cmV0dXJuKHI9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0pKHQpfWZ1bmN0aW9uIHUodCxlKXtyZXR1cm4odT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuX19wcm90b19fPWUsdH0pKHQsZSl9ZnVuY3Rpb24gbCgpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSxbXSxmdW5jdGlvbigpe30pKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19ZnVuY3Rpb24gaCh0LGUsbil7cmV0dXJuKGg9bCgpP1JlZmxlY3QuY29uc3RydWN0OmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1bbnVsbF07aS5wdXNoLmFwcGx5KGksZSk7dmFyIHI9bmV3KEZ1bmN0aW9uLmJpbmQuYXBwbHkodCxpKSk7cmV0dXJuIG4mJnUocixuLnByb3RvdHlwZSkscn0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBjKHQpe3ZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIE1hcD9uZXcgTWFwOnZvaWQgMDtyZXR1cm4oYz1mdW5jdGlvbih0KXtpZihudWxsPT09dHx8KGU9dCwtMT09PUZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwoZSkuaW5kZXhPZihcIltuYXRpdmUgY29kZV1cIikpKXJldHVybiB0O3ZhciBlO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2lmKHZvaWQgMCE9PWkpe2lmKGkuaGFzKHQpKXJldHVybiBpLmdldCh0KTtpLnNldCh0LG4pfWZ1bmN0aW9uIG4oKXtyZXR1cm4gaCh0LGFyZ3VtZW50cyxyKHRoaXMpLmNvbnN0cnVjdG9yKX1yZXR1cm4gbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOm4sZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdShuLHQpfSkodCl9ZnVuY3Rpb24gZih0LGUpe3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT9mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gdH0odCk6ZX1mdW5jdGlvbiB2KG4pe3ZhciBpPWwoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdCxlPXIobik7cmV0dXJuIGYodGhpcyxpPyh0PXIodGhpcykuY29uc3RydWN0b3IsUmVmbGVjdC5jb25zdHJ1Y3QoZSxhcmd1bWVudHMsdCkpOmUuYXBwbHkodGhpcyxhcmd1bWVudHMpKX19ZnVuY3Rpb24gUyh0LGUpe3JldHVybiBmdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0fSh0KXx8ZnVuY3Rpb24odCxlKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHwhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QodCkpKXJldHVybjt2YXIgbj1bXSxpPSEwLHI9ITEsYT12b2lkIDA7dHJ5e2Zvcih2YXIgcyxvPXRbU3ltYm9sLml0ZXJhdG9yXSgpOyEoaT0ocz1vLm5leHQoKSkuZG9uZSkmJihuLnB1c2gocy52YWx1ZSksIWV8fG4ubGVuZ3RoIT09ZSk7aT0hMCk7fWNhdGNoKHQpe3I9ITAsYT10fWZpbmFsbHl7dHJ5e2l8fG51bGw9PW8ucmV0dXJufHxvLnJldHVybigpfWZpbmFsbHl7aWYocil0aHJvdyBhfX1yZXR1cm4gbn0odCxlKXx8ZCh0LGUpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gZCh0LGUpe2lmKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiBwKHQsZSk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVyblwiT2JqZWN0XCI9PT1uJiZ0LmNvbnN0cnVjdG9yJiYobj10LmNvbnN0cnVjdG9yLm5hbWUpLFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bj9BcnJheS5mcm9tKHQpOlwiQXJndW1lbnRzXCI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT9wKHQsZSk6dm9pZCAwfX1mdW5jdGlvbiBwKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBuPTAsaT1uZXcgQXJyYXkoZSk7bjxlO24rKylpW25dPXRbbl07cmV0dXJuIGl9ZnVuY3Rpb24gcHQodCxlKXt2YXIgbjtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHxudWxsPT10W1N5bWJvbC5pdGVyYXRvcl0pe2lmKEFycmF5LmlzQXJyYXkodCl8fChuPWQodCkpfHxlJiZ0JiZcIm51bWJlclwiPT10eXBlb2YgdC5sZW5ndGgpe24mJih0PW4pO3ZhciBpPTAscj1mdW5jdGlvbigpe307cmV0dXJue3M6cixuOmZ1bmN0aW9uKCl7cmV0dXJuIGk+PXQubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTp0W2krK119fSxlOmZ1bmN0aW9uKHQpe3Rocm93IHR9LGY6cn19dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfXZhciBhLHM9ITAsbz0hMTtyZXR1cm57czpmdW5jdGlvbigpe249dFtTeW1ib2wuaXRlcmF0b3JdKCl9LG46ZnVuY3Rpb24oKXt2YXIgdD1uLm5leHQoKTtyZXR1cm4gcz10LmRvbmUsdH0sZTpmdW5jdGlvbih0KXtvPSEwLGE9dH0sZjpmdW5jdGlvbigpe3RyeXtzfHxudWxsPT1uLnJldHVybnx8bi5yZXR1cm4oKX1maW5hbGx5e2lmKG8pdGhyb3cgYX19fX12YXIgdCxlLGssbixFPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcygpe3ZhciB0LGUsbixpLHI7bSh0aGlzLHMpLHRoaXMuX2NvbXBvbmVudHM9W10sdGhpcy5fY29tcG9uZW50c1N0cmluZz1udWxsLHRoaXMuX2lzUmVsYXRpdmU9ITEsXCJzdHJpbmdcIj09dHlwZW9mIGFyZ3VtZW50c1swXT8odD1hcmd1bWVudHNbMF0sdGhpcy5jb21wb25lbnRzU3RyaW5nPXQpOmFyZ3VtZW50c1swXWluc3RhbmNlb2Ygcy5Db21wb25lbnQmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2Ygcz8oZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0sdGhpcy5fY29tcG9uZW50cy5wdXNoKGUpLHRoaXMuX2NvbXBvbmVudHM9dGhpcy5fY29tcG9uZW50cy5jb25jYXQobi5fY29tcG9uZW50cykpOmFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkmJihpPWFyZ3VtZW50c1swXSxyPSEhYXJndW1lbnRzWzFdLHRoaXMuX2NvbXBvbmVudHM9dGhpcy5fY29tcG9uZW50cy5jb25jYXQoaSksdGhpcy5faXNSZWxhdGl2ZT1yKX1yZXR1cm4gYShzLFt7a2V5OlwiR2V0Q29tcG9uZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHNbdF19fSx7a2V5OlwiUGF0aEJ5QXBwZW5kaW5nUGF0aFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgcyxuPTAsaT0wO2k8dC5fY29tcG9uZW50cy5sZW5ndGgmJnQuX2NvbXBvbmVudHNbaV0uaXNQYXJlbnQ7KytpKW4rKztmb3IodmFyIHI9MDtyPHRoaXMuX2NvbXBvbmVudHMubGVuZ3RoLW47KytyKWUuX2NvbXBvbmVudHMucHVzaCh0aGlzLl9jb21wb25lbnRzW3JdKTtmb3IodmFyIGE9bjthPHQuX2NvbXBvbmVudHMubGVuZ3RoOysrYSllLl9jb21wb25lbnRzLnB1c2godC5fY29tcG9uZW50c1thXSk7cmV0dXJuIGV9fSx7a2V5OlwidG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXBvbmVudHNTdHJpbmd9fSx7a2V5OlwiRXF1YWxzXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYobnVsbD09dClyZXR1cm4hMTtpZih0Ll9jb21wb25lbnRzLmxlbmd0aCE9dGhpcy5fY29tcG9uZW50cy5sZW5ndGgpcmV0dXJuITE7aWYodC5pc1JlbGF0aXZlIT10aGlzLmlzUmVsYXRpdmUpcmV0dXJuITE7Zm9yKHZhciBlPTAsbj10Ll9jb21wb25lbnRzLmxlbmd0aDtlPG47ZSsrKWlmKCF0Ll9jb21wb25lbnRzW2VdLkVxdWFscyh0aGlzLl9jb21wb25lbnRzW2VdKSlyZXR1cm4hMTtyZXR1cm4hMH19LHtrZXk6XCJQYXRoQnlBcHBlbmRpbmdDb21wb25lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgcztyZXR1cm4gZS5fY29tcG9uZW50cy5wdXNoLmFwcGx5KGUuX2NvbXBvbmVudHMsdGhpcy5fY29tcG9uZW50cyksZS5fY29tcG9uZW50cy5wdXNoKHQpLGV9fSx7a2V5OlwiaXNSZWxhdGl2ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1JlbGF0aXZlfX0se2tleTpcImNvbXBvbmVudENvdW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHMubGVuZ3RofX0se2tleTpcImhlYWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLl9jb21wb25lbnRzLmxlbmd0aD90aGlzLl9jb21wb25lbnRzWzBdOm51bGx9fSx7a2V5OlwidGFpbFwiLGdldDpmdW5jdGlvbigpe3JldHVybiAyPD10aGlzLl9jb21wb25lbnRzLmxlbmd0aD9uZXcgcyh0aGlzLl9jb21wb25lbnRzLnNsaWNlKDEsdGhpcy5fY29tcG9uZW50cy5sZW5ndGgpKTpzLnNlbGZ9fSx7a2V5OlwibGVuZ3RoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHMubGVuZ3RofX0se2tleTpcImxhc3RDb21wb25lbnRcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb21wb25lbnRzLmxlbmd0aC0xO3JldHVybiAwPD10P3RoaXMuX2NvbXBvbmVudHNbdF06bnVsbH19LHtrZXk6XCJjb250YWluc05hbWVkQ29tcG9uZW50XCIsZ2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLl9jb21wb25lbnRzLmxlbmd0aDt0PGU7dCsrKWlmKCF0aGlzLl9jb21wb25lbnRzW3RdLmlzSW5kZXgpcmV0dXJuITA7cmV0dXJuITF9fSx7a2V5OlwiY29tcG9uZW50c1N0cmluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT10aGlzLl9jb21wb25lbnRzU3RyaW5nJiYodGhpcy5fY29tcG9uZW50c1N0cmluZz10aGlzLl9jb21wb25lbnRzLmpvaW4oXCIuXCIpLHRoaXMuaXNSZWxhdGl2ZSYmKHRoaXMuX2NvbXBvbmVudHNTdHJpbmc9XCIuXCIrdGhpcy5fY29tcG9uZW50c1N0cmluZykpLHRoaXMuX2NvbXBvbmVudHNTdHJpbmd9LHNldDpmdW5jdGlvbih0KXtpZih0aGlzLl9jb21wb25lbnRzLmxlbmd0aD0wLHRoaXMuX2NvbXBvbmVudHNTdHJpbmc9dCxudWxsIT10aGlzLl9jb21wb25lbnRzU3RyaW5nJiZcIlwiIT10aGlzLl9jb21wb25lbnRzU3RyaW5nKXtcIi5cIj09dGhpcy5fY29tcG9uZW50c1N0cmluZ1swXSYmKHRoaXMuX2lzUmVsYXRpdmU9ITAsdGhpcy5fY29tcG9uZW50c1N0cmluZz10aGlzLl9jb21wb25lbnRzU3RyaW5nLnN1YnN0cmluZygxKSk7dmFyIGUsbj1wdCh0aGlzLl9jb21wb25lbnRzU3RyaW5nLnNwbGl0KFwiLlwiKSk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaT1lLnZhbHVlOy9eKFxcLXxcXCspPyhbMC05XSt8SW5maW5pdHkpJC8udGVzdChpKT90aGlzLl9jb21wb25lbnRzLnB1c2gobmV3IHMuQ29tcG9uZW50KHBhcnNlSW50KGkpKSk6dGhpcy5fY29tcG9uZW50cy5wdXNoKG5ldyBzLkNvbXBvbmVudChpKSl9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfX19fV0sW3trZXk6XCJzZWxmXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHM7cmV0dXJuIHQuX2lzUmVsYXRpdmU9ITAsdH19XSksc30oKTtmdW5jdGlvbiB5KHQsZSl7aWYoIXQpdGhyb3cgdm9pZCAwIT09ZSYmY29uc29sZS53YXJuKGUpLGNvbnNvbGUudHJhY2UmJmNvbnNvbGUudHJhY2UoKSxuZXcgRXJyb3IoXCJcIil9ZnVuY3Rpb24geXQodCxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIGU/dDpudWxsfWZ1bmN0aW9uIG10KHQsZSl7aWYodCBpbnN0YW5jZW9mIGUpcmV0dXJuIHQ7dGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KHQsXCIgaXMgbm90IG9mIHR5cGUgXCIpLmNvbmNhdChlKSl9ZnVuY3Rpb24gQyh0KXtyZXR1cm4gdC5oYXNWYWxpZE5hbWUmJnQubmFtZT90Om51bGx9ZnVuY3Rpb24gZyh0KXtyZXR1cm4gdm9pZCAwPT09dD9udWxsOnR9ZnVuY3Rpb24gYih0KXtyZXR1cm5cIm9iamVjdFwiPT09Tyh0KSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5FcXVhbHN9RS5wYXJlbnRJZD1cIl5cIix0PUU9RXx8e30sZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7bSh0aGlzLGUpLHRoaXMuaW5kZXg9LTEsdGhpcy5uYW1lPW51bGwsXCJzdHJpbmdcIj09dHlwZW9mIHQ/dGhpcy5uYW1lPXQ6dGhpcy5pbmRleD10fXJldHVybiBhKGUsW3trZXk6XCJ0b1N0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNJbmRleD90aGlzLmluZGV4LnRvU3RyaW5nKCk6dGhpcy5uYW1lfX0se2tleTpcIkVxdWFsc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10JiZ0LmlzSW5kZXg9PXRoaXMuaXNJbmRleCYmKHRoaXMuaXNJbmRleD90aGlzLmluZGV4PT10LmluZGV4OnRoaXMubmFtZT09dC5uYW1lKX19LHtrZXk6XCJpc0luZGV4XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDA8PXRoaXMuaW5kZXh9fSx7a2V5OlwiaXNQYXJlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lPT10LnBhcmVudElkfX1dLFt7a2V5OlwiVG9QYXJlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgZSh0LnBhcmVudElkKX19XSksZX0oKSx0LkNvbXBvbmVudD1lLChuPWs9a3x8e30pLkFzc2VydFR5cGU9ZnVuY3Rpb24odCxlLG4pe3kodCBpbnN0YW5jZW9mIGUsbil9LG4uQXNzZXJ0PXk7dmFyIF89ZnVuY3Rpb24oKXtzKGUsYyhFcnJvcikpO3ZhciB0PXYoZSk7ZnVuY3Rpb24gZSgpe3JldHVybiBtKHRoaXMsZSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGV9KCk7ZnVuY3Rpb24gZ3QodCl7dGhyb3cgbmV3IF8oXCJcIi5jb25jYXQodCxcIiBpcyBudWxsIG9yIHVuZGVmaW5lZFwiKSl9dmFyIFQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bSh0aGlzLHQpLHRoaXMucGFyZW50PW51bGwsdGhpcy5fZGVidWdNZXRhZGF0YT1udWxsLHRoaXMuX3BhdGg9bnVsbH1yZXR1cm4gYSh0LFt7a2V5OlwiRGVidWdMaW5lTnVtYmVyT2ZQYXRoXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7dmFyIGU9dGhpcy5yb290Q29udGVudENvbnRhaW5lcjtpZihlKXt2YXIgbj1lLkNvbnRlbnRBdFBhdGgodCkub2JqO2lmKG4pe3ZhciBpPW4uZGVidWdNZXRhZGF0YTtpZihudWxsIT09aSlyZXR1cm4gaS5zdGFydExpbmVOdW1iZXJ9fXJldHVybiBudWxsfX0se2tleTpcIlJlc29sdmVQYXRoXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYobnVsbD09PXQpcmV0dXJuIGd0KFwicGF0aFwiKTtpZih0LmlzUmVsYXRpdmUpe3ZhciBlPXl0KHRoaXMsRXQpO3JldHVybiBudWxsPT09ZSYmKGsuQXNzZXJ0KG51bGwhPT10aGlzLnBhcmVudCxcIkNhbid0IHJlc29sdmUgcmVsYXRpdmUgcGF0aCBiZWNhdXNlIHdlIGRvbid0IGhhdmUgYSBwYXJlbnRcIiksZT15dCh0aGlzLnBhcmVudCxFdCksay5Bc3NlcnQobnVsbCE9PWUsXCJFeHBlY3RlZCBwYXJlbnQgdG8gYmUgYSBjb250YWluZXJcIiksay5Bc3NlcnQodC5HZXRDb21wb25lbnQoMCkuaXNQYXJlbnQpLHQ9dC50YWlsKSxudWxsPT09ZT9ndChcIm5lYXJlc3RDb250YWluZXJcIik6ZS5Db250ZW50QXRQYXRoKHQpfXZhciBuPXRoaXMucm9vdENvbnRlbnRDb250YWluZXI7cmV0dXJuIG51bGw9PT1uP2d0KFwiY29udGVudENvbnRhaW5lclwiKTpuLkNvbnRlbnRBdFBhdGgodCl9fSx7a2V5OlwiQ29udmVydFBhdGhUb1JlbGF0aXZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMucGF0aCxuPU1hdGgubWluKHQubGVuZ3RoLGUubGVuZ3RoKSxpPS0xLHI9MDtyPG47KytyKXt2YXIgYT1lLkdldENvbXBvbmVudChyKSxzPXQuR2V0Q29tcG9uZW50KHIpO2lmKCFhLkVxdWFscyhzKSlicmVhaztpPXJ9aWYoLTE9PWkpcmV0dXJuIHQ7Zm9yKHZhciBvPWUuY29tcG9uZW50Q291bnQtMS1pLHU9W10sbD0wO2w8bzsrK2wpdS5wdXNoKEUuQ29tcG9uZW50LlRvUGFyZW50KCkpO2Zvcih2YXIgaD1pKzE7aDx0LmNvbXBvbmVudENvdW50OysraCl1LnB1c2godC5HZXRDb21wb25lbnQoaCkpO3JldHVybiBuZXcgRSh1LCEwKX19LHtrZXk6XCJDb21wYWN0UGF0aFN0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW51bGwsbj1udWxsO3JldHVybiBlPXQuaXNSZWxhdGl2ZT8obj10LmNvbXBvbmVudHNTdHJpbmcsdGhpcy5wYXRoLlBhdGhCeUFwcGVuZGluZ1BhdGgodCkuY29tcG9uZW50c1N0cmluZyk6KG49dGhpcy5Db252ZXJ0UGF0aFRvUmVsYXRpdmUodCkuY29tcG9uZW50c1N0cmluZyx0LmNvbXBvbmVudHNTdHJpbmcpLG4ubGVuZ3RoPGUubGVuZ3RoP246ZX19LHtrZXk6XCJDb3B5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIk5vdCBJbXBsZW1lbnRlZDogRG9lc24ndCBzdXBwb3J0IGNvcHlpbmdcIil9fSx7a2V5OlwiU2V0Q2hpbGRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dFtlXSYmKHRbZV09bnVsbCksdFtlXT1uLHRbZV0mJih0W2VdLnBhcmVudD10aGlzKX19LHtrZXk6XCJkZWJ1Z01ldGFkYXRhXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9kZWJ1Z01ldGFkYXRhJiZ0aGlzLnBhcmVudD90aGlzLnBhcmVudC5kZWJ1Z01ldGFkYXRhOnRoaXMuX2RlYnVnTWV0YWRhdGF9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZWJ1Z01ldGFkYXRhPXR9fSx7a2V5Olwib3duRGVidWdNZXRhZGF0YVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWJ1Z01ldGFkYXRhfX0se2tleTpcInBhdGhcIixnZXQ6ZnVuY3Rpb24oKXtpZihudWxsPT10aGlzLl9wYXRoKWlmKG51bGw9PXRoaXMucGFyZW50KXRoaXMuX3BhdGg9bmV3IEU7ZWxzZXtmb3IodmFyIHQ9W10sZT10aGlzLG49eXQoZS5wYXJlbnQsRXQpO251bGwhPT1uOyl7dmFyIGk9QyhlKTtudWxsIT1pJiZpLmhhc1ZhbGlkTmFtZT90LnVuc2hpZnQobmV3IEUuQ29tcG9uZW50KGkubmFtZSkpOnQudW5zaGlmdChuZXcgRS5Db21wb25lbnQobi5jb250ZW50LmluZGV4T2YoZSkpKSxuPXl0KChlPW4pLnBhcmVudCxFdCl9dGhpcy5fcGF0aD1uZXcgRSh0KX1yZXR1cm4gdGhpcy5fcGF0aH19LHtrZXk6XCJyb290Q29udGVudENvbnRhaW5lclwiLGdldDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzO3QucGFyZW50Oyl0PXQucGFyZW50O3JldHVybiB5dCh0LEV0KX19XSksdH0oKSxTdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7bSh0aGlzLGUpLHQ9dm9pZCAwIT09dD90LnRvU3RyaW5nKCk6XCJcIix0aGlzLnN0cmluZz10fXJldHVybiBhKGUsW3trZXk6XCJBcHBlbmRcIix2YWx1ZTpmdW5jdGlvbih0KXtudWxsIT09dCYmKHRoaXMuc3RyaW5nKz10KX19LHtrZXk6XCJBcHBlbmRMaW5lXCIsdmFsdWU6ZnVuY3Rpb24odCl7dm9pZCAwIT09dCYmdGhpcy5BcHBlbmQodCksdGhpcy5zdHJpbmcrPVwiXFxuXCJ9fSx7a2V5OlwiQXBwZW5kRm9ybWF0XCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkoMTxlP2UtMTowKSxpPTE7aTxlO2krKyluW2ktMV09YXJndW1lbnRzW2ldO3RoaXMuc3RyaW5nKz10LnJlcGxhY2UoL3soXFxkKyl9L2csZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwIT09bltlXT9uW2VdOnR9KX19LHtrZXk6XCJ0b1N0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyaW5nfX0se2tleTpcIkxlbmd0aFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmluZy5sZW5ndGh9fV0pLGV9KCksa3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7dmFyIHQsZSxuO20odGhpcyxpKSx0aGlzLm9yaWdpbk5hbWU9bnVsbCx0aGlzLml0ZW1OYW1lPW51bGwsdm9pZCAwIT09YXJndW1lbnRzWzFdPyh0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSx0aGlzLm9yaWdpbk5hbWU9dCx0aGlzLml0ZW1OYW1lPWUpOmFyZ3VtZW50c1swXSYmKG49YXJndW1lbnRzWzBdLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpLHRoaXMub3JpZ2luTmFtZT1uWzBdLHRoaXMuaXRlbU5hbWU9blsxXSl9cmV0dXJuIGEoaSxbe2tleTpcInRvU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mdWxsTmFtZX19LHtrZXk6XCJFcXVhbHNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGkmJih0Lml0ZW1OYW1lPT10aGlzLml0ZW1OYW1lJiZ0Lm9yaWdpbk5hbWU9PXRoaXMub3JpZ2luTmFtZSl9fSx7a2V5OlwiY29weVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpKHRoaXMub3JpZ2luTmFtZSx0aGlzLml0ZW1OYW1lKX19LHtrZXk6XCJzZXJpYWxpemVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoe29yaWdpbk5hbWU6dGhpcy5vcmlnaW5OYW1lLGl0ZW1OYW1lOnRoaXMuaXRlbU5hbWV9KX19LHtrZXk6XCJpc051bGxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09dGhpcy5vcmlnaW5OYW1lJiZudWxsPT10aGlzLml0ZW1OYW1lfX0se2tleTpcImZ1bGxOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuKG51bGwhPT10aGlzLm9yaWdpbk5hbWU/dGhpcy5vcmlnaW5OYW1lOlwiP1wiKStcIi5cIit0aGlzLml0ZW1OYW1lfX1dLFt7a2V5OlwiZnJvbVNlcmlhbGl6ZWRLZXlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1KU09OLnBhcnNlKHQpO2lmKCFpLmlzTGlrZUlua0xpc3RJdGVtKGUpKXJldHVybiBpLk51bGw7cmV0dXJuIG5ldyBpKGUub3JpZ2luTmFtZSxlLml0ZW1OYW1lKX19LHtrZXk6XCJpc0xpa2VJbmtMaXN0SXRlbVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PT1PKHQpJiYoISghdC5oYXNPd25Qcm9wZXJ0eShcIm9yaWdpbk5hbWVcIil8fCF0Lmhhc093blByb3BlcnR5KFwiaXRlbU5hbWVcIikpJiYoKFwic3RyaW5nXCI9PXR5cGVvZiB0Lm9yaWdpbk5hbWV8fG51bGw9PT10eXBlb2YgdC5vcmlnaW5OYW1lKSYmKFwic3RyaW5nXCI9PXR5cGVvZiB0Lml0ZW1OYW1lfHxudWxsPT09dHlwZW9mIHQuaXRlbU5hbWUpKSl9fSx7a2V5OlwiTnVsbFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBuZXcgaShudWxsLG51bGwpfX1dKSxpfSgpLEN0PWZ1bmN0aW9uKCl7cyhsLGMoTWFwKSk7dmFyIG89dihsKTtmdW5jdGlvbiBsKCl7dmFyIHQsZSxuPWFyZ3VtZW50cztpZihtKHRoaXMsbCksKHQ9by5jYWxsKHRoaXMsblswXWluc3RhbmNlb2YgbD9uWzBdOltdKSkub3JpZ2lucz1udWxsLHQuX29yaWdpbk5hbWVzPVtdLGFyZ3VtZW50c1swXWluc3RhbmNlb2YgbCl7dmFyIGk9YXJndW1lbnRzWzBdO2kuX29yaWdpbk5hbWVzJiYodC5fb3JpZ2luTmFtZXM9aS5fb3JpZ2luTmFtZXMuc2xpY2UoKSl9ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgcj1hcmd1bWVudHNbMF0sYT1hcmd1bWVudHNbMV07dC5TZXRJbml0aWFsT3JpZ2luTmFtZShyKTt2YXIgcz1hLmxpc3REZWZpbml0aW9ucy5UcnlMaXN0R2V0RGVmaW5pdGlvbihyLG51bGwpO2lmKCFzLmV4aXN0cyl0aHJvdyBuZXcgRXJyb3IoXCJJbmtMaXN0IG9yaWdpbiBjb3VsZCBub3QgYmUgZm91bmQgaW4gc3Rvcnkgd2hlbiBjb25zdHJ1Y3RpbmcgbmV3IGxpc3Q6IFwiK3IpO3Qub3JpZ2lucz1bcy5yZXN1bHRdfWVsc2V7XCJvYmplY3RcIj09PU8oYXJndW1lbnRzWzBdKSYmYXJndW1lbnRzWzBdLmhhc093blByb3BlcnR5KFwiS2V5XCIpJiZhcmd1bWVudHNbMF0uaGFzT3duUHJvcGVydHkoXCJWYWx1ZVwiKSYmKGU9YXJndW1lbnRzWzBdLHQuQWRkKGUuS2V5LGUuVmFsdWUpKX1yZXR1cm4gdH1yZXR1cm4gYShsLFt7a2V5OlwiQWRkSXRlbVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBrdCl7dmFyIGU9dDtpZihudWxsPT1lLm9yaWdpbk5hbWUpcmV0dXJuIHZvaWQgdGhpcy5BZGRJdGVtKGUuaXRlbU5hbWUpO2lmKG51bGw9PT10aGlzLm9yaWdpbnMpcmV0dXJuIGd0KFwidGhpcy5vcmlnaW5zXCIpO3ZhciBuLGk9cHQodGhpcy5vcmlnaW5zKTt0cnl7Zm9yKGkucygpOyEobj1pLm4oKSkuZG9uZTspe3ZhciByPW4udmFsdWU7aWYoci5uYW1lPT1lLm9yaWdpbk5hbWUpe3ZhciBhPXIuVHJ5R2V0VmFsdWVGb3JJdGVtKGUsMCk7aWYoYS5leGlzdHMpcmV0dXJuIHZvaWQgdGhpcy5BZGQoZSxhLnJlc3VsdCk7dGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGFkZCB0aGUgaXRlbSBcIitlK1wiIHRvIHRoaXMgbGlzdCBiZWNhdXNlIGl0IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIGxpc3QgZGVmaW5pdGlvbiBpbiBpbmsuXCIpfX19Y2F0Y2godCl7aS5lKHQpfWZpbmFsbHl7aS5mKCl9dGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGFkZCBpdGVtIHRvIGxpc3QgYmVjYXVzZSB0aGUgaXRlbSB3YXMgZnJvbSBhIG5ldyBsaXN0IGRlZmluaXRpb24gdGhhdCB3YXNuJ3QgcHJldmlvdXNseSBrbm93biB0byB0aGlzIGxpc3QuIE9ubHkgaXRlbXMgZnJvbSBwcmV2aW91c2x5IGtub3duIGxpc3RzIGNhbiBiZSB1c2VkLCBzbyB0aGF0IHRoZSBpbnQgdmFsdWUgY2FuIGJlIGZvdW5kLlwiKX12YXIgcz10LG89bnVsbDtpZihudWxsPT09dGhpcy5vcmlnaW5zKXJldHVybiBndChcInRoaXMub3JpZ2luc1wiKTt2YXIgdSxsPXB0KHRoaXMub3JpZ2lucyk7dHJ5e2ZvcihsLnMoKTshKHU9bC5uKCkpLmRvbmU7KXt2YXIgaD11LnZhbHVlO2lmKG51bGw9PT1zKXJldHVybiBndChcIml0ZW1OYW1lXCIpO2lmKGguQ29udGFpbnNJdGVtV2l0aE5hbWUocykpe2lmKG51bGwhPW8pdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGFkZCB0aGUgaXRlbSBcIitzK1wiIHRvIHRoaXMgbGlzdCBiZWNhdXNlIGl0IGNvdWxkIGNvbWUgZnJvbSBlaXRoZXIgXCIraC5uYW1lK1wiIG9yIFwiK28ubmFtZSk7bz1ofX19Y2F0Y2godCl7bC5lKHQpfWZpbmFsbHl7bC5mKCl9aWYobnVsbD09byl0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgYWRkIHRoZSBpdGVtIFwiK3MrXCIgdG8gdGhpcyBsaXN0IGJlY2F1c2UgaXQgaXNuJ3Qga25vd24gdG8gYW55IGxpc3QgZGVmaW5pdGlvbnMgcHJldmlvdXNseSBhc3NvY2lhdGVkIHdpdGggdGhpcyBsaXN0LlwiKTt2YXIgYz1uZXcga3Qoby5uYW1lLHMpLGY9by5WYWx1ZUZvckl0ZW0oYyk7dGhpcy5BZGQoYyxmKX19LHtrZXk6XCJDb250YWluc0l0ZW1OYW1lZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLG49cHQodGhpcyk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaT1TKGUudmFsdWUsMSlbMF07aWYoa3QuZnJvbVNlcmlhbGl6ZWRLZXkoaSkuaXRlbU5hbWU9PXQpcmV0dXJuITB9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfXJldHVybiExfX0se2tleTpcIkNvbnRhaW5zS2V5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzKHQuc2VyaWFsaXplZCgpKX19LHtrZXk6XCJBZGRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuc2VyaWFsaXplZCgpO2lmKHRoaXMuaGFzKG4pKXRocm93IG5ldyBFcnJvcihcIlRoZSBNYXAgYWxyZWFkeSBjb250YWlucyBhbiBlbnRyeSBmb3IgXCIuY29uY2F0KHQpKTt0aGlzLnNldChuLGUpfX0se2tleTpcIlJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlbGV0ZSh0LnNlcmlhbGl6ZWQoKSl9fSx7a2V5OlwiU2V0SW5pdGlhbE9yaWdpbk5hbWVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9vcmlnaW5OYW1lcz1bdF19fSx7a2V5OlwiU2V0SW5pdGlhbE9yaWdpbk5hbWVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZ2luTmFtZXM9bnVsbD09dD9udWxsOnQuc2xpY2UoKX19LHtrZXk6XCJVbmlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLG49bmV3IGwodGhpcyksaT1wdCh0KTt0cnl7Zm9yKGkucygpOyEoZT1pLm4oKSkuZG9uZTspe3ZhciByPVMoZS52YWx1ZSwyKSxhPXJbMF0scz1yWzFdO24uc2V0KGEscyl9fWNhdGNoKHQpe2kuZSh0KX1maW5hbGx5e2kuZigpfXJldHVybiBufX0se2tleTpcIkludGVyc2VjdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLG49bmV3IGwsaT1wdCh0aGlzKTt0cnl7Zm9yKGkucygpOyEoZT1pLm4oKSkuZG9uZTspe3ZhciByPVMoZS52YWx1ZSwyKSxhPXJbMF0scz1yWzFdO3QuaGFzKGEpJiZuLnNldChhLHMpfX1jYXRjaCh0KXtpLmUodCl9ZmluYWxseXtpLmYoKX1yZXR1cm4gbn19LHtrZXk6XCJXaXRob3V0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGUsbj1uZXcgbCh0aGlzKSxpPXB0KHQpO3RyeXtmb3IoaS5zKCk7IShlPWkubigpKS5kb25lOyl7dmFyIHI9UyhlLnZhbHVlLDEpWzBdO24uZGVsZXRlKHIpfX1jYXRjaCh0KXtpLmUodCl9ZmluYWxseXtpLmYoKX1yZXR1cm4gbn19LHtrZXk6XCJDb250YWluc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLG49cHQodCk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaT1TKGUudmFsdWUsMSlbMF07aWYoIXRoaXMuaGFzKGkpKXJldHVybiExfX1jYXRjaCh0KXtuLmUodCl9ZmluYWxseXtuLmYoKX1yZXR1cm4hMH19LHtrZXk6XCJHcmVhdGVyVGhhblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiAwIT10aGlzLkNvdW50JiYoMD09dC5Db3VudHx8dGhpcy5taW5JdGVtLlZhbHVlPnQubWF4SXRlbS5WYWx1ZSl9fSx7a2V5OlwiR3JlYXRlclRoYW5PckVxdWFsc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiAwIT10aGlzLkNvdW50JiYoMD09dC5Db3VudHx8dGhpcy5taW5JdGVtLlZhbHVlPj10Lm1pbkl0ZW0uVmFsdWUmJnRoaXMubWF4SXRlbS5WYWx1ZT49dC5tYXhJdGVtLlZhbHVlKX19LHtrZXk6XCJMZXNzVGhhblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiAwIT10LkNvdW50JiYoMD09dGhpcy5Db3VudHx8dGhpcy5tYXhJdGVtLlZhbHVlPHQubWluSXRlbS5WYWx1ZSl9fSx7a2V5OlwiTGVzc1RoYW5PckVxdWFsc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiAwIT10LkNvdW50JiYoMD09dGhpcy5Db3VudHx8dGhpcy5tYXhJdGVtLlZhbHVlPD10Lm1heEl0ZW0uVmFsdWUmJnRoaXMubWluSXRlbS5WYWx1ZTw9dC5taW5JdGVtLlZhbHVlKX19LHtrZXk6XCJNYXhBc0xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwPHRoaXMuQ291bnQ/bmV3IGwodGhpcy5tYXhJdGVtKTpuZXcgbH19LHtrZXk6XCJNaW5Bc0xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwPHRoaXMuQ291bnQ/bmV3IGwodGhpcy5taW5JdGVtKTpuZXcgbH19LHtrZXk6XCJMaXN0V2l0aFN1YlJhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZigwPT10aGlzLkNvdW50KXJldHVybiBuZXcgbDt2YXIgbj10aGlzLm9yZGVyZWRJdGVtcyxpPTAscj1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtOdW1iZXIuaXNJbnRlZ2VyKHQpP2k9dDp0IGluc3RhbmNlb2YgbCYmMDx0LkNvdW50JiYoaT10Lm1pbkl0ZW0uVmFsdWUpLE51bWJlci5pc0ludGVnZXIoZSk/cj1lOnQgaW5zdGFuY2VvZiBsJiYwPHQuQ291bnQmJihyPWUubWF4SXRlbS5WYWx1ZSk7dmFyIGE9bmV3IGw7YS5TZXRJbml0aWFsT3JpZ2luTmFtZXModGhpcy5vcmlnaW5OYW1lcyk7dmFyIHMsbz1wdChuKTt0cnl7Zm9yKG8ucygpOyEocz1vLm4oKSkuZG9uZTspe3ZhciB1PXMudmFsdWU7dS5WYWx1ZT49aSYmdS5WYWx1ZTw9ciYmYS5BZGQodS5LZXksdS5WYWx1ZSl9fWNhdGNoKHQpe28uZSh0KX1maW5hbGx5e28uZigpfXJldHVybiBhfX0se2tleTpcIkVxdWFsc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBsPT0hMSlyZXR1cm4hMTtpZih0LkNvdW50IT10aGlzLkNvdW50KXJldHVybiExO3ZhciBlLG49cHQodGhpcyk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaT1TKGUudmFsdWUsMSlbMF07aWYoIXQuaGFzKGkpKXJldHVybiExfX1jYXRjaCh0KXtuLmUodCl9ZmluYWxseXtuLmYoKX1yZXR1cm4hMH19LHtrZXk6XCJ0b1N0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMub3JkZXJlZEl0ZW1zLGU9bmV3IFN0LG49MDtuPHQubGVuZ3RoO24rKyl7MDxuJiZlLkFwcGVuZChcIiwgXCIpO3ZhciBpPXRbbl0uS2V5O2lmKG51bGw9PT1pLml0ZW1OYW1lKXJldHVybiBndChcIml0ZW0uaXRlbU5hbWVcIik7ZS5BcHBlbmQoaS5pdGVtTmFtZSl9cmV0dXJuIGUudG9TdHJpbmcoKX19LHtrZXk6XCJ2YWx1ZU9mXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTmFOfX0se2tleTpcIkNvdW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZX19LHtrZXk6XCJvcmlnaW5PZk1heEl0ZW1cIixnZXQ6ZnVuY3Rpb24oKXtpZihudWxsPT10aGlzLm9yaWdpbnMpcmV0dXJuIG51bGw7dmFyIGU9dGhpcy5tYXhJdGVtLktleS5vcmlnaW5OYW1lLG49bnVsbDtyZXR1cm4gdGhpcy5vcmlnaW5zLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiB0Lm5hbWUhPWV8fChuPXQsITEpfSksbn19LHtrZXk6XCJvcmlnaW5OYW1lc1wiLGdldDpmdW5jdGlvbigpe2lmKDA8dGhpcy5Db3VudCl7bnVsbD09dGhpcy5fb3JpZ2luTmFtZXMmJjA8dGhpcy5Db3VudD90aGlzLl9vcmlnaW5OYW1lcz1bXToodGhpcy5fb3JpZ2luTmFtZXN8fCh0aGlzLl9vcmlnaW5OYW1lcz1bXSksdGhpcy5fb3JpZ2luTmFtZXMubGVuZ3RoPTApO3ZhciB0LGU9cHQodGhpcyk7dHJ5e2ZvcihlLnMoKTshKHQ9ZS5uKCkpLmRvbmU7KXt2YXIgbj1TKHQudmFsdWUsMSlbMF0saT1rdC5mcm9tU2VyaWFsaXplZEtleShuKTtpZihudWxsPT09aS5vcmlnaW5OYW1lKXJldHVybiBndChcIml0ZW0ub3JpZ2luTmFtZVwiKTt0aGlzLl9vcmlnaW5OYW1lcy5wdXNoKGkub3JpZ2luTmFtZSl9fWNhdGNoKHQpe2UuZSh0KX1maW5hbGx5e2UuZigpfX1yZXR1cm4gdGhpcy5fb3JpZ2luTmFtZXN9fSx7a2V5OlwibWF4SXRlbVwiLGdldDpmdW5jdGlvbigpe3ZhciB0LGU9e0tleTprdC5OdWxsLFZhbHVlOjB9LG49cHQodGhpcyk7dHJ5e2ZvcihuLnMoKTshKHQ9bi5uKCkpLmRvbmU7KXt2YXIgaT1TKHQudmFsdWUsMikscj1pWzBdLGE9aVsxXSxzPWt0LmZyb21TZXJpYWxpemVkS2V5KHIpOyhlLktleS5pc051bGx8fGE+ZS5WYWx1ZSkmJihlPXtLZXk6cyxWYWx1ZTphfSl9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfXJldHVybiBlfX0se2tleTpcIm1pbkl0ZW1cIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdCxlPXtLZXk6a3QuTnVsbCxWYWx1ZTowfSxuPXB0KHRoaXMpO3RyeXtmb3Iobi5zKCk7ISh0PW4ubigpKS5kb25lOyl7dmFyIGk9Uyh0LnZhbHVlLDIpLHI9aVswXSxhPWlbMV0scz1rdC5mcm9tU2VyaWFsaXplZEtleShyKTsoZS5LZXkuaXNOdWxsfHxhPGUuVmFsdWUpJiYoZT17S2V5OnMsVmFsdWU6YX0pfX1jYXRjaCh0KXtuLmUodCl9ZmluYWxseXtuLmYoKX1yZXR1cm4gZX19LHtrZXk6XCJpbnZlcnNlXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGw7aWYobnVsbCE9dGhpcy5vcmlnaW5zKXt2YXIgZSxuPXB0KHRoaXMub3JpZ2lucyk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaSxyPXB0KGUudmFsdWUuaXRlbXMpO3RyeXtmb3Ioci5zKCk7IShpPXIubigpKS5kb25lOyl7dmFyIGE9UyhpLnZhbHVlLDIpLHM9YVswXSxvPWFbMV0sdT1rdC5mcm9tU2VyaWFsaXplZEtleShzKTt0aGlzLkNvbnRhaW5zS2V5KHUpfHx0LkFkZCh1LG8pfX1jYXRjaCh0KXtyLmUodCl9ZmluYWxseXtyLmYoKX19fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfX1yZXR1cm4gdH19LHtrZXk6XCJhbGxcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbDtpZihudWxsIT10aGlzLm9yaWdpbnMpe3ZhciBlLG49cHQodGhpcy5vcmlnaW5zKTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciBpLHI9cHQoZS52YWx1ZS5pdGVtcyk7dHJ5e2ZvcihyLnMoKTshKGk9ci5uKCkpLmRvbmU7KXt2YXIgYT1TKGkudmFsdWUsMikscz1hWzBdLG89YVsxXSx1PWt0LmZyb21TZXJpYWxpemVkS2V5KHMpO3Quc2V0KHUuc2VyaWFsaXplZCgpLG8pfX1jYXRjaCh0KXtyLmUodCl9ZmluYWxseXtyLmYoKX19fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfX1yZXR1cm4gdH19LHtrZXk6XCJvcmRlcmVkSXRlbXNcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdCxlPW5ldyBBcnJheSxuPXB0KHRoaXMpO3RyeXtmb3Iobi5zKCk7ISh0PW4ubigpKS5kb25lOyl7dmFyIGk9Uyh0LnZhbHVlLDIpLHI9aVswXSxhPWlbMV0scz1rdC5mcm9tU2VyaWFsaXplZEtleShyKTtlLnB1c2goe0tleTpzLFZhbHVlOmF9KX19Y2F0Y2godCl7bi5lKHQpfWZpbmFsbHl7bi5mKCl9cmV0dXJuIGUuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT09dC5LZXkub3JpZ2luTmFtZT9ndChcInguS2V5Lm9yaWdpbk5hbWVcIik6bnVsbD09PWUuS2V5Lm9yaWdpbk5hbWU/Z3QoXCJ5LktleS5vcmlnaW5OYW1lXCIpOnQuVmFsdWU9PWUuVmFsdWU/dC5LZXkub3JpZ2luTmFtZS5sb2NhbGVDb21wYXJlKGUuS2V5Lm9yaWdpbk5hbWUpOnQuVmFsdWU8ZS5WYWx1ZT8tMTp0LlZhbHVlPmUuVmFsdWU/MTowfSksZX19XSksbH0oKSxidD1mdW5jdGlvbigpe3MoaSxjKEVycm9yKSk7dmFyIG49dihpKTtmdW5jdGlvbiBpKHQpe3ZhciBlO3JldHVybiBtKHRoaXMsaSksKGU9bi5jYWxsKHRoaXMsdCkpLnVzZUVuZExpbmVOdW1iZXI9ITEsZS5tZXNzYWdlPXQsZS5uYW1lPVwiU3RvcnlFeGNlcHRpb25cIixlfXJldHVybiBpfSgpO2Z1bmN0aW9uIHcodCxlLG4pe2lmKG51bGw9PT10KXJldHVybntyZXN1bHQ6bixleGlzdHM6ITF9O3ZhciBpPXQuZ2V0KGUpO3JldHVybiB2b2lkIDA9PT1pP3tyZXN1bHQ6bixleGlzdHM6ITF9OntyZXN1bHQ6aSxleGlzdHM6ITB9fXZhciBQLE4sQT1mdW5jdGlvbigpe3MoZSxUKTt2YXIgdD12KGUpO2Z1bmN0aW9uIGUoKXtyZXR1cm4gbSh0aGlzLGUpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBhKGUsW3trZXk6XCJDb3B5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbXQoZS5DcmVhdGUodGhpcyksVCl9fSx7a2V5OlwiQmFkQ2FzdEV4Y2VwdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYnQoXCJDYW4ndCBjYXN0IFwiK3RoaXMudmFsdWVPYmplY3QrXCIgZnJvbSBcIit0aGlzLnZhbHVlVHlwZStcIiB0byBcIit0KX19XSxbe2tleTpcIkNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYoZSl7aWYoZT09PVAuSW50JiZOdW1iZXIuaXNJbnRlZ2VyKE51bWJlcih0KSkpcmV0dXJuIG5ldyBUdChOdW1iZXIodCkpO2lmKGU9PT1QLkZsb2F0JiYhaXNOYU4odCkpcmV0dXJuIG5ldyB4KE51bWJlcih0KSl9cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiB0JiYodD0hIXQ/MTowKSxcInN0cmluZ1wiPT10eXBlb2YgdD9uZXcgd3QoU3RyaW5nKHQpKTpOdW1iZXIuaXNJbnRlZ2VyKE51bWJlcih0KSk/bmV3IFR0KE51bWJlcih0KSk6aXNOYU4odCk/dCBpbnN0YW5jZW9mIEU/bmV3IFB0KG10KHQsRSkpOnQgaW5zdGFuY2VvZiBDdD9uZXcgT3QobXQodCxDdCkpOm51bGw6bmV3IHgoTnVtYmVyKHQpKX19XSksZX0oKSxfdD1mdW5jdGlvbigpe3MoaSxBKTt2YXIgbj12KGkpO2Z1bmN0aW9uIGkodCl7dmFyIGU7cmV0dXJuIG0odGhpcyxpKSwoZT1uLmNhbGwodGhpcykpLnZhbHVlPXQsZX1yZXR1cm4gYShpLFt7a2V5OlwidG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy52YWx1ZT9ndChcIlZhbHVlLnZhbHVlXCIpOnRoaXMudmFsdWUudG9TdHJpbmcoKX19LHtrZXk6XCJ2YWx1ZU9iamVjdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlfX1dKSxpfSgpLFR0PWZ1bmN0aW9uKCl7cyhuLF90KTt2YXIgZT12KG4pO2Z1bmN0aW9uIG4odCl7cmV0dXJuIG0odGhpcyxuKSxlLmNhbGwodGhpcyx0fHwwKX1yZXR1cm4gYShuLFt7a2V5OlwiQ2FzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKG51bGw9PT10aGlzLnZhbHVlKXJldHVybiBndChcIlZhbHVlLnZhbHVlXCIpO2lmKHQ9PXRoaXMudmFsdWVUeXBlKXJldHVybiB0aGlzO2lmKHQ9PVAuRmxvYXQpcmV0dXJuIG5ldyB4KHRoaXMudmFsdWUpO2lmKHQ9PVAuU3RyaW5nKXJldHVybiBuZXcgd3QoXCJcIit0aGlzLnZhbHVlKTt0aHJvdyB0aGlzLkJhZENhc3RFeGNlcHRpb24odCl9fSx7a2V5OlwiaXNUcnV0aHlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9dGhpcy52YWx1ZX19LHtrZXk6XCJ2YWx1ZVR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUC5JbnR9fV0pLG59KCkseD1mdW5jdGlvbigpe3MobixfdCk7dmFyIGU9dihuKTtmdW5jdGlvbiBuKHQpe3JldHVybiBtKHRoaXMsbiksZS5jYWxsKHRoaXMsdHx8MCl9cmV0dXJuIGEobixbe2tleTpcIkNhc3RcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihudWxsPT09dGhpcy52YWx1ZSlyZXR1cm4gZ3QoXCJWYWx1ZS52YWx1ZVwiKTtpZih0PT10aGlzLnZhbHVlVHlwZSlyZXR1cm4gdGhpcztpZih0PT1QLkludClyZXR1cm4gbmV3IFR0KHRoaXMudmFsdWUpO2lmKHQ9PVAuU3RyaW5nKXJldHVybiBuZXcgd3QoXCJcIit0aGlzLnZhbHVlKTt0aHJvdyB0aGlzLkJhZENhc3RFeGNlcHRpb24odCl9fSx7a2V5OlwiaXNUcnV0aHlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9dGhpcy52YWx1ZX19LHtrZXk6XCJ2YWx1ZVR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUC5GbG9hdH19XSksbn0oKSx3dD1mdW5jdGlvbigpe3MoaSxfdCk7dmFyIG49dihpKTtmdW5jdGlvbiBpKHQpe3ZhciBlO3JldHVybiBtKHRoaXMsaSksKGU9bi5jYWxsKHRoaXMsdHx8XCJcIikpLl9pc05ld2xpbmU9XCJcXG5cIj09ZS52YWx1ZSxlLl9pc0lubGluZVdoaXRlc3BhY2U9ITAsbnVsbD09PWUudmFsdWU/ZihlLGd0KFwiVmFsdWUudmFsdWVcIikpOigwPGUudmFsdWUubGVuZ3RoJiZlLnZhbHVlLnNwbGl0KFwiXCIpLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVyblwiIFwiPT10fHxcIlxcdFwiPT10fHwoZS5faXNJbmxpbmVXaGl0ZXNwYWNlPSExKX0pLGUpfXJldHVybiBhKGksW3trZXk6XCJDYXN0XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodD09dGhpcy52YWx1ZVR5cGUpcmV0dXJuIHRoaXM7aWYodD09UC5JbnQpe3ZhciBlPWZ1bmN0aW9uKHQsZSl7dmFyIG49MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6MCxpPXBhcnNlSW50KHQpO3JldHVybiBOdW1iZXIuaXNOYU4oaSk/e3Jlc3VsdDpuLGV4aXN0czohMX06e3Jlc3VsdDppLGV4aXN0czohMH19KHRoaXMudmFsdWUpO2lmKGUuZXhpc3RzKXJldHVybiBuZXcgVHQoZS5yZXN1bHQpO3Rocm93IHRoaXMuQmFkQ2FzdEV4Y2VwdGlvbih0KX1pZih0IT1QLkZsb2F0KXRocm93IHRoaXMuQmFkQ2FzdEV4Y2VwdGlvbih0KTt2YXIgbj1mdW5jdGlvbih0LGUpe3ZhciBuPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOjAsaT1wYXJzZUZsb2F0KHQpO3JldHVybiBOdW1iZXIuaXNOYU4oaSk/e3Jlc3VsdDpuLGV4aXN0czohMX06e3Jlc3VsdDppLGV4aXN0czohMH19KHRoaXMudmFsdWUpO2lmKG4uZXhpc3RzKXJldHVybiBuZXcgeChuLnJlc3VsdCk7dGhyb3cgdGhpcy5CYWRDYXN0RXhjZXB0aW9uKHQpfX0se2tleTpcInZhbHVlVHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBQLlN0cmluZ319LHtrZXk6XCJpc1RydXRoeVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy52YWx1ZT9ndChcIlZhbHVlLnZhbHVlXCIpOjA8dGhpcy52YWx1ZS5sZW5ndGh9fSx7a2V5OlwiaXNOZXdsaW5lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzTmV3bGluZX19LHtrZXk6XCJpc0lubGluZVdoaXRlc3BhY2VcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJbmxpbmVXaGl0ZXNwYWNlfX0se2tleTpcImlzTm9uV2hpdGVzcGFjZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzTmV3bGluZSYmIXRoaXMuaXNJbmxpbmVXaGl0ZXNwYWNlfX1dKSxpfSgpLFB0PWZ1bmN0aW9uKCl7cyhuLF90KTt2YXIgZT12KG4pO2Z1bmN0aW9uIG4odCl7cmV0dXJuIG0odGhpcyxuKSxlLmNhbGwodGhpcyx0KX1yZXR1cm4gYShuLFt7a2V5OlwiQ2FzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQ9PXRoaXMudmFsdWVUeXBlKXJldHVybiB0aGlzO3Rocm93IHRoaXMuQmFkQ2FzdEV4Y2VwdGlvbih0KX19LHtrZXk6XCJ0b1N0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJEaXZlcnRUYXJnZXRWYWx1ZShcIit0aGlzLnRhcmdldFBhdGgrXCIpXCJ9fSx7a2V5OlwidmFsdWVUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFAuRGl2ZXJ0VGFyZ2V0fX0se2tleTpcInRhcmdldFBhdGhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMudmFsdWU/Z3QoXCJWYWx1ZS52YWx1ZVwiKTp0aGlzLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy52YWx1ZT10fX0se2tleTpcImlzVHJ1dGh5XCIsZ2V0OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiU2hvdWxkbid0IGJlIGNoZWNraW5nIHRoZSB0cnV0aGluZXNzIG9mIGEgZGl2ZXJ0IHRhcmdldFwiKX19XSksbn0oKSxJPWZ1bmN0aW9uKCl7cyhyLF90KTt2YXIgaT12KHIpO2Z1bmN0aW9uIHIodCl7dmFyIGUsbj0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06LTE7cmV0dXJuIG0odGhpcyxyKSwoZT1pLmNhbGwodGhpcyx0KSkuX2NvbnRleHRJbmRleD1uLGV9cmV0dXJuIGEocixbe2tleTpcIkNhc3RcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0PT10aGlzLnZhbHVlVHlwZSlyZXR1cm4gdGhpczt0aHJvdyB0aGlzLkJhZENhc3RFeGNlcHRpb24odCl9fSx7a2V5OlwidG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiVmFyaWFibGVQb2ludGVyVmFsdWUoXCIrdGhpcy52YXJpYWJsZU5hbWUrXCIpXCJ9fSx7a2V5OlwiQ29weVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMudmFyaWFibGVOYW1lLHRoaXMuY29udGV4dEluZGV4KX19LHtrZXk6XCJjb250ZXh0SW5kZXhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dEluZGV4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29udGV4dEluZGV4PXR9fSx7a2V5OlwidmFyaWFibGVOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnZhbHVlP2d0KFwiVmFsdWUudmFsdWVcIik6dGhpcy52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudmFsdWU9dH19LHtrZXk6XCJ2YWx1ZVR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUC5WYXJpYWJsZVBvaW50ZXJ9fSx7a2V5OlwiaXNUcnV0aHlcIixnZXQ6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJTaG91bGRuJ3QgYmUgY2hlY2tpbmcgdGhlIHRydXRoaW5lc3Mgb2YgYSB2YXJpYWJsZSBwb2ludGVyXCIpfX1dKSxyfSgpLE90PWZ1bmN0aW9uKCl7cyhyLF90KTt2YXIgaT12KHIpO2Z1bmN0aW9uIHIodCxlKXt2YXIgbjtyZXR1cm4gbSh0aGlzLHIpLG49aS5jYWxsKHRoaXMsbnVsbCksdHx8ZT90IGluc3RhbmNlb2YgQ3Q/bi52YWx1ZT1uZXcgQ3QodCk6dCBpbnN0YW5jZW9mIGt0JiZcIm51bWJlclwiPT10eXBlb2YgZSYmKG4udmFsdWU9bmV3IEN0KHtLZXk6dCxWYWx1ZTplfSkpOm4udmFsdWU9bmV3IEN0LG59cmV0dXJuIGEocixbe2tleTpcIkNhc3RcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihudWxsPT09dGhpcy52YWx1ZSlyZXR1cm4gZ3QoXCJWYWx1ZS52YWx1ZVwiKTtpZih0PT1QLkludCl7dmFyIGU9dGhpcy52YWx1ZS5tYXhJdGVtO3JldHVybiBlLktleS5pc051bGw/bmV3IFR0KDApOm5ldyBUdChlLlZhbHVlKX1pZih0PT1QLkZsb2F0KXt2YXIgbj10aGlzLnZhbHVlLm1heEl0ZW07cmV0dXJuIG4uS2V5LmlzTnVsbD9uZXcgeCgwKTpuZXcgeChuLlZhbHVlKX1pZih0PT1QLlN0cmluZyl7dmFyIGk9dGhpcy52YWx1ZS5tYXhJdGVtO3JldHVybiBpLktleS5pc051bGw/bmV3IHd0KFwiXCIpOm5ldyB3dChpLktleS50b1N0cmluZygpKX1pZih0PT10aGlzLnZhbHVlVHlwZSlyZXR1cm4gdGhpczt0aHJvdyB0aGlzLkJhZENhc3RFeGNlcHRpb24odCl9fSx7a2V5OlwiaXNUcnV0aHlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMudmFsdWU/Z3QoXCJ0aGlzLnZhbHVlXCIpOjA8dGhpcy52YWx1ZS5Db3VudH19LHtrZXk6XCJ2YWx1ZVR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUC5MaXN0fX1dKSxhKHIsbnVsbCxbe2tleTpcIlJldGFpbkxpc3RPcmlnaW5zRm9yQXNzaWdubWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49eXQodCxyKSxpPXl0KGUscik7cmV0dXJuIGkmJm51bGw9PT1pLnZhbHVlP2d0KFwibmV3TGlzdC52YWx1ZVwiKTpuJiZudWxsPT09bi52YWx1ZT9ndChcIm9sZExpc3QudmFsdWVcIik6dm9pZChuJiZpJiYwPT1pLnZhbHVlLkNvdW50JiZpLnZhbHVlLlNldEluaXRpYWxPcmlnaW5OYW1lcyhuLnZhbHVlLm9yaWdpbk5hbWVzKSl9fV0pLHJ9KCk7KE49UD1QfHx7fSlbTi5JbnQ9MF09XCJJbnRcIixOW04uRmxvYXQ9MV09XCJGbG9hdFwiLE5bTi5MaXN0PTJdPVwiTGlzdFwiLE5bTi5TdHJpbmc9M109XCJTdHJpbmdcIixOW04uRGl2ZXJ0VGFyZ2V0PTRdPVwiRGl2ZXJ0VGFyZ2V0XCIsTltOLlZhcmlhYmxlUG9pbnRlcj01XT1cIlZhcmlhYmxlUG9pbnRlclwiO3ZhciBXLEYsVj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXttKHRoaXMsZSksdGhpcy5vYmo9bnVsbCx0aGlzLmFwcHJveGltYXRlPSExfXJldHVybiBhKGUsW3trZXk6XCJjb3B5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdC5vYmo9dGhpcy5vYmosdC5hcHByb3hpbWF0ZT10aGlzLmFwcHJveGltYXRlLHR9fSx7a2V5OlwiY29ycmVjdE9ialwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFwcHJveGltYXRlP251bGw6dGhpcy5vYmp9fSx7a2V5OlwiY29udGFpbmVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JqIGluc3RhbmNlb2YgRXQ/dGhpcy5vYmo6bnVsbH19XSksZX0oKSxFdD1mdW5jdGlvbigpe3MoZyxUKTt2YXIgZT12KGcpO2Z1bmN0aW9uIGcoKXt2YXIgdDtyZXR1cm4gbSh0aGlzLGcpLCh0PWUuYXBwbHkodGhpcyxhcmd1bWVudHMpKS5uYW1lPVwiXCIsdC5fY29udGVudD1bXSx0Lm5hbWVkQ29udGVudD1uZXcgTWFwLHQudmlzaXRzU2hvdWxkQmVDb3VudGVkPSExLHQudHVybkluZGV4U2hvdWxkQmVDb3VudGVkPSExLHQuY291bnRpbmdBdFN0YXJ0T25seT0hMSx0Ll9wYXRoVG9GaXJzdExlYWZDb250ZW50PW51bGwsdH1yZXR1cm4gYShnLFt7a2V5OlwiQWRkQ29udGVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBBcnJheSl7dmFyIGUsbj1wdCh0KTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciBpPWUudmFsdWU7dGhpcy5BZGRDb250ZW50KGkpfX1jYXRjaCh0KXtuLmUodCl9ZmluYWxseXtuLmYoKX19ZWxzZXt2YXIgcj10O2lmKHRoaXMuX2NvbnRlbnQucHVzaChyKSxyLnBhcmVudCl0aHJvdyBuZXcgRXJyb3IoXCJjb250ZW50IGlzIGFscmVhZHkgaW4gXCIrci5wYXJlbnQpOyhyLnBhcmVudD10aGlzKS5UcnlBZGROYW1lZENvbnRlbnQocil9fX0se2tleTpcIlRyeUFkZE5hbWVkQ29udGVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPUModCk7bnVsbCE9ZSYmZS5oYXNWYWxpZE5hbWUmJnRoaXMuQWRkVG9OYW1lZENvbnRlbnRPbmx5KGUpfX0se2tleTpcIkFkZFRvTmFtZWRDb250ZW50T25seVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2suQXNzZXJ0VHlwZSh0LFQsXCJDYW4gb25seSBhZGQgUnVudGltZS5PYmplY3RzIHRvIGEgUnVudGltZS5Db250YWluZXJcIiksKG10KHQsVCkucGFyZW50PXRoaXMpLm5hbWVkQ29udGVudC5zZXQodC5uYW1lLHQpfX0se2tleTpcIkNvbnRlbnRBdFBhdGhcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6MCxyPTI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09bj9uOi0xOy0xPT1yJiYocj10Lmxlbmd0aCk7dmFyIGE9bmV3IFY7YS5hcHByb3hpbWF0ZT0hMTtmb3IodmFyIHM9dGhpcyxvPXRoaXMsdT1pO3U8cjsrK3Upe3ZhciBsPXQuR2V0Q29tcG9uZW50KHUpO2lmKG51bGw9PXMpe2EuYXBwcm94aW1hdGU9ITA7YnJlYWt9dmFyIGg9cy5Db250ZW50V2l0aFBhdGhDb21wb25lbnQobCk7aWYobnVsbD09aCl7YS5hcHByb3hpbWF0ZT0hMDticmVha31zPXl0KG89aCxnKX1yZXR1cm4gYS5vYmo9byxhfX0se2tleTpcIkluc2VydENvbnRlbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKCh0aGlzLmNvbnRlbnRbZV09dCkucGFyZW50KXRocm93IG5ldyBFcnJvcihcImNvbnRlbnQgaXMgYWxyZWFkeSBpbiBcIit0LnBhcmVudCk7KHQucGFyZW50PXRoaXMpLlRyeUFkZE5hbWVkQ29udGVudCh0KX19LHtrZXk6XCJBZGRDb250ZW50c09mQ29udGFpbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50PXRoaXMuY29udGVudC5jb25jYXQodC5jb250ZW50KTt2YXIgZSxuPXB0KHQuY29udGVudCk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaT1lLnZhbHVlOyhpLnBhcmVudD10aGlzKS5UcnlBZGROYW1lZENvbnRlbnQoaSl9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfX19LHtrZXk6XCJDb250ZW50V2l0aFBhdGhDb21wb25lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0LmlzSW5kZXgpcmV0dXJuIDA8PXQuaW5kZXgmJnQuaW5kZXg8dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdC5pbmRleF06bnVsbDtpZih0LmlzUGFyZW50KXJldHVybiB0aGlzLnBhcmVudDtpZihudWxsPT09dC5uYW1lKXJldHVybiBndChcImNvbXBvbmVudC5uYW1lXCIpO3ZhciBlPXcodGhpcy5uYW1lZENvbnRlbnQsdC5uYW1lLG51bGwpO3JldHVybiBlLmV4aXN0cz9tdChlLnJlc3VsdCxUKTpudWxsfX0se2tleTpcIkJ1aWxkU3RyaW5nT2ZIaWVyYXJjaHlcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk7aWYoMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gaT1uZXcgU3QsdGhpcy5CdWlsZFN0cmluZ09mSGllcmFyY2h5KGksMCxudWxsKSxpLnRvU3RyaW5nKCk7aT10O3ZhciByPWUsYT1uO2Z1bmN0aW9uIHMoKXtmb3IodmFyIHQ9MDt0PDQqcjsrK3QpaS5BcHBlbmQoXCIgXCIpfXMoKSxpLkFwcGVuZChcIltcIiksdGhpcy5oYXNWYWxpZE5hbWUmJmkuQXBwZW5kRm9ybWF0KFwiICh7MH0pXCIsdGhpcy5uYW1lKSx0aGlzPT1hJiZpLkFwcGVuZChcIiAgPC0tLVwiKSxpLkFwcGVuZExpbmUoKSxyKys7Zm9yKHZhciBvPTA7bzx0aGlzLmNvbnRlbnQubGVuZ3RoOysrbyl7dmFyIHU9dGhpcy5jb250ZW50W29dO3UgaW5zdGFuY2VvZiBnP3UuQnVpbGRTdHJpbmdPZkhpZXJhcmNoeShpLHIsYSk6KHMoKSx1IGluc3RhbmNlb2Ygd3Q/KGkuQXBwZW5kKCdcIicpLGkuQXBwZW5kKHUudG9TdHJpbmcoKS5yZXBsYWNlKFwiXFxuXCIsXCJcXFxcblwiKSksaS5BcHBlbmQoJ1wiJykpOmkuQXBwZW5kKHUudG9TdHJpbmcoKSkpLG8hPXRoaXMuY29udGVudC5sZW5ndGgtMSYmaS5BcHBlbmQoXCIsXCIpLHUgaW5zdGFuY2VvZiBnfHx1IT1hfHxpLkFwcGVuZChcIiAgPC0tLVwiKSxpLkFwcGVuZExpbmUoKX12YXIgbCxoPW5ldyBNYXAsYz1wdCh0aGlzLm5hbWVkQ29udGVudCk7dHJ5e2ZvcihjLnMoKTshKGw9Yy5uKCkpLmRvbmU7KXt2YXIgZj1TKGwudmFsdWUsMiksdj1mWzBdLGQ9ZlsxXTswPD10aGlzLmNvbnRlbnQuaW5kZXhPZihtdChkLFQpKXx8aC5zZXQodixkKX19Y2F0Y2godCl7Yy5lKHQpfWZpbmFsbHl7Yy5mKCl9aWYoMDxoLnNpemUpe3MoKSxpLkFwcGVuZExpbmUoXCItLSBuYW1lZDogLS1cIik7dmFyIHAseT1wdChoKTt0cnl7Zm9yKHkucygpOyEocD15Lm4oKSkuZG9uZTspe3ZhciBtPVMocC52YWx1ZSwyKVsxXTtrLkFzc2VydFR5cGUobSxnLFwiQ2FuIG9ubHkgcHJpbnQgb3V0IG5hbWVkIENvbnRhaW5lcnNcIiksbS5CdWlsZFN0cmluZ09mSGllcmFyY2h5KGkscixhKSxpLkFwcGVuZExpbmUoKX19Y2F0Y2godCl7eS5lKHQpfWZpbmFsbHl7eS5mKCl9fXItLSxzKCksaS5BcHBlbmQoXCJdXCIpfX0se2tleTpcImhhc1ZhbGlkTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLm5hbWUmJjA8dGhpcy5uYW1lLmxlbmd0aH19LHtrZXk6XCJjb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLkFkZENvbnRlbnQodCl9fSx7a2V5OlwibmFtZWRPbmx5Q29udGVudFwiLGdldDpmdW5jdGlvbigpe3ZhciB0LGU9bmV3IE1hcCxuPXB0KHRoaXMubmFtZWRDb250ZW50KTt0cnl7Zm9yKG4ucygpOyEodD1uLm4oKSkuZG9uZTspe3ZhciBpPVModC52YWx1ZSwyKSxyPWlbMF0sYT1tdChpWzFdLFQpO2Uuc2V0KHIsYSl9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfXZhciBzLG89cHQodGhpcy5jb250ZW50KTt0cnl7Zm9yKG8ucygpOyEocz1vLm4oKSkuZG9uZTspe3ZhciB1PUMocy52YWx1ZSk7bnVsbCE9dSYmdS5oYXNWYWxpZE5hbWUmJmUuZGVsZXRlKHUubmFtZSl9fWNhdGNoKHQpe28uZSh0KX1maW5hbGx5e28uZigpfXJldHVybiAwPT1lLnNpemUmJihlPW51bGwpLGV9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm5hbWVkT25seUNvbnRlbnQ7aWYobnVsbCE9ZSl7dmFyIG4saT1wdChlKTt0cnl7Zm9yKGkucygpOyEobj1pLm4oKSkuZG9uZTspe3ZhciByPVMobi52YWx1ZSwxKVswXTt0aGlzLm5hbWVkQ29udGVudC5kZWxldGUocil9fWNhdGNoKHQpe2kuZSh0KX1maW5hbGx5e2kuZigpfX1pZihudWxsIT10KXt2YXIgYSxzPXB0KHQpO3RyeXtmb3Iocy5zKCk7IShhPXMubigpKS5kb25lOyl7dmFyIG89QyhTKGEudmFsdWUsMilbMV0pO251bGwhPW8mJnRoaXMuQWRkVG9OYW1lZENvbnRlbnRPbmx5KG8pfX1jYXRjaCh0KXtzLmUodCl9ZmluYWxseXtzLmYoKX19fX0se2tleTpcImNvdW50RmxhZ3NcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiB0aGlzLnZpc2l0c1Nob3VsZEJlQ291bnRlZCYmKHR8PWcuQ291bnRGbGFncy5WaXNpdHMpLHRoaXMudHVybkluZGV4U2hvdWxkQmVDb3VudGVkJiYodHw9Zy5Db3VudEZsYWdzLlR1cm5zKSx0aGlzLmNvdW50aW5nQXRTdGFydE9ubHkmJih0fD1nLkNvdW50RmxhZ3MuQ291bnRTdGFydE9ubHkpLHQ9PWcuQ291bnRGbGFncy5Db3VudFN0YXJ0T25seSYmKHQ9MCksdH0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXQ7MDwoZSZnLkNvdW50RmxhZ3MuVmlzaXRzKSYmKHRoaXMudmlzaXRzU2hvdWxkQmVDb3VudGVkPSEwKSwwPChlJmcuQ291bnRGbGFncy5UdXJucykmJih0aGlzLnR1cm5JbmRleFNob3VsZEJlQ291bnRlZD0hMCksMDwoZSZnLkNvdW50RmxhZ3MuQ291bnRTdGFydE9ubHkpJiYodGhpcy5jb3VudGluZ0F0U3RhcnRPbmx5PSEwKX19LHtrZXk6XCJwYXRoVG9GaXJzdExlYWZDb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXRoaXMuX3BhdGhUb0ZpcnN0TGVhZkNvbnRlbnQmJih0aGlzLl9wYXRoVG9GaXJzdExlYWZDb250ZW50PXRoaXMucGF0aC5QYXRoQnlBcHBlbmRpbmdQYXRoKHRoaXMuaW50ZXJuYWxQYXRoVG9GaXJzdExlYWZDb250ZW50KSksdGhpcy5fcGF0aFRvRmlyc3RMZWFmQ29udGVudH19LHtrZXk6XCJpbnRlcm5hbFBhdGhUb0ZpcnN0TGVhZkNvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT10aGlzO2UgaW5zdGFuY2VvZiBnOykwPGUuY29udGVudC5sZW5ndGgmJih0LnB1c2gobmV3IEUuQ29tcG9uZW50KDApKSxlPWUuY29udGVudFswXSk7cmV0dXJuIG5ldyBFKHQpfX1dKSxnfSgpO1c9RXQ9RXR8fHt9LChGPVcuQ291bnRGbGFnc3x8KFcuQ291bnRGbGFncz17fSkpW0YuVmlzaXRzPTFdPVwiVmlzaXRzXCIsRltGLlR1cm5zPTJdPVwiVHVybnNcIixGW0YuQ291bnRTdGFydE9ubHk9NF09XCJDb3VudFN0YXJ0T25seVwiO3ZhciBSLEwsTnQsaixEPWZ1bmN0aW9uKCl7cyhlLFQpO3ZhciB0PXYoZSk7ZnVuY3Rpb24gZSgpe3JldHVybiBtKHRoaXMsZSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGEoZSxbe2tleTpcInRvU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cIkdsdWVcIn19XSksZX0oKSxBdD1mdW5jdGlvbigpe3MoaSxUKTt2YXIgbj12KGkpO2Z1bmN0aW9uIGkoKXt2YXIgdCxlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTppLkNvbW1hbmRUeXBlLk5vdFNldDtyZXR1cm4gbSh0aGlzLGkpLCh0PW4uY2FsbCh0aGlzKSkuX2NvbW1hbmRUeXBlPWUsdH1yZXR1cm4gYShpLFt7a2V5OlwiQ29weVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpKHRoaXMuY29tbWFuZFR5cGUpfX0se2tleTpcInRvU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21tYW5kVHlwZS50b1N0cmluZygpfX0se2tleTpcImNvbW1hbmRUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbW1hbmRUeXBlfX1dLFt7a2V5OlwiRXZhbFN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5FdmFsU3RhcnQpfX0se2tleTpcIkV2YWxPdXRwdXRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLkV2YWxPdXRwdXQpfX0se2tleTpcIkV2YWxFbmRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLkV2YWxFbmQpfX0se2tleTpcIkR1cGxpY2F0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpKGkuQ29tbWFuZFR5cGUuRHVwbGljYXRlKX19LHtrZXk6XCJQb3BFdmFsdWF0ZWRWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpKGkuQ29tbWFuZFR5cGUuUG9wRXZhbHVhdGVkVmFsdWUpfX0se2tleTpcIlBvcEZ1bmN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5Qb3BGdW5jdGlvbil9fSx7a2V5OlwiUG9wVHVubmVsXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5Qb3BUdW5uZWwpfX0se2tleTpcIkJlZ2luU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5CZWdpblN0cmluZyl9fSx7a2V5OlwiRW5kU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5FbmRTdHJpbmcpfX0se2tleTpcIk5vT3BcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLk5vT3ApfX0se2tleTpcIkNob2ljZUNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5DaG9pY2VDb3VudCl9fSx7a2V5OlwiVHVybnNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLlR1cm5zKX19LHtrZXk6XCJUdXJuc1NpbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5UdXJuc1NpbmNlKX19LHtrZXk6XCJSZWFkQ291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLlJlYWRDb3VudCl9fSx7a2V5OlwiUmFuZG9tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5SYW5kb20pfX0se2tleTpcIlNlZWRSYW5kb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLlNlZWRSYW5kb20pfX0se2tleTpcIlZpc2l0SW5kZXhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLlZpc2l0SW5kZXgpfX0se2tleTpcIlNlcXVlbmNlU2h1ZmZsZUluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5TZXF1ZW5jZVNodWZmbGVJbmRleCl9fSx7a2V5OlwiU3RhcnRUaHJlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLlN0YXJ0VGhyZWFkKX19LHtrZXk6XCJEb25lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkoaS5Db21tYW5kVHlwZS5Eb25lKX19LHtrZXk6XCJFbmRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLkVuZCl9fSx7a2V5OlwiTGlzdEZyb21JbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLkxpc3RGcm9tSW50KX19LHtrZXk6XCJMaXN0UmFuZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaShpLkNvbW1hbmRUeXBlLkxpc3RSYW5nZSl9fSx7a2V5OlwiTGlzdFJhbmRvbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpKGkuQ29tbWFuZFR5cGUuTGlzdFJhbmRvbSl9fV0pLGl9KCk7Uj1BdD1BdHx8e30sKEw9Ui5Db21tYW5kVHlwZXx8KFIuQ29tbWFuZFR5cGU9e30pKVtMLk5vdFNldD0tMV09XCJOb3RTZXRcIixMW0wuRXZhbFN0YXJ0PTBdPVwiRXZhbFN0YXJ0XCIsTFtMLkV2YWxPdXRwdXQ9MV09XCJFdmFsT3V0cHV0XCIsTFtMLkV2YWxFbmQ9Ml09XCJFdmFsRW5kXCIsTFtMLkR1cGxpY2F0ZT0zXT1cIkR1cGxpY2F0ZVwiLExbTC5Qb3BFdmFsdWF0ZWRWYWx1ZT00XT1cIlBvcEV2YWx1YXRlZFZhbHVlXCIsTFtMLlBvcEZ1bmN0aW9uPTVdPVwiUG9wRnVuY3Rpb25cIixMW0wuUG9wVHVubmVsPTZdPVwiUG9wVHVubmVsXCIsTFtMLkJlZ2luU3RyaW5nPTddPVwiQmVnaW5TdHJpbmdcIixMW0wuRW5kU3RyaW5nPThdPVwiRW5kU3RyaW5nXCIsTFtMLk5vT3A9OV09XCJOb09wXCIsTFtMLkNob2ljZUNvdW50PTEwXT1cIkNob2ljZUNvdW50XCIsTFtMLlR1cm5zPTExXT1cIlR1cm5zXCIsTFtMLlR1cm5zU2luY2U9MTJdPVwiVHVybnNTaW5jZVwiLExbTC5SYW5kb209MTNdPVwiUmFuZG9tXCIsTFtMLlNlZWRSYW5kb209MTRdPVwiU2VlZFJhbmRvbVwiLExbTC5WaXNpdEluZGV4PTE1XT1cIlZpc2l0SW5kZXhcIixMW0wuU2VxdWVuY2VTaHVmZmxlSW5kZXg9MTZdPVwiU2VxdWVuY2VTaHVmZmxlSW5kZXhcIixMW0wuU3RhcnRUaHJlYWQ9MTddPVwiU3RhcnRUaHJlYWRcIixMW0wuRG9uZT0xOF09XCJEb25lXCIsTFtMLkVuZD0xOV09XCJFbmRcIixMW0wuTGlzdEZyb21JbnQ9MjBdPVwiTGlzdEZyb21JbnRcIixMW0wuTGlzdFJhbmdlPTIxXT1cIkxpc3RSYW5nZVwiLExbTC5MaXN0UmFuZG9tPTIyXT1cIkxpc3RSYW5kb21cIixMW0wuUmVhZENvdW50PTIzXT1cIlJlYWRDb3VudFwiLExbTC5UT1RBTF9WQUxVRVM9MjRdPVwiVE9UQUxfVkFMVUVTXCIsKGo9TnQ9TnR8fHt9KVtqLlR1bm5lbD0wXT1cIlR1bm5lbFwiLGpbai5GdW5jdGlvbj0xXT1cIkZ1bmN0aW9uXCIsaltqLkZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lPTJdPVwiRnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWVcIjt2YXIgeHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7bSh0aGlzLGUpLHRoaXMuY29udGFpbmVyPW51bGwsdGhpcy5pbmRleD0tMSwyPT09YXJndW1lbnRzLmxlbmd0aCYmKHRoaXMuY29udGFpbmVyPWFyZ3VtZW50c1swXSx0aGlzLmluZGV4PWFyZ3VtZW50c1sxXSl9cmV0dXJuIGEoZSxbe2tleTpcIlJlc29sdmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4PDA/dGhpcy5jb250YWluZXI6bnVsbD09dGhpcy5jb250YWluZXI/bnVsbDowPT10aGlzLmNvbnRhaW5lci5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRhaW5lcjp0aGlzLmluZGV4Pj10aGlzLmNvbnRhaW5lci5jb250ZW50Lmxlbmd0aD9udWxsOnRoaXMuY29udGFpbmVyLmNvbnRlbnRbdGhpcy5pbmRleF19fSx7a2V5OlwidG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lcj9cIkluayBQb2ludGVyIC0+IFwiK3RoaXMuY29udGFpbmVyLnBhdGgudG9TdHJpbmcoKStcIiAtLSBpbmRleCBcIit0aGlzLmluZGV4OlwiSW5rIFBvaW50ZXIgKG51bGwpXCJ9fSx7a2V5OlwiY29weVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMuY29udGFpbmVyLHRoaXMuaW5kZXgpfX0se2tleTpcImlzTnVsbFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT10aGlzLmNvbnRhaW5lcn19LHtrZXk6XCJwYXRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNOdWxsP251bGw6MDw9dGhpcy5pbmRleD90aGlzLmNvbnRhaW5lci5wYXRoLlBhdGhCeUFwcGVuZGluZ0NvbXBvbmVudChuZXcgRS5Db21wb25lbnQodGhpcy5pbmRleCkpOnRoaXMuY29udGFpbmVyLnBhdGh9fV0sW3trZXk6XCJTdGFydE9mXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQsMCl9fSx7a2V5OlwiTnVsbFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBuZXcgZShudWxsLC0xKX19XSksZX0oKSxJdD1mdW5jdGlvbigpe3MoaSxUKTt2YXIgbj12KGkpO2Z1bmN0aW9uIGkodCl7dmFyIGU7cmV0dXJuIG0odGhpcyxpKSwoZT1uLmNhbGwodGhpcykpLl90YXJnZXRQYXRoPW51bGwsZS5fdGFyZ2V0UG9pbnRlcj14dC5OdWxsLGUudmFyaWFibGVEaXZlcnROYW1lPW51bGwsZS5wdXNoZXNUb1N0YWNrPSExLGUuc3RhY2tQdXNoVHlwZT0wLGUuaXNFeHRlcm5hbD0hMSxlLmV4dGVybmFsQXJncz0wLGUuaXNDb25kaXRpb25hbD0hMSxlLnB1c2hlc1RvU3RhY2s9ITEsdm9pZCAwIT09dCYmKGUucHVzaGVzVG9TdGFjaz0hMCxlLnN0YWNrUHVzaFR5cGU9dCksZX1yZXR1cm4gYShpLFt7a2V5OlwiRXF1YWxzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gZSBpbnN0YW5jZW9mIGkmJnRoaXMuaGFzVmFyaWFibGVUYXJnZXQ9PWUuaGFzVmFyaWFibGVUYXJnZXQmJih0aGlzLmhhc1ZhcmlhYmxlVGFyZ2V0P3RoaXMudmFyaWFibGVEaXZlcnROYW1lPT1lLnZhcmlhYmxlRGl2ZXJ0TmFtZTpudWxsPT09dGhpcy50YXJnZXRQYXRoP2d0KFwidGhpcy50YXJnZXRQYXRoXCIpOnRoaXMudGFyZ2V0UGF0aC5FcXVhbHMoZS50YXJnZXRQYXRoKSl9fSx7a2V5OlwidG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaGFzVmFyaWFibGVUYXJnZXQpcmV0dXJuXCJEaXZlcnQodmFyaWFibGU6IFwiK3RoaXMudmFyaWFibGVEaXZlcnROYW1lK1wiKVwiO2lmKG51bGw9PXRoaXMudGFyZ2V0UGF0aClyZXR1cm5cIkRpdmVydChudWxsKVwiO3ZhciB0PW5ldyBTdCxlPXRoaXMudGFyZ2V0UGF0aC50b1N0cmluZygpO3JldHVybiB0LkFwcGVuZChcIkRpdmVydFwiKSx0aGlzLmlzQ29uZGl0aW9uYWwmJnQuQXBwZW5kKFwiP1wiKSx0aGlzLnB1c2hlc1RvU3RhY2smJih0aGlzLnN0YWNrUHVzaFR5cGU9PU50LkZ1bmN0aW9uP3QuQXBwZW5kKFwiIGZ1bmN0aW9uXCIpOnQuQXBwZW5kKFwiIHR1bm5lbFwiKSksdC5BcHBlbmQoXCIgLT4gXCIpLHQuQXBwZW5kKHRoaXMudGFyZ2V0UGF0aFN0cmluZyksdC5BcHBlbmQoXCIgKFwiKSx0LkFwcGVuZChlKSx0LkFwcGVuZChcIilcIiksdC50b1N0cmluZygpfX0se2tleTpcInRhcmdldFBhdGhcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gbnVsbD09dGhpcy5fdGFyZ2V0UGF0aHx8IXRoaXMuX3RhcmdldFBhdGguaXNSZWxhdGl2ZXx8KHQ9dGhpcy50YXJnZXRQb2ludGVyLlJlc29sdmUoKSkmJih0aGlzLl90YXJnZXRQYXRoPXQucGF0aCksdGhpcy5fdGFyZ2V0UGF0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RhcmdldFBhdGg9dCx0aGlzLl90YXJnZXRQb2ludGVyPXh0Lk51bGx9fSx7a2V5OlwidGFyZ2V0UG9pbnRlclwiLGdldDpmdW5jdGlvbigpe2lmKHRoaXMuX3RhcmdldFBvaW50ZXIuaXNOdWxsKXt2YXIgdD10aGlzLlJlc29sdmVQYXRoKHRoaXMuX3RhcmdldFBhdGgpLm9iajtpZihudWxsPT09dGhpcy5fdGFyZ2V0UGF0aClyZXR1cm4gZ3QoXCJ0aGlzLl90YXJnZXRQYXRoXCIpO2lmKG51bGw9PT10aGlzLl90YXJnZXRQYXRoLmxhc3RDb21wb25lbnQpcmV0dXJuIGd0KFwidGhpcy5fdGFyZ2V0UGF0aC5sYXN0Q29tcG9uZW50XCIpO2lmKHRoaXMuX3RhcmdldFBhdGgubGFzdENvbXBvbmVudC5pc0luZGV4KXtpZihudWxsPT09dClyZXR1cm4gZ3QoXCJ0YXJnZXRPYmpcIik7dGhpcy5fdGFyZ2V0UG9pbnRlci5jb250YWluZXI9dC5wYXJlbnQgaW5zdGFuY2VvZiBFdD90LnBhcmVudDpudWxsLHRoaXMuX3RhcmdldFBvaW50ZXIuaW5kZXg9dGhpcy5fdGFyZ2V0UGF0aC5sYXN0Q29tcG9uZW50LmluZGV4fWVsc2UgdGhpcy5fdGFyZ2V0UG9pbnRlcj14dC5TdGFydE9mKHQgaW5zdGFuY2VvZiBFdD90Om51bGwpfXJldHVybiB0aGlzLl90YXJnZXRQb2ludGVyLmNvcHkoKX19LHtrZXk6XCJ0YXJnZXRQYXRoU3RyaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXRoaXMudGFyZ2V0UGF0aD9udWxsOnRoaXMuQ29tcGFjdFBhdGhTdHJpbmcodGhpcy50YXJnZXRQYXRoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMudGFyZ2V0UGF0aD1udWxsPT10P251bGw6bmV3IEUodCl9fSx7a2V5OlwiaGFzVmFyaWFibGVUYXJnZXRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy52YXJpYWJsZURpdmVydE5hbWV9fV0pLGl9KCksRz1mdW5jdGlvbigpe3MoaSxUKTt2YXIgbj12KGkpO2Z1bmN0aW9uIGkoKXt2YXIgdCxlPSEoMDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF07cmV0dXJuIG0odGhpcyxpKSwodD1uLmNhbGwodGhpcykpLl9wYXRoT25DaG9pY2U9bnVsbCx0Lmhhc0NvbmRpdGlvbj0hMSx0Lmhhc1N0YXJ0Q29udGVudD0hMSx0Lmhhc0Nob2ljZU9ubHlDb250ZW50PSExLHQuaXNJbnZpc2libGVEZWZhdWx0PSExLHQub25jZU9ubHk9ITAsdC5vbmNlT25seT1lLHR9cmV0dXJuIGEoaSxbe2tleTpcInRvU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMucGF0aE9uQ2hvaWNlP2d0KFwiQ2hvaWNlUG9pbnQucGF0aE9uQ2hvaWNlXCIpOlwiQ2hvaWNlOiAtPiBcIit0aGlzLnBhdGhPbkNob2ljZS50b1N0cmluZygpfX0se2tleTpcInBhdGhPbkNob2ljZVwiLGdldDpmdW5jdGlvbigpe3ZhciB0O3JldHVybiBudWxsPT10aGlzLl9wYXRoT25DaG9pY2V8fCF0aGlzLl9wYXRoT25DaG9pY2UuaXNSZWxhdGl2ZXx8KHQ9dGhpcy5jaG9pY2VUYXJnZXQpJiYodGhpcy5fcGF0aE9uQ2hvaWNlPXQucGF0aCksdGhpcy5fcGF0aE9uQ2hvaWNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGF0aE9uQ2hvaWNlPXR9fSx7a2V5OlwiY2hvaWNlVGFyZ2V0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9wYXRoT25DaG9pY2U/Z3QoXCJDaG9pY2VQb2ludC5fcGF0aE9uQ2hvaWNlXCIpOnRoaXMuUmVzb2x2ZVBhdGgodGhpcy5fcGF0aE9uQ2hvaWNlKS5jb250YWluZXJ9fSx7a2V5OlwicGF0aFN0cmluZ09uQ2hvaWNlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnBhdGhPbkNob2ljZT9ndChcIkNob2ljZVBvaW50LnBhdGhPbkNob2ljZVwiKTp0aGlzLkNvbXBhY3RQYXRoU3RyaW5nKHRoaXMucGF0aE9uQ2hvaWNlKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMucGF0aE9uQ2hvaWNlPW5ldyBFKHQpfX0se2tleTpcImZsYWdzXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5oYXNDb25kaXRpb24mJih0fD0xKSx0aGlzLmhhc1N0YXJ0Q29udGVudCYmKHR8PTIpLHRoaXMuaGFzQ2hvaWNlT25seUNvbnRlbnQmJih0fD00KSx0aGlzLmlzSW52aXNpYmxlRGVmYXVsdCYmKHR8PTgpLHRoaXMub25jZU9ubHkmJih0fD0xNiksdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuaGFzQ29uZGl0aW9uPTA8KDEmdCksdGhpcy5oYXNTdGFydENvbnRlbnQ9MDwoMiZ0KSx0aGlzLmhhc0Nob2ljZU9ubHlDb250ZW50PTA8KDQmdCksdGhpcy5pc0ludmlzaWJsZURlZmF1bHQ9MDwoOCZ0KSx0aGlzLm9uY2VPbmx5PTA8KDE2JnQpfX1dKSxpfSgpLFd0PWZ1bmN0aW9uKCl7cyhpLFQpO3ZhciBuPXYoaSk7ZnVuY3Rpb24gaSgpe3ZhciB0LGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGw7cmV0dXJuIG0odGhpcyxpKSwodD1uLmNhbGwodGhpcykpLnBhdGhGb3JDb3VudD1udWxsLHQubmFtZT1lLHR9cmV0dXJuIGEoaSxbe2tleTpcInRvU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5uYW1lP1widmFyKFwiK3RoaXMubmFtZStcIilcIjpcInJlYWRfY291bnQoXCIrdGhpcy5wYXRoU3RyaW5nRm9yQ291bnQrXCIpXCJ9fSx7a2V5OlwiY29udGFpbmVyRm9yQ291bnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMucGF0aEZvckNvdW50P251bGw6dGhpcy5SZXNvbHZlUGF0aCh0aGlzLnBhdGhGb3JDb3VudCkuY29udGFpbmVyfX0se2tleTpcInBhdGhTdHJpbmdGb3JDb3VudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5wYXRoRm9yQ291bnQ/bnVsbDp0aGlzLkNvbXBhY3RQYXRoU3RyaW5nKHRoaXMucGF0aEZvckNvdW50KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMucGF0aEZvckNvdW50PW51bGw9PT10P251bGw6bmV3IEUodCl9fV0pLGl9KCksRnQ9ZnVuY3Rpb24oKXtzKHIsVCk7dmFyIGk9dihyKTtmdW5jdGlvbiByKHQsZSl7dmFyIG47cmV0dXJuIG0odGhpcyxyKSwobj1pLmNhbGwodGhpcykpLnZhcmlhYmxlTmFtZT10fHxudWxsLG4uaXNOZXdEZWNsYXJhdGlvbj0hIWUsbi5pc0dsb2JhbD0hMSxufXJldHVybiBhKHIsW3trZXk6XCJ0b1N0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJWYXJBc3NpZ24gdG8gXCIrdGhpcy52YXJpYWJsZU5hbWV9fV0pLHJ9KCksVnQ9ZnVuY3Rpb24oKXtzKGUsVCk7dmFyIHQ9dihlKTtmdW5jdGlvbiBlKCl7cmV0dXJuIG0odGhpcyxlKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gZX0oKSxSdD1mdW5jdGlvbigpe3MoZixUKTt2YXIgcj12KGYpO2Z1bmN0aW9uIGYoKXt2YXIgdCxlLG4saTtyZXR1cm4gbSh0aGlzLGYpLCh0PXIuY2FsbCh0aGlzKSkuX25hbWU9bnVsbCx0Ll9udW1iZXJPZlBhcmFtZXRlcnM9MCx0Ll9wcm90b3R5cGU9bnVsbCx0Ll9pc1Byb3RvdHlwZT0hMSx0Ll9vcGVyYXRpb25GdW5jcz1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoP2YuR2VuZXJhdGVOYXRpdmVGdW5jdGlvbnNJZk5lY2Vzc2FyeSgpOjE9PT1hcmd1bWVudHMubGVuZ3RoPyhlPWFyZ3VtZW50c1swXSxmLkdlbmVyYXRlTmF0aXZlRnVuY3Rpb25zSWZOZWNlc3NhcnkoKSx0Lm5hbWU9ZSk6Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSx0Ll9pc1Byb3RvdHlwZT0hMCx0Lm5hbWU9bix0Lm51bWJlck9mUGFyYW1ldGVycz1pKSx0fXJldHVybiBhKGYsW3trZXk6XCJDYWxsXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5fcHJvdG90eXBlKXJldHVybiB0aGlzLl9wcm90b3R5cGUuQ2FsbCh0KTtpZih0aGlzLm51bWJlck9mUGFyYW1ldGVycyE9dC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBudW1iZXIgb2YgcGFyYW1ldGVyc1wiKTt2YXIgZSxuPSExLGk9cHQodCk7dHJ5e2ZvcihpLnMoKTshKGU9aS5uKCkpLmRvbmU7KXt2YXIgcj1lLnZhbHVlO2lmKHIgaW5zdGFuY2VvZiBWdCl0aHJvdyBuZXcgYnQoJ0F0dGVtcHRpbmcgdG8gcGVyZm9ybSBvcGVyYXRpb24gb24gYSB2b2lkIHZhbHVlLiBEaWQgeW91IGZvcmdldCB0byBcInJldHVyblwiIGEgdmFsdWUgZnJvbSBhIGZ1bmN0aW9uIHlvdSBjYWxsZWQgaGVyZT8nKTtyIGluc3RhbmNlb2YgT3QmJihuPSEwKX19Y2F0Y2godCl7aS5lKHQpfWZpbmFsbHl7aS5mKCl9aWYoMj09dC5sZW5ndGgmJm4pcmV0dXJuIHRoaXMuQ2FsbEJpbmFyeUxpc3RPcGVyYXRpb24odCk7dmFyIGE9dGhpcy5Db2VyY2VWYWx1ZXNUb1NpbmdsZVR5cGUodCkscz1hWzBdLnZhbHVlVHlwZTtyZXR1cm4gcz09UC5JbnR8fHM9PVAuRmxvYXR8fHM9PVAuU3RyaW5nfHxzPT1QLkRpdmVydFRhcmdldHx8cz09UC5MaXN0P3RoaXMuQ2FsbFR5cGUoYSk6bnVsbH19LHtrZXk6XCJDYWxsVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW10KHRbMF0sX3QpLG49ZS52YWx1ZVR5cGUsaT1lLHI9dC5sZW5ndGg7aWYoMiE9ciYmMSE9cil0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIG51bWJlciBvZiBwYXJhbWV0ZXJzIHRvIE5hdGl2ZUZ1bmN0aW9uQ2FsbDogXCIrdC5sZW5ndGgpO2lmKG51bGw9PT10aGlzLl9vcGVyYXRpb25GdW5jcylyZXR1cm4gZ3QoXCJOYXRpdmVGdW5jdGlvbkNhbGwuX29wZXJhdGlvbkZ1bmNzXCIpO3ZhciBhPXRoaXMuX29wZXJhdGlvbkZ1bmNzLmdldChuKTtpZighYSl7dmFyIHM9UFtuXTt0aHJvdyBuZXcgYnQoXCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb24gXCIrdGhpcy5uYW1lK1wiIG9uIFwiK3MpfWlmKDI9PXIpe3ZhciBvPW10KHRbMV0sX3QpLHU9YTtpZihudWxsPT09aS52YWx1ZXx8bnVsbD09PW8udmFsdWUpcmV0dXJuIGd0KFwiTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGwgQmluYXJ5T3AgdmFsdWVzXCIpO3ZhciBsPXUoaS52YWx1ZSxvLnZhbHVlKTtyZXR1cm4gX3QuQ3JlYXRlKGwpfXZhciBoPWE7aWYobnVsbD09PWkudmFsdWUpcmV0dXJuIGd0KFwiTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGwgVW5hcnlPcCB2YWx1ZVwiKTt2YXIgYz1oKGkudmFsdWUpO3JldHVybiB0aGlzLm5hbWU9PT1mLkludD9fdC5DcmVhdGUoYyxQLkludCk6dGhpcy5uYW1lPT09Zi5GbG9hdD9fdC5DcmVhdGUoYyxQLkZsb2F0KTpfdC5DcmVhdGUoYyxlLnZhbHVlVHlwZSl9fSx7a2V5OlwiQ2FsbEJpbmFyeUxpc3RPcGVyYXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXtpZigoXCIrXCI9PXRoaXMubmFtZXx8XCItXCI9PXRoaXMubmFtZSkmJnRbMF1pbnN0YW5jZW9mIE90JiZ0WzFdaW5zdGFuY2VvZiBUdClyZXR1cm4gdGhpcy5DYWxsTGlzdEluY3JlbWVudE9wZXJhdGlvbih0KTt2YXIgZT1tdCh0WzBdLF90KSxuPW10KHRbMV0sX3QpO2lmKCEoXCImJlwiIT10aGlzLm5hbWUmJlwifHxcIiE9dGhpcy5uYW1lfHxlLnZhbHVlVHlwZT09UC5MaXN0JiZuLnZhbHVlVHlwZT09UC5MaXN0KSl7aWYobnVsbD09PXRoaXMuX29wZXJhdGlvbkZ1bmNzKXJldHVybiBndChcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5fb3BlcmF0aW9uRnVuY3NcIik7dmFyIGk9dGhpcy5fb3BlcmF0aW9uRnVuY3MuZ2V0KFAuSW50KTtpZihudWxsPT09aSlyZXR1cm4gZ3QoXCJOYXRpdmVGdW5jdGlvbkNhbGwuQ2FsbEJpbmFyeUxpc3RPcGVyYXRpb24gb3BcIik7dmFyIHI9aShlLmlzVHJ1dGh5PzE6MCxuLmlzVHJ1dGh5PzE6MCk7cmV0dXJuIG5ldyBUdChyKX1pZihlLnZhbHVlVHlwZT09UC5MaXN0JiZuLnZhbHVlVHlwZT09UC5MaXN0KXJldHVybiB0aGlzLkNhbGxUeXBlKFtlLG5dKTt0aHJvdyBuZXcgYnQoXCJDYW4gbm90IGNhbGwgdXNlIFwiK3RoaXMubmFtZStcIiBvcGVyYXRpb24gb24gXCIrUFtlLnZhbHVlVHlwZV0rXCIgYW5kIFwiK1Bbbi52YWx1ZVR5cGVdKX19LHtrZXk6XCJDYWxsTGlzdEluY3JlbWVudE9wZXJhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW10KHRbMF0sT3QpLG49bXQodFsxXSxUdCksaT1uZXcgQ3Q7aWYobnVsbD09PWUudmFsdWUpcmV0dXJuIGd0KFwiTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGxMaXN0SW5jcmVtZW50T3BlcmF0aW9uIGxpc3RWYWwudmFsdWVcIik7dmFyIHIsYT1wdChlLnZhbHVlKTt0cnl7Zm9yKGEucygpOyEocj1hLm4oKSkuZG9uZTspe3ZhciBzPVMoci52YWx1ZSwyKSxvPXNbMF0sdT1zWzFdLGw9a3QuZnJvbVNlcmlhbGl6ZWRLZXkobyk7aWYobnVsbD09PXRoaXMuX29wZXJhdGlvbkZ1bmNzKXJldHVybiBndChcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5fb3BlcmF0aW9uRnVuY3NcIik7dmFyIGg9dGhpcy5fb3BlcmF0aW9uRnVuY3MuZ2V0KFAuSW50KTtpZihudWxsPT09bi52YWx1ZSlyZXR1cm4gZ3QoXCJOYXRpdmVGdW5jdGlvbkNhbGwuQ2FsbExpc3RJbmNyZW1lbnRPcGVyYXRpb24gaW50VmFsLnZhbHVlXCIpO3ZhciBjPWgodSxuLnZhbHVlKSxmPW51bGw7aWYobnVsbD09PWUudmFsdWUub3JpZ2lucylyZXR1cm4gZ3QoXCJOYXRpdmVGdW5jdGlvbkNhbGwuQ2FsbExpc3RJbmNyZW1lbnRPcGVyYXRpb24gbGlzdFZhbC52YWx1ZS5vcmlnaW5zXCIpO3ZhciB2LGQscD1wdChlLnZhbHVlLm9yaWdpbnMpO3RyeXtmb3IocC5zKCk7ISh2PXAubigpKS5kb25lOyl7dmFyIHk9di52YWx1ZTtpZih5Lm5hbWU9PWwub3JpZ2luTmFtZSl7Zj15O2JyZWFrfX19Y2F0Y2godCl7cC5lKHQpfWZpbmFsbHl7cC5mKCl9bnVsbD09Znx8KGQ9Zi5UcnlHZXRJdGVtV2l0aFZhbHVlKGMsa3QuTnVsbCkpLmV4aXN0cyYmaS5BZGQoZC5yZXN1bHQsYyl9fWNhdGNoKHQpe2EuZSh0KX1maW5hbGx5e2EuZigpfXJldHVybiBuZXcgT3QoaSl9fSx7a2V5OlwiQ29lcmNlVmFsdWVzVG9TaW5nbGVUeXBlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGUsbj1QLkludCxpPW51bGwscj1wdCh0KTt0cnl7Zm9yKHIucygpOyEoZT1yLm4oKSkuZG9uZTspe3ZhciBhPW10KGUudmFsdWUsX3QpO2EudmFsdWVUeXBlPm4mJihuPWEudmFsdWVUeXBlKSxhLnZhbHVlVHlwZT09UC5MaXN0JiYoaT15dChhLE90KSl9fWNhdGNoKHQpe3IuZSh0KX1maW5hbGx5e3IuZigpfXZhciBzPVtdO2lmKFBbbl09PVBbUC5MaXN0XSl7dmFyIG8sdT1wdCh0KTt0cnl7Zm9yKHUucygpOyEobz11Lm4oKSkuZG9uZTspe3ZhciBsPW10KG8udmFsdWUsX3QpO2lmKGwudmFsdWVUeXBlPT1QLkxpc3Qpcy5wdXNoKGwpO2Vsc2V7aWYobC52YWx1ZVR5cGUhPVAuSW50KXt2YXIgaD1QW2wudmFsdWVUeXBlXTt0aHJvdyBuZXcgYnQoXCJDYW5ub3QgbWl4IExpc3RzIGFuZCBcIitoK1wiIHZhbHVlcyBpbiB0aGlzIG9wZXJhdGlvblwiKX12YXIgYz1wYXJzZUludChsLnZhbHVlT2JqZWN0KTtpZihudWxsPT09KGk9bXQoaSxPdCkpLnZhbHVlKXJldHVybiBndChcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5Db2VyY2VWYWx1ZXNUb1NpbmdsZVR5cGUgc3BlY2lhbENhc2VMaXN0LnZhbHVlXCIpO3ZhciBmPWkudmFsdWUub3JpZ2luT2ZNYXhJdGVtO2lmKG51bGw9PT1mKXJldHVybiBndChcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5Db2VyY2VWYWx1ZXNUb1NpbmdsZVR5cGUgbGlzdFwiKTt2YXIgdj1mLlRyeUdldEl0ZW1XaXRoVmFsdWUoYyxrdC5OdWxsKTtpZighdi5leGlzdHMpdGhyb3cgbmV3IGJ0KFwiQ291bGQgbm90IGZpbmQgTGlzdCBpdGVtIHdpdGggdGhlIHZhbHVlIFwiK2MrXCIgaW4gXCIrZi5uYW1lKTt2YXIgZD1uZXcgT3Qodi5yZXN1bHQsYyk7cy5wdXNoKGQpfX19Y2F0Y2godCl7dS5lKHQpfWZpbmFsbHl7dS5mKCl9fWVsc2V7dmFyIHAseT1wdCh0KTt0cnl7Zm9yKHkucygpOyEocD15Lm4oKSkuZG9uZTspe3ZhciBtPW10KHAudmFsdWUsX3QpLkNhc3Qobik7cy5wdXNoKG0pfX1jYXRjaCh0KXt5LmUodCl9ZmluYWxseXt5LmYoKX19cmV0dXJuIHN9fSx7a2V5OlwiQWRkT3BGdW5jRm9yVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7bnVsbD09dGhpcy5fb3BlcmF0aW9uRnVuY3MmJih0aGlzLl9vcGVyYXRpb25GdW5jcz1uZXcgTWFwKSx0aGlzLl9vcGVyYXRpb25GdW5jcy5zZXQodCxlKX19LHtrZXk6XCJ0b1N0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuJ05hdGl2ZSBcIicrdGhpcy5uYW1lKydcIid9fSx7a2V5OlwibmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fbmFtZT9ndChcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5fbmFtZVwiKTp0aGlzLl9uYW1lfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbmFtZT10LHRoaXMuX2lzUHJvdG90eXBlfHwobnVsbD09PWYuX25hdGl2ZUZ1bmN0aW9ucz9ndChcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5fbmF0aXZlRnVuY3Rpb25zXCIpOnRoaXMuX3Byb3RvdHlwZT1mLl9uYXRpdmVGdW5jdGlvbnMuZ2V0KHRoaXMuX25hbWUpfHxudWxsKX19LHtrZXk6XCJudW1iZXJPZlBhcmFtZXRlcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvdG90eXBlP3RoaXMuX3Byb3RvdHlwZS5udW1iZXJPZlBhcmFtZXRlcnM6dGhpcy5fbnVtYmVyT2ZQYXJhbWV0ZXJzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbnVtYmVyT2ZQYXJhbWV0ZXJzPXR9fV0sW3trZXk6XCJDYWxsV2l0aE5hbWVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGYodCl9fSx7a2V5OlwiQ2FsbEV4aXN0c1dpdGhOYW1lXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuR2VuZXJhdGVOYXRpdmVGdW5jdGlvbnNJZk5lY2Vzc2FyeSgpLHRoaXMuX25hdGl2ZUZ1bmN0aW9ucy5nZXQodCl9fSx7a2V5OlwiSWRlbnRpdHlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdH19LHtrZXk6XCJHZW5lcmF0ZU5hdGl2ZUZ1bmN0aW9uc0lmTmVjZXNzYXJ5XCIsdmFsdWU6ZnVuY3Rpb24oKXtudWxsPT10aGlzLl9uYXRpdmVGdW5jdGlvbnMmJih0aGlzLl9uYXRpdmVGdW5jdGlvbnM9bmV3IE1hcCx0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuQWRkLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX0pLHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5TdWJ0cmFjdCxmdW5jdGlvbih0LGUpe3JldHVybiB0LWV9KSx0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuTXVsdGlwbHksZnVuY3Rpb24odCxlKXtyZXR1cm4gdCplfSksdGhpcy5BZGRJbnRCaW5hcnlPcCh0aGlzLkRpdmlkZSxmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmZsb29yKHQvZSl9KSx0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuTW9kLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQlZX0pLHRoaXMuQWRkSW50VW5hcnlPcCh0aGlzLk5lZ2F0ZSxmdW5jdGlvbih0KXtyZXR1cm4tdH0pLHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5FcXVhbCxmdW5jdGlvbih0LGUpe3JldHVybiB0PT1lPzE6MH0pLHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5HcmVhdGVyLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU8dD8xOjB9KSx0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuTGVzcyxmdW5jdGlvbih0LGUpe3JldHVybiB0PGU/MTowfSksdGhpcy5BZGRJbnRCaW5hcnlPcCh0aGlzLkdyZWF0ZXJUaGFuT3JFcXVhbHMsZnVuY3Rpb24odCxlKXtyZXR1cm4gZTw9dD8xOjB9KSx0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuTGVzc1RoYW5PckVxdWFscyxmdW5jdGlvbih0LGUpe3JldHVybiB0PD1lPzE6MH0pLHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5Ob3RFcXVhbHMsZnVuY3Rpb24odCxlKXtyZXR1cm4gdCE9ZT8xOjB9KSx0aGlzLkFkZEludFVuYXJ5T3AodGhpcy5Ob3QsZnVuY3Rpb24odCl7cmV0dXJuIDA9PXQ/MTowfSksdGhpcy5BZGRJbnRCaW5hcnlPcCh0aGlzLkFuZCxmdW5jdGlvbih0LGUpe3JldHVybiAwIT10JiYwIT1lPzE6MH0pLHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5PcixmdW5jdGlvbih0LGUpe3JldHVybiAwIT10fHwwIT1lPzE6MH0pLHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5NYXgsZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5tYXgodCxlKX0pLHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5NaW4sZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5taW4odCxlKX0pLHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5Qb3csZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5wb3codCxlKX0pLHRoaXMuQWRkSW50VW5hcnlPcCh0aGlzLkZsb29yLGYuSWRlbnRpdHkpLHRoaXMuQWRkSW50VW5hcnlPcCh0aGlzLkNlaWxpbmcsZi5JZGVudGl0eSksdGhpcy5BZGRJbnRVbmFyeU9wKHRoaXMuSW50LGYuSWRlbnRpdHkpLHRoaXMuQWRkSW50VW5hcnlPcCh0aGlzLkZsb2F0LGZ1bmN0aW9uKHQpe3JldHVybiB0fSksdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuQWRkLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX0pLHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLlN1YnRyYWN0LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQtZX0pLHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLk11bHRpcGx5LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQqZX0pLHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLkRpdmlkZSxmdW5jdGlvbih0LGUpe3JldHVybiB0L2V9KSx0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5Nb2QsZnVuY3Rpb24odCxlKXtyZXR1cm4gdCVlfSksdGhpcy5BZGRGbG9hdFVuYXJ5T3AodGhpcy5OZWdhdGUsZnVuY3Rpb24odCl7cmV0dXJuLXR9KSx0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5FcXVhbCxmdW5jdGlvbih0LGUpe3JldHVybiB0PT1lPzE6MH0pLHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLkdyZWF0ZXIsZnVuY3Rpb24odCxlKXtyZXR1cm4gZTx0PzE6MH0pLHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLkxlc3MsZnVuY3Rpb24odCxlKXtyZXR1cm4gdDxlPzE6MH0pLHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLkdyZWF0ZXJUaGFuT3JFcXVhbHMsZnVuY3Rpb24odCxlKXtyZXR1cm4gZTw9dD8xOjB9KSx0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5MZXNzVGhhbk9yRXF1YWxzLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ8PWU/MTowfSksdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuTm90RXF1YWxzLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQhPWU/MTowfSksdGhpcy5BZGRGbG9hdFVuYXJ5T3AodGhpcy5Ob3QsZnVuY3Rpb24odCl7cmV0dXJuIDA9PXQ/MTowfSksdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuQW5kLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIDAhPXQmJjAhPWU/MTowfSksdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuT3IsZnVuY3Rpb24odCxlKXtyZXR1cm4gMCE9dHx8MCE9ZT8xOjB9KSx0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5NYXgsZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5tYXgodCxlKX0pLHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLk1pbixmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1pbih0LGUpfSksdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuUG93LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGgucG93KHQsZSl9KSx0aGlzLkFkZEZsb2F0VW5hcnlPcCh0aGlzLkZsb29yLGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmZsb29yKHQpfSksdGhpcy5BZGRGbG9hdFVuYXJ5T3AodGhpcy5DZWlsaW5nLGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmNlaWwodCl9KSx0aGlzLkFkZEZsb2F0VW5hcnlPcCh0aGlzLkludCxmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5mbG9vcih0KX0pLHRoaXMuQWRkRmxvYXRVbmFyeU9wKHRoaXMuRmxvYXQsZi5JZGVudGl0eSksdGhpcy5BZGRTdHJpbmdCaW5hcnlPcCh0aGlzLkFkZCxmdW5jdGlvbih0LGUpe3JldHVybiB0K2V9KSx0aGlzLkFkZFN0cmluZ0JpbmFyeU9wKHRoaXMuRXF1YWwsZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWU/MTowfSksdGhpcy5BZGRTdHJpbmdCaW5hcnlPcCh0aGlzLk5vdEVxdWFscyxmdW5jdGlvbih0LGUpe3JldHVybiB0IT09ZT8xOjB9KSx0aGlzLkFkZFN0cmluZ0JpbmFyeU9wKHRoaXMuSGFzLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW5jbHVkZXMoZSk/MTowfSksdGhpcy5BZGRTdHJpbmdCaW5hcnlPcCh0aGlzLkhhc250LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW5jbHVkZXMoZSk/MDoxfSksdGhpcy5BZGRMaXN0QmluYXJ5T3AodGhpcy5BZGQsZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5VbmlvbihlKX0pLHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuU3VidHJhY3QsZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5XaXRob3V0KGUpfSksdGhpcy5BZGRMaXN0QmluYXJ5T3AodGhpcy5IYXMsZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5Db250YWlucyhlKT8xOjB9KSx0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLkhhc250LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuQ29udGFpbnMoZSk/MDoxfSksdGhpcy5BZGRMaXN0QmluYXJ5T3AodGhpcy5JbnRlcnNlY3QsZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5JbnRlcnNlY3QoZSl9KSx0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLkVxdWFsLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuRXF1YWxzKGUpPzE6MH0pLHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuR3JlYXRlcixmdW5jdGlvbih0LGUpe3JldHVybiB0LkdyZWF0ZXJUaGFuKGUpPzE6MH0pLHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuTGVzcyxmdW5jdGlvbih0LGUpe3JldHVybiB0Lkxlc3NUaGFuKGUpPzE6MH0pLHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuR3JlYXRlclRoYW5PckVxdWFscyxmdW5jdGlvbih0LGUpe3JldHVybiB0LkdyZWF0ZXJUaGFuT3JFcXVhbHMoZSk/MTowfSksdGhpcy5BZGRMaXN0QmluYXJ5T3AodGhpcy5MZXNzVGhhbk9yRXF1YWxzLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuTGVzc1RoYW5PckVxdWFscyhlKT8xOjB9KSx0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLk5vdEVxdWFscyxmdW5jdGlvbih0LGUpe3JldHVybiB0LkVxdWFscyhlKT8wOjF9KSx0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLkFuZCxmdW5jdGlvbih0LGUpe3JldHVybiAwPHQuQ291bnQmJjA8ZS5Db3VudD8xOjB9KSx0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLk9yLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA8dC5Db3VudHx8MDxlLkNvdW50PzE6MH0pLHRoaXMuQWRkTGlzdFVuYXJ5T3AodGhpcy5Ob3QsZnVuY3Rpb24odCl7cmV0dXJuIDA9PXQuQ291bnQ/MTowfSksdGhpcy5BZGRMaXN0VW5hcnlPcCh0aGlzLkludmVydCxmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnZlcnNlfSksdGhpcy5BZGRMaXN0VW5hcnlPcCh0aGlzLkFsbCxmdW5jdGlvbih0KXtyZXR1cm4gdC5hbGx9KSx0aGlzLkFkZExpc3RVbmFyeU9wKHRoaXMuTGlzdE1pbixmdW5jdGlvbih0KXtyZXR1cm4gdC5NaW5Bc0xpc3QoKX0pLHRoaXMuQWRkTGlzdFVuYXJ5T3AodGhpcy5MaXN0TWF4LGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1heEFzTGlzdCgpfSksdGhpcy5BZGRMaXN0VW5hcnlPcCh0aGlzLkNvdW50LGZ1bmN0aW9uKHQpe3JldHVybiB0LkNvdW50fSksdGhpcy5BZGRMaXN0VW5hcnlPcCh0aGlzLlZhbHVlT2ZMaXN0LGZ1bmN0aW9uKHQpe3JldHVybiB0Lm1heEl0ZW0uVmFsdWV9KSx0aGlzLkFkZE9wVG9OYXRpdmVGdW5jKHRoaXMuRXF1YWwsMixQLkRpdmVydFRhcmdldCxmdW5jdGlvbih0LGUpe3JldHVybiB0LkVxdWFscyhlKT8xOjB9KSx0aGlzLkFkZE9wVG9OYXRpdmVGdW5jKHRoaXMuTm90RXF1YWxzLDIsUC5EaXZlcnRUYXJnZXQsZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5FcXVhbHMoZSk/MDoxfSkpfX0se2tleTpcIkFkZE9wVG9OYXRpdmVGdW5jXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSl7aWYobnVsbD09PXRoaXMuX25hdGl2ZUZ1bmN0aW9ucylyZXR1cm4gZ3QoXCJOYXRpdmVGdW5jdGlvbkNhbGwuX25hdGl2ZUZ1bmN0aW9uc1wiKTt2YXIgcj10aGlzLl9uYXRpdmVGdW5jdGlvbnMuZ2V0KHQpO3J8fChyPW5ldyBmKHQsZSksdGhpcy5fbmF0aXZlRnVuY3Rpb25zLnNldCh0LHIpKSxyLkFkZE9wRnVuY0ZvclR5cGUobixpKX19LHtrZXk6XCJBZGRJbnRCaW5hcnlPcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5BZGRPcFRvTmF0aXZlRnVuYyh0LDIsUC5JbnQsZSl9fSx7a2V5OlwiQWRkSW50VW5hcnlPcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5BZGRPcFRvTmF0aXZlRnVuYyh0LDEsUC5JbnQsZSl9fSx7a2V5OlwiQWRkRmxvYXRCaW5hcnlPcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5BZGRPcFRvTmF0aXZlRnVuYyh0LDIsUC5GbG9hdCxlKX19LHtrZXk6XCJBZGRGbG9hdFVuYXJ5T3BcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuQWRkT3BUb05hdGl2ZUZ1bmModCwxLFAuRmxvYXQsZSl9fSx7a2V5OlwiQWRkU3RyaW5nQmluYXJ5T3BcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuQWRkT3BUb05hdGl2ZUZ1bmModCwyLFAuU3RyaW5nLGUpfX0se2tleTpcIkFkZExpc3RCaW5hcnlPcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5BZGRPcFRvTmF0aXZlRnVuYyh0LDIsUC5MaXN0LGUpfX0se2tleTpcIkFkZExpc3RVbmFyeU9wXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLkFkZE9wVG9OYXRpdmVGdW5jKHQsMSxQLkxpc3QsZSl9fV0pLGZ9KCk7UnQuQWRkPVwiK1wiLFJ0LlN1YnRyYWN0PVwiLVwiLFJ0LkRpdmlkZT1cIi9cIixSdC5NdWx0aXBseT1cIipcIixSdC5Nb2Q9XCIlXCIsUnQuTmVnYXRlPVwiX1wiLFJ0LkVxdWFsPVwiPT1cIixSdC5HcmVhdGVyPVwiPlwiLFJ0Lkxlc3M9XCI8XCIsUnQuR3JlYXRlclRoYW5PckVxdWFscz1cIj49XCIsUnQuTGVzc1RoYW5PckVxdWFscz1cIjw9XCIsUnQuTm90RXF1YWxzPVwiIT1cIixSdC5Ob3Q9XCIhXCIsUnQuQW5kPVwiJiZcIixSdC5Pcj1cInx8XCIsUnQuTWluPVwiTUlOXCIsUnQuTWF4PVwiTUFYXCIsUnQuUG93PVwiUE9XXCIsUnQuRmxvb3I9XCJGTE9PUlwiLFJ0LkNlaWxpbmc9XCJDRUlMSU5HXCIsUnQuSW50PVwiSU5UXCIsUnQuRmxvYXQ9XCJGTE9BVFwiLFJ0Lkhhcz1cIj9cIixSdC5IYXNudD1cIiE/XCIsUnQuSW50ZXJzZWN0PVwiXlwiLFJ0Lkxpc3RNaW49XCJMSVNUX01JTlwiLFJ0Lkxpc3RNYXg9XCJMSVNUX01BWFwiLFJ0LkFsbD1cIkxJU1RfQUxMXCIsUnQuQ291bnQ9XCJMSVNUX0NPVU5UXCIsUnQuVmFsdWVPZkxpc3Q9XCJMSVNUX1ZBTFVFXCIsUnQuSW52ZXJ0PVwiTElTVF9JTlZFUlRcIixSdC5fbmF0aXZlRnVuY3Rpb25zPW51bGw7dmFyIEI9ZnVuY3Rpb24oKXtzKGksVCk7dmFyIG49dihpKTtmdW5jdGlvbiBpKHQpe3ZhciBlO3JldHVybiBtKHRoaXMsaSksKGU9bi5jYWxsKHRoaXMpKS50ZXh0PXQudG9TdHJpbmcoKXx8XCJcIixlfXJldHVybiBhKGksW3trZXk6XCJ0b1N0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCIjIFwiK3RoaXMudGV4dH19XSksaX0oKSxNPWZ1bmN0aW9uKCl7cyhuLFQpO3ZhciBlPXYobik7ZnVuY3Rpb24gbigpe3ZhciB0O3JldHVybiBtKHRoaXMsbiksKHQ9ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLnRleHQ9XCJcIix0LmluZGV4PTAsdC50aHJlYWRBdEdlbmVyYXRpb249bnVsbCx0LnNvdXJjZVBhdGg9XCJcIix0LnRhcmdldFBhdGg9bnVsbCx0LmlzSW52aXNpYmxlRGVmYXVsdD0hMSx0Lm9yaWdpbmFsVGhyZWFkSW5kZXg9MCx0fXJldHVybiBhKG4sW3trZXk6XCJwYXRoU3RyaW5nT25DaG9pY2VcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMudGFyZ2V0UGF0aD9ndChcIkNob2ljZS50YXJnZXRQYXRoXCIpOnRoaXMudGFyZ2V0UGF0aC50b1N0cmluZygpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy50YXJnZXRQYXRoPW5ldyBFKHQpfX1dKSxufSgpLHE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQsZSl7bSh0aGlzLG4pLHRoaXMuX25hbWU9dHx8XCJcIix0aGlzLl9pdGVtcz1udWxsLHRoaXMuX2l0ZW1OYW1lVG9WYWx1ZXM9ZXx8bmV3IE1hcH1yZXR1cm4gYShuLFt7a2V5OlwiVmFsdWVGb3JJdGVtXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoIXQuaXRlbU5hbWUpcmV0dXJuIDA7dmFyIGU9dGhpcy5faXRlbU5hbWVUb1ZhbHVlcy5nZXQodC5pdGVtTmFtZSk7cmV0dXJuIHZvaWQgMCE9PWU/ZTowfX0se2tleTpcIkNvbnRhaW5zSXRlbVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiEhdC5pdGVtTmFtZSYmKHQub3JpZ2luTmFtZT09dGhpcy5uYW1lJiZ0aGlzLl9pdGVtTmFtZVRvVmFsdWVzLmhhcyh0Lml0ZW1OYW1lKSl9fSx7a2V5OlwiQ29udGFpbnNJdGVtV2l0aE5hbWVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faXRlbU5hbWVUb1ZhbHVlcy5oYXModCl9fSx7a2V5OlwiVHJ5R2V0SXRlbVdpdGhWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLG49cHQodGhpcy5faXRlbU5hbWVUb1ZhbHVlcyk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaT1TKGUudmFsdWUsMikscj1pWzBdO2lmKGlbMV09PXQpcmV0dXJue3Jlc3VsdDpuZXcga3QodGhpcy5uYW1lLHIpLGV4aXN0czohMH19fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfXJldHVybntyZXN1bHQ6a3QuTnVsbCxleGlzdHM6ITF9fX0se2tleTpcIlRyeUdldFZhbHVlRm9ySXRlbVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCF0Lml0ZW1OYW1lKXJldHVybntyZXN1bHQ6MCxleGlzdHM6ITF9O3ZhciBlPXRoaXMuX2l0ZW1OYW1lVG9WYWx1ZXMuZ2V0KHQuaXRlbU5hbWUpO3JldHVybiBlP3tyZXN1bHQ6ZSxleGlzdHM6ITB9OntyZXN1bHQ6MCxleGlzdHM6ITF9fX0se2tleTpcIm5hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmFtZX19LHtrZXk6XCJpdGVtc1wiLGdldDpmdW5jdGlvbigpe2lmKG51bGw9PXRoaXMuX2l0ZW1zKXt0aGlzLl9pdGVtcz1uZXcgTWFwO3ZhciB0LGU9cHQodGhpcy5faXRlbU5hbWVUb1ZhbHVlcyk7dHJ5e2ZvcihlLnMoKTshKHQ9ZS5uKCkpLmRvbmU7KXt2YXIgbj1TKHQudmFsdWUsMiksaT1uWzBdLHI9blsxXSxhPW5ldyBrdCh0aGlzLm5hbWUsaSk7dGhpcy5faXRlbXMuc2V0KGEuc2VyaWFsaXplZCgpLHIpfX1jYXRjaCh0KXtlLmUodCl9ZmluYWxseXtlLmYoKX19cmV0dXJuIHRoaXMuX2l0ZW1zfX1dKSxufSgpLEo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBjKHQpe20odGhpcyxjKSx0aGlzLl9saXN0cz1uZXcgTWFwLHRoaXMuX2FsbFVuYW1iaWd1b3VzTGlzdFZhbHVlQ2FjaGU9bmV3IE1hcDt2YXIgZSxuPXB0KHQpO3RyeXtmb3Iobi5zKCk7IShlPW4ubigpKS5kb25lOyl7dmFyIGk9ZS52YWx1ZTt0aGlzLl9saXN0cy5zZXQoaS5uYW1lLGkpO3ZhciByLGE9cHQoaS5pdGVtcyk7dHJ5e2ZvcihhLnMoKTshKHI9YS5uKCkpLmRvbmU7KXt2YXIgcz1TKHIudmFsdWUsMiksbz1zWzBdLHU9c1sxXSxsPWt0LmZyb21TZXJpYWxpemVkS2V5KG8pLGg9bmV3IE90KGwsdSk7aWYoIWwuaXRlbU5hbWUpdGhyb3cgbmV3IEVycm9yKFwiaXRlbS5pdGVtTmFtZSBpcyBudWxsIG9yIHVuZGVmaW5lZC5cIik7dGhpcy5fYWxsVW5hbWJpZ3VvdXNMaXN0VmFsdWVDYWNoZS5zZXQobC5pdGVtTmFtZSxoKSx0aGlzLl9hbGxVbmFtYmlndW91c0xpc3RWYWx1ZUNhY2hlLnNldChsLmZ1bGxOYW1lLGgpfX1jYXRjaCh0KXthLmUodCl9ZmluYWxseXthLmYoKX19fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfX1yZXR1cm4gYShjLFt7a2V5OlwiVHJ5TGlzdEdldERlZmluaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKG51bGw9PT10KXJldHVybntyZXN1bHQ6ZSxleGlzdHM6ITF9O3ZhciBuPXRoaXMuX2xpc3RzLmdldCh0KTtyZXR1cm4gbj97cmVzdWx0Om4sZXhpc3RzOiEwfTp7cmVzdWx0OmUsZXhpc3RzOiExfX19LHtrZXk6XCJGaW5kU2luZ2xlSXRlbUxpc3RXaXRoTmFtZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXJldHVybiBndChcIm5hbWVcIik7dmFyIGU9dGhpcy5fYWxsVW5hbWJpZ3VvdXNMaXN0VmFsdWVDYWNoZS5nZXQodCk7cmV0dXJuIHZvaWQgMCE9PWU/ZTpudWxsfX0se2tleTpcImxpc3RzXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQsZT1bXSxuPXB0KHRoaXMuX2xpc3RzKTt0cnl7Zm9yKG4ucygpOyEodD1uLm4oKSkuZG9uZTspe3ZhciBpPVModC52YWx1ZSwyKVsxXTtlLnB1c2goaSl9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfXJldHVybiBlfX1dKSxjfSgpLEs9ZnVuY3Rpb24oKXtmdW5jdGlvbiBQKCl7bSh0aGlzLFApfXJldHVybiBhKFAsbnVsbCxbe2tleTpcIkpBcnJheVRvUnVudGltZU9iakxpc3RcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZSYmZSxpPXQubGVuZ3RoO24mJmktLTtmb3IodmFyIHI9W10sYT0wO2E8aTthKyspe3ZhciBzPXRbYV0sbz10aGlzLkpUb2tlblRvUnVudGltZU9iamVjdChzKTtpZihudWxsPT09bylyZXR1cm4gZ3QoXCJydW50aW1lT2JqXCIpO3IucHVzaChvKX1yZXR1cm4gcn19LHtrZXk6XCJXcml0ZURpY3Rpb25hcnlSdW50aW1lT2Jqc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dC5Xcml0ZU9iamVjdFN0YXJ0KCk7dmFyIG4saT1wdChlKTt0cnl7Zm9yKGkucygpOyEobj1pLm4oKSkuZG9uZTspe3ZhciByPVMobi52YWx1ZSwyKSxhPXJbMF0scz1yWzFdO3QuV3JpdGVQcm9wZXJ0eVN0YXJ0KGEpLHRoaXMuV3JpdGVSdW50aW1lT2JqZWN0KHQscyksdC5Xcml0ZVByb3BlcnR5RW5kKCl9fWNhdGNoKHQpe2kuZSh0KX1maW5hbGx5e2kuZigpfXQuV3JpdGVPYmplY3RFbmQoKX19LHtrZXk6XCJXcml0ZUxpc3RSdW50aW1lT2Jqc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dC5Xcml0ZUFycmF5U3RhcnQoKTt2YXIgbixpPXB0KGUpO3RyeXtmb3IoaS5zKCk7IShuPWkubigpKS5kb25lOyl7dmFyIHI9bi52YWx1ZTt0aGlzLldyaXRlUnVudGltZU9iamVjdCh0LHIpfX1jYXRjaCh0KXtpLmUodCl9ZmluYWxseXtpLmYoKX10LldyaXRlQXJyYXlFbmQoKX19LHtrZXk6XCJXcml0ZUludERpY3Rpb25hcnlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3QuV3JpdGVPYmplY3RTdGFydCgpO3ZhciBuLGk9cHQoZSk7dHJ5e2ZvcihpLnMoKTshKG49aS5uKCkpLmRvbmU7KXt2YXIgcj1TKG4udmFsdWUsMiksYT1yWzBdLHM9clsxXTt0LldyaXRlSW50UHJvcGVydHkoYSxzKX19Y2F0Y2godCl7aS5lKHQpfWZpbmFsbHl7aS5mKCl9dC5Xcml0ZU9iamVjdEVuZCgpfX0se2tleTpcIldyaXRlUnVudGltZU9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49eXQoZSxFdCk7aWYobil0aGlzLldyaXRlUnVudGltZUNvbnRhaW5lcih0LG4pO2Vsc2V7dmFyIGk9eXQoZSxJdCk7aWYoaSl7dmFyIHIsYT1cIi0+XCI7cmV0dXJuIGkuaXNFeHRlcm5hbD9hPVwieCgpXCI6aS5wdXNoZXNUb1N0YWNrJiYoaS5zdGFja1B1c2hUeXBlPT1OdC5GdW5jdGlvbj9hPVwiZigpXCI6aS5zdGFja1B1c2hUeXBlPT1OdC5UdW5uZWwmJihhPVwiLT50LT5cIikpLHI9aS5oYXNWYXJpYWJsZVRhcmdldD9pLnZhcmlhYmxlRGl2ZXJ0TmFtZTppLnRhcmdldFBhdGhTdHJpbmcsdC5Xcml0ZU9iamVjdFN0YXJ0KCksdC5Xcml0ZVByb3BlcnR5KGEsciksaS5oYXNWYXJpYWJsZVRhcmdldCYmdC5Xcml0ZVByb3BlcnR5KFwidmFyXCIsITApLGkuaXNDb25kaXRpb25hbCYmdC5Xcml0ZVByb3BlcnR5KFwiY1wiLCEwKSwwPGkuZXh0ZXJuYWxBcmdzJiZ0LldyaXRlSW50UHJvcGVydHkoXCJleEFyZ3NcIixpLmV4dGVybmFsQXJncyksdm9pZCB0LldyaXRlT2JqZWN0RW5kKCl9dmFyIHM9eXQoZSxHKTtpZihzKXJldHVybiB0LldyaXRlT2JqZWN0U3RhcnQoKSx0LldyaXRlUHJvcGVydHkoXCIqXCIscy5wYXRoU3RyaW5nT25DaG9pY2UpLHQuV3JpdGVJbnRQcm9wZXJ0eShcImZsZ1wiLHMuZmxhZ3MpLHZvaWQgdC5Xcml0ZU9iamVjdEVuZCgpO3ZhciBvPXl0KGUsVHQpO2lmKG8pdC5Xcml0ZUludChvLnZhbHVlKTtlbHNle3ZhciB1PXl0KGUseCk7aWYodSl0LldyaXRlRmxvYXQodS52YWx1ZSk7ZWxzZXt2YXIgbD15dChlLHd0KTtpZihsKWwuaXNOZXdsaW5lP3QuV3JpdGUoXCJcXG5cIiwhMSk6KHQuV3JpdGVTdHJpbmdTdGFydCgpLHQuV3JpdGVTdHJpbmdJbm5lcihcIl5cIiksdC5Xcml0ZVN0cmluZ0lubmVyKGwudmFsdWUpLHQuV3JpdGVTdHJpbmdFbmQoKSk7ZWxzZXt2YXIgaD15dChlLE90KTtpZihoKXRoaXMuV3JpdGVJbmtMaXN0KHQsaCk7ZWxzZXt2YXIgYz15dChlLFB0KTtpZihjKXJldHVybiB0LldyaXRlT2JqZWN0U3RhcnQoKSxudWxsPT09Yy52YWx1ZT9ndChcImRpdlRhcmdldFZhbC52YWx1ZVwiKToodC5Xcml0ZVByb3BlcnR5KFwiXi0+XCIsYy52YWx1ZS5jb21wb25lbnRzU3RyaW5nKSx2b2lkIHQuV3JpdGVPYmplY3RFbmQoKSk7dmFyIGY9eXQoZSxJKTtpZihmKXJldHVybiB0LldyaXRlT2JqZWN0U3RhcnQoKSx0LldyaXRlUHJvcGVydHkoXCJedmFyXCIsZi52YWx1ZSksdC5Xcml0ZUludFByb3BlcnR5KFwiY2lcIixmLmNvbnRleHRJbmRleCksdm9pZCB0LldyaXRlT2JqZWN0RW5kKCk7aWYoeXQoZSxEKSl0LldyaXRlKFwiPD5cIik7ZWxzZXt2YXIgdj15dChlLEF0KTtpZih2KXQuV3JpdGUoUC5fY29udHJvbENvbW1hbmROYW1lc1t2LmNvbW1hbmRUeXBlXSk7ZWxzZXt2YXIgZD15dChlLFJ0KTtpZihkKXt2YXIgcD1kLm5hbWU7cmV0dXJuXCJeXCI9PXAmJihwPVwiTF5cIiksdm9pZCB0LldyaXRlKHApfXZhciB5PXl0KGUsV3QpO2lmKHkpe3QuV3JpdGVPYmplY3RTdGFydCgpO3ZhciBtPXkucGF0aFN0cmluZ0ZvckNvdW50O3JldHVybiBudWxsIT1tP3QuV3JpdGVQcm9wZXJ0eShcIkNOVD9cIixtKTp0LldyaXRlUHJvcGVydHkoXCJWQVI/XCIseS5uYW1lKSx2b2lkIHQuV3JpdGVPYmplY3RFbmQoKX12YXIgZz15dChlLEZ0KTtpZihnKXt0LldyaXRlT2JqZWN0U3RhcnQoKTt2YXIgUz1nLmlzR2xvYmFsP1wiVkFSPVwiOlwidGVtcD1cIjtyZXR1cm4gdC5Xcml0ZVByb3BlcnR5KFMsZy52YXJpYWJsZU5hbWUpLGcuaXNOZXdEZWNsYXJhdGlvbnx8dC5Xcml0ZVByb3BlcnR5KFwicmVcIiwhMCksdm9pZCB0LldyaXRlT2JqZWN0RW5kKCl9aWYoeXQoZSxWdCkpdC5Xcml0ZShcInZvaWRcIik7ZWxzZXt2YXIgaz15dChlLEIpO2lmKGspcmV0dXJuIHQuV3JpdGVPYmplY3RTdGFydCgpLHQuV3JpdGVQcm9wZXJ0eShcIiNcIixrLnRleHQpLHZvaWQgdC5Xcml0ZU9iamVjdEVuZCgpO3ZhciBDPXl0KGUsTSk7aWYoIUMpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNvbnZlcnQgcnVudGltZSBvYmplY3QgdG8gSnNvbiB0b2tlbjogXCIrZSk7dGhpcy5Xcml0ZUNob2ljZSh0LEMpfX19fX19fX19fSx7a2V5OlwiSk9iamVjdFRvRGljdGlvbmFyeVJ1bnRpbWVPYmpzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IE1hcDtmb3IodmFyIG4gaW4gdClpZih0Lmhhc093blByb3BlcnR5KG4pKXt2YXIgaT10aGlzLkpUb2tlblRvUnVudGltZU9iamVjdCh0W25dKTtpZihudWxsPT09aSlyZXR1cm4gZ3QoXCJpbmtPYmplY3RcIik7ZS5zZXQobixpKX1yZXR1cm4gZX19LHtrZXk6XCJKT2JqZWN0VG9JbnREaWN0aW9uYXJ5XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IE1hcDtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiZlLnNldChuLHBhcnNlSW50KHRbbl0pKTtyZXR1cm4gZX19LHtrZXk6XCJKVG9rZW5Ub1J1bnRpbWVPYmplY3RcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihcIm51bWJlclwiPT10eXBlb2YgdCYmIWlzTmFOKHQpKXJldHVybiBfdC5DcmVhdGUodCk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe3ZhciBlPXQudG9TdHJpbmcoKSxuPWVbMF07aWYoXCJeXCI9PW4pcmV0dXJuIG5ldyB3dChlLnN1YnN0cmluZygxKSk7aWYoXCJcXG5cIj09biYmMT09ZS5sZW5ndGgpcmV0dXJuIG5ldyB3dChcIlxcblwiKTtpZihcIjw+XCI9PWUpcmV0dXJuIG5ldyBEO2Zvcih2YXIgaT0wO2k8UC5fY29udHJvbENvbW1hbmROYW1lcy5sZW5ndGg7KytpKXtpZihlPT1QLl9jb250cm9sQ29tbWFuZE5hbWVzW2ldKXJldHVybiBuZXcgQXQoaSl9aWYoXCJMXlwiPT1lJiYoZT1cIl5cIiksUnQuQ2FsbEV4aXN0c1dpdGhOYW1lKGUpKXJldHVybiBSdC5DYWxsV2l0aE5hbWUoZSk7aWYoXCItPi0+XCI9PWUpcmV0dXJuIEF0LlBvcFR1bm5lbCgpO2lmKFwifnJldFwiPT1lKXJldHVybiBBdC5Qb3BGdW5jdGlvbigpO2lmKFwidm9pZFwiPT1lKXJldHVybiBuZXcgVnR9aWYoXCJvYmplY3RcIj09PU8odCkmJiFBcnJheS5pc0FycmF5KHQpKXt2YXIgcixhPXQ7aWYoYVtcIl4tPlwiXSlyZXR1cm4gcj1hW1wiXi0+XCJdLG5ldyBQdChuZXcgRShyLnRvU3RyaW5nKCkpKTtpZihhW1wiXnZhclwiXSl7cj1hW1wiXnZhclwiXTt2YXIgcz1uZXcgSShyLnRvU3RyaW5nKCkpO3JldHVyblwiY2lcImluIGEmJihyPWEuY2kscy5jb250ZXh0SW5kZXg9cGFyc2VJbnQocikpLHN9dmFyIG89ITEsdT0hMSxsPU50LkZ1bmN0aW9uLGg9ITE7aWYoKHI9YVtcIi0+XCJdKT9vPSEwOihyPWFbXCJmKClcIl0pPyh1PW89ITAsbD1OdC5GdW5jdGlvbik6KHI9YVtcIi0+dC0+XCJdKT8odT1vPSEwLGw9TnQuVHVubmVsKToocj1hW1wieCgpXCJdKSYmKHU9IShoPW89ITApLGw9TnQuRnVuY3Rpb24pLG8pe3ZhciBjPW5ldyBJdDtjLnB1c2hlc1RvU3RhY2s9dSxjLnN0YWNrUHVzaFR5cGU9bCxjLmlzRXh0ZXJuYWw9aDt2YXIgZj1yLnRvU3RyaW5nKCk7cmV0dXJuKHI9YS52YXIpP2MudmFyaWFibGVEaXZlcnROYW1lPWY6Yy50YXJnZXRQYXRoU3RyaW5nPWYsYy5pc0NvbmRpdGlvbmFsPSEhYS5jLGgmJihyPWEuZXhBcmdzKSYmKGMuZXh0ZXJuYWxBcmdzPXBhcnNlSW50KHIpKSxjfWlmKHI9YVtcIipcIl0pe3ZhciB2PW5ldyBHO3JldHVybiB2LnBhdGhTdHJpbmdPbkNob2ljZT1yLnRvU3RyaW5nKCksKHI9YS5mbGcpJiYodi5mbGFncz1wYXJzZUludChyKSksdn1pZihyPWFbXCJWQVI/XCJdKXJldHVybiBuZXcgV3Qoci50b1N0cmluZygpKTtpZihyPWFbXCJDTlQ/XCJdKXt2YXIgZD1uZXcgV3Q7cmV0dXJuIGQucGF0aFN0cmluZ0ZvckNvdW50PXIudG9TdHJpbmcoKSxkfXZhciBwPSExLHk9ITE7aWYoKHI9YVtcIlZBUj1cIl0pP3k9cD0hMDoocj1hW1widGVtcD1cIl0pJiYoeT0hKHA9ITApKSxwKXt2YXIgbT1yLnRvU3RyaW5nKCksZz0hYS5yZSxTPW5ldyBGdChtLGcpO3JldHVybiBTLmlzR2xvYmFsPXksU31pZih2b2lkIDAhPT1hW1wiI1wiXSlyZXR1cm4gcj1hW1wiI1wiXSxuZXcgQihyLnRvU3RyaW5nKCkpO2lmKHI9YS5saXN0KXt2YXIgayxDLGIsXz1yLFQ9bmV3IEN0O2Zvcih2YXIgdyBpbihyPWEub3JpZ2lucykmJlQuU2V0SW5pdGlhbE9yaWdpbk5hbWVzKHIpLF8pe18uaGFzT3duUHJvcGVydHkodykmJihrPV9bd10sQz1uZXcga3QodyksYj1wYXJzZUludChrKSxULkFkZChDLGIpKX1yZXR1cm4gbmV3IE90KFQpfWlmKG51bGwhPWEub3JpZ2luYWxDaG9pY2VQYXRoKXJldHVybiB0aGlzLkpPYmplY3RUb0Nob2ljZShhKX1pZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLkpBcnJheVRvQ29udGFpbmVyKHQpO2lmKG51bGw9PXQpcmV0dXJuIG51bGw7dGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNvbnZlcnQgdG9rZW4gdG8gcnVudGltZSBvYmplY3Q6IFwiK0pTT04uc3RyaW5naWZ5KHQpKX19LHtrZXk6XCJXcml0ZVJ1bnRpbWVDb250YWluZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9Mjxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1uJiZuO2lmKHQuV3JpdGVBcnJheVN0YXJ0KCksbnVsbD09PWUpcmV0dXJuIGd0KFwiY29udGFpbmVyXCIpO3ZhciByLGE9cHQoZS5jb250ZW50KTt0cnl7Zm9yKGEucygpOyEocj1hLm4oKSkuZG9uZTspe3ZhciBzPXIudmFsdWU7dGhpcy5Xcml0ZVJ1bnRpbWVPYmplY3QodCxzKX19Y2F0Y2godCl7YS5lKHQpfWZpbmFsbHl7YS5mKCl9dmFyIG89ZS5uYW1lZE9ubHlDb250ZW50LHU9ZS5jb3VudEZsYWdzLGw9bnVsbCE9ZS5uYW1lJiYhaSxoPW51bGwhPW98fDA8dXx8bDtpZihoJiZ0LldyaXRlT2JqZWN0U3RhcnQoKSxudWxsIT1vKXt2YXIgYyxmPXB0KG8pO3RyeXtmb3IoZi5zKCk7IShjPWYubigpKS5kb25lOyl7dmFyIHY9UyhjLnZhbHVlLDIpLGQ9dlswXSxwPXl0KHZbMV0sRXQpO3QuV3JpdGVQcm9wZXJ0eVN0YXJ0KGQpLHRoaXMuV3JpdGVSdW50aW1lQ29udGFpbmVyKHQscCwhMCksdC5Xcml0ZVByb3BlcnR5RW5kKCl9fWNhdGNoKHQpe2YuZSh0KX1maW5hbGx5e2YuZigpfX1sJiZ0LldyaXRlUHJvcGVydHkoXCIjblwiLGUubmFtZSksaD90LldyaXRlT2JqZWN0RW5kKCk6dC5Xcml0ZU51bGwoKSx0LldyaXRlQXJyYXlFbmQoKX19LHtrZXk6XCJKQXJyYXlUb0NvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBFdDtlLmNvbnRlbnQ9dGhpcy5KQXJyYXlUb1J1bnRpbWVPYmpMaXN0KHQsITApO3ZhciBuPXRbdC5sZW5ndGgtMV07aWYobnVsbCE9bil7dmFyIGkscixhPW5ldyBNYXA7Zm9yKHZhciBzIGluIG4pe1wiI2ZcIj09cz9lLmNvdW50RmxhZ3M9cGFyc2VJbnQobltzXSk6XCIjblwiPT1zP2UubmFtZT1uW3NdLnRvU3RyaW5nKCk6KChyPXl0KGk9dGhpcy5KVG9rZW5Ub1J1bnRpbWVPYmplY3QobltzXSksRXQpKSYmKHIubmFtZT1zKSxhLnNldChzLGkpKX1lLm5hbWVkT25seUNvbnRlbnQ9YX1yZXR1cm4gZX19LHtrZXk6XCJKT2JqZWN0VG9DaG9pY2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgTTtyZXR1cm4gZS50ZXh0PXQudGV4dC50b1N0cmluZygpLGUuaW5kZXg9cGFyc2VJbnQodC5pbmRleCksZS5zb3VyY2VQYXRoPXQub3JpZ2luYWxDaG9pY2VQYXRoLnRvU3RyaW5nKCksZS5vcmlnaW5hbFRocmVhZEluZGV4PXBhcnNlSW50KHQub3JpZ2luYWxUaHJlYWRJbmRleCksZS5wYXRoU3RyaW5nT25DaG9pY2U9dC50YXJnZXRQYXRoLnRvU3RyaW5nKCksZX19LHtrZXk6XCJXcml0ZUNob2ljZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dC5Xcml0ZU9iamVjdFN0YXJ0KCksdC5Xcml0ZVByb3BlcnR5KFwidGV4dFwiLGUudGV4dCksdC5Xcml0ZUludFByb3BlcnR5KFwiaW5kZXhcIixlLmluZGV4KSx0LldyaXRlUHJvcGVydHkoXCJvcmlnaW5hbENob2ljZVBhdGhcIixlLnNvdXJjZVBhdGgpLHQuV3JpdGVJbnRQcm9wZXJ0eShcIm9yaWdpbmFsVGhyZWFkSW5kZXhcIixlLm9yaWdpbmFsVGhyZWFkSW5kZXgpLHQuV3JpdGVQcm9wZXJ0eShcInRhcmdldFBhdGhcIixlLnBhdGhTdHJpbmdPbkNob2ljZSksdC5Xcml0ZU9iamVjdEVuZCgpfX0se2tleTpcIldyaXRlSW5rTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS52YWx1ZTtpZihudWxsPT09bilyZXR1cm4gZ3QoXCJyYXdMaXN0XCIpO3QuV3JpdGVPYmplY3RTdGFydCgpLHQuV3JpdGVQcm9wZXJ0eVN0YXJ0KFwibGlzdFwiKSx0LldyaXRlT2JqZWN0U3RhcnQoKTt2YXIgaSxyPXB0KG4pO3RyeXtmb3Ioci5zKCk7IShpPXIubigpKS5kb25lOyl7dmFyIGE9UyhpLnZhbHVlLDIpLHM9YVswXSxvPWFbMV0sdT1rdC5mcm9tU2VyaWFsaXplZEtleShzKSxsPW87aWYobnVsbD09PXUuaXRlbU5hbWUpcmV0dXJuIGd0KFwiaXRlbS5pdGVtTmFtZVwiKTt0LldyaXRlUHJvcGVydHlOYW1lU3RhcnQoKSx0LldyaXRlUHJvcGVydHlOYW1lSW5uZXIodS5vcmlnaW5OYW1lP3Uub3JpZ2luTmFtZTpcIj9cIiksdC5Xcml0ZVByb3BlcnR5TmFtZUlubmVyKFwiLlwiKSx0LldyaXRlUHJvcGVydHlOYW1lSW5uZXIodS5pdGVtTmFtZSksdC5Xcml0ZVByb3BlcnR5TmFtZUVuZCgpLHQuV3JpdGUobCksdC5Xcml0ZVByb3BlcnR5RW5kKCl9fWNhdGNoKHQpe3IuZSh0KX1maW5hbGx5e3IuZigpfWlmKHQuV3JpdGVPYmplY3RFbmQoKSx0LldyaXRlUHJvcGVydHlFbmQoKSwwPT1uLkNvdW50JiZudWxsIT1uLm9yaWdpbk5hbWVzJiYwPG4ub3JpZ2luTmFtZXMubGVuZ3RoKXt0LldyaXRlUHJvcGVydHlTdGFydChcIm9yaWdpbnNcIiksdC5Xcml0ZUFycmF5U3RhcnQoKTt2YXIgaCxjPXB0KG4ub3JpZ2luTmFtZXMpO3RyeXtmb3IoYy5zKCk7IShoPWMubigpKS5kb25lOyl7dmFyIGY9aC52YWx1ZTt0LldyaXRlKGYpfX1jYXRjaCh0KXtjLmUodCl9ZmluYWxseXtjLmYoKX10LldyaXRlQXJyYXlFbmQoKSx0LldyaXRlUHJvcGVydHlFbmQoKX10LldyaXRlT2JqZWN0RW5kKCl9fSx7a2V5OlwiTGlzdERlZmluaXRpb25zVG9KVG9rZW5cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZSxuPXt9LGk9cHQodC5saXN0cyk7dHJ5e2ZvcihpLnMoKTshKGU9aS5uKCkpLmRvbmU7KXt2YXIgcixhPWUudmFsdWUscz17fSxvPXB0KGEuaXRlbXMpO3RyeXtmb3Ioby5zKCk7IShyPW8ubigpKS5kb25lOyl7dmFyIHU9UyhyLnZhbHVlLDIpLGw9dVswXSxoPXVbMV0sYz1rdC5mcm9tU2VyaWFsaXplZEtleShsKTtpZihudWxsPT09Yy5pdGVtTmFtZSlyZXR1cm4gZ3QoXCJpdGVtLml0ZW1OYW1lXCIpO3NbYy5pdGVtTmFtZV09aH19Y2F0Y2godCl7by5lKHQpfWZpbmFsbHl7by5mKCl9blthLm5hbWVdPXN9fWNhdGNoKHQpe2kuZSh0KX1maW5hbGx5e2kuZigpfXJldHVybiBufX0se2tleTpcIkpUb2tlblRvTGlzdERlZmluaXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dCxuPVtdO2Zvcih2YXIgaSBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkoaSkpe3ZhciByLGE9aS50b1N0cmluZygpLHM9ZVtpXSxvPW5ldyBNYXA7Zm9yKHZhciB1IGluIHMpe2UuaGFzT3duUHJvcGVydHkoaSkmJihyPXNbdV0sby5zZXQodSxwYXJzZUludChyKSkpfXZhciBsPW5ldyBxKGEsbyk7bi5wdXNoKGwpfXJldHVybiBuZXcgSihuKX19XSksUH0oKTtLLl9jb250cm9sQ29tbWFuZE5hbWVzPWZ1bmN0aW9uKCl7dmFyIHQ9W107dFtBdC5Db21tYW5kVHlwZS5FdmFsU3RhcnRdPVwiZXZcIix0W0F0LkNvbW1hbmRUeXBlLkV2YWxPdXRwdXRdPVwib3V0XCIsdFtBdC5Db21tYW5kVHlwZS5FdmFsRW5kXT1cIi9ldlwiLHRbQXQuQ29tbWFuZFR5cGUuRHVwbGljYXRlXT1cImR1XCIsdFtBdC5Db21tYW5kVHlwZS5Qb3BFdmFsdWF0ZWRWYWx1ZV09XCJwb3BcIix0W0F0LkNvbW1hbmRUeXBlLlBvcEZ1bmN0aW9uXT1cIn5yZXRcIix0W0F0LkNvbW1hbmRUeXBlLlBvcFR1bm5lbF09XCItPi0+XCIsdFtBdC5Db21tYW5kVHlwZS5CZWdpblN0cmluZ109XCJzdHJcIix0W0F0LkNvbW1hbmRUeXBlLkVuZFN0cmluZ109XCIvc3RyXCIsdFtBdC5Db21tYW5kVHlwZS5Ob09wXT1cIm5vcFwiLHRbQXQuQ29tbWFuZFR5cGUuQ2hvaWNlQ291bnRdPVwiY2hvaWNlQ250XCIsdFtBdC5Db21tYW5kVHlwZS5UdXJuc109XCJ0dXJuXCIsdFtBdC5Db21tYW5kVHlwZS5UdXJuc1NpbmNlXT1cInR1cm5zXCIsdFtBdC5Db21tYW5kVHlwZS5SZWFkQ291bnRdPVwicmVhZGNcIix0W0F0LkNvbW1hbmRUeXBlLlJhbmRvbV09XCJybmRcIix0W0F0LkNvbW1hbmRUeXBlLlNlZWRSYW5kb21dPVwic3JuZFwiLHRbQXQuQ29tbWFuZFR5cGUuVmlzaXRJbmRleF09XCJ2aXNpdFwiLHRbQXQuQ29tbWFuZFR5cGUuU2VxdWVuY2VTaHVmZmxlSW5kZXhdPVwic2VxXCIsdFtBdC5Db21tYW5kVHlwZS5TdGFydFRocmVhZF09XCJ0aHJlYWRcIix0W0F0LkNvbW1hbmRUeXBlLkRvbmVdPVwiZG9uZVwiLHRbQXQuQ29tbWFuZFR5cGUuRW5kXT1cImVuZFwiLHRbQXQuQ29tbWFuZFR5cGUuTGlzdEZyb21JbnRdPVwibGlzdEludFwiLHRbQXQuQ29tbWFuZFR5cGUuTGlzdFJhbmdlXT1cInJhbmdlXCIsdFtBdC5Db21tYW5kVHlwZS5MaXN0UmFuZG9tXT1cImxybmRcIjtmb3IodmFyIGU9MDtlPEF0LkNvbW1hbmRUeXBlLlRPVEFMX1ZBTFVFUzsrK2UpaWYobnVsbD09dFtlXSl0aHJvdyBuZXcgRXJyb3IoXCJDb250cm9sIGNvbW1hbmQgbm90IGFjY291bnRlZCBmb3IgaW4gc2VyaWFsaXNhdGlvblwiKTtyZXR1cm4gdH0oKTt2YXIgVT1mdW5jdGlvbigpe2Z1bmN0aW9uIHMoKXtpZihtKHRoaXMscyksdGhpcy5fdGhyZWFkQ291bnRlcj0wLHRoaXMuX3N0YXJ0T2ZSb290PXh0Lk51bGwsYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBvLlN0b3J5KXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5fc3RhcnRPZlJvb3Q9eHQuU3RhcnRPZih0LnJvb3RDb250ZW50Q29udGFpbmVyKSx0aGlzLlJlc2V0KCl9ZWxzZXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5fdGhyZWFkcz1bXTt2YXIgbixpPXB0KGUuX3RocmVhZHMpO3RyeXtmb3IoaS5zKCk7IShuPWkubigpKS5kb25lOyl7dmFyIHI9bi52YWx1ZTt0aGlzLl90aHJlYWRzLnB1c2goci5Db3B5KCkpfX1jYXRjaCh0KXtpLmUodCl9ZmluYWxseXtpLmYoKX10aGlzLl90aHJlYWRDb3VudGVyPWUuX3RocmVhZENvdW50ZXIsdGhpcy5fc3RhcnRPZlJvb3Q9ZS5fc3RhcnRPZlJvb3R9fXJldHVybiBhKHMsW3trZXk6XCJSZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdGhyZWFkcz1bXSx0aGlzLl90aHJlYWRzLnB1c2gobmV3IHMuVGhyZWFkKSx0aGlzLl90aHJlYWRzWzBdLmNhbGxzdGFjay5wdXNoKG5ldyBzLkVsZW1lbnQoTnQuVHVubmVsLHRoaXMuX3N0YXJ0T2ZSb290KSl9fSx7a2V5OlwiU2V0SnNvblRva2VuXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl90aHJlYWRzLmxlbmd0aD0wO3ZhciBuLGk9cHQodC50aHJlYWRzKTt0cnl7Zm9yKGkucygpOyEobj1pLm4oKSkuZG9uZTspe3ZhciByPW4udmFsdWUsYT1uZXcgcy5UaHJlYWQocixlKTt0aGlzLl90aHJlYWRzLnB1c2goYSl9fWNhdGNoKHQpe2kuZSh0KX1maW5hbGx5e2kuZigpfXRoaXMuX3RocmVhZENvdW50ZXI9cGFyc2VJbnQodC50aHJlYWRDb3VudGVyKSx0aGlzLl9zdGFydE9mUm9vdD14dC5TdGFydE9mKGUucm9vdENvbnRlbnRDb250YWluZXIpfX0se2tleTpcIldyaXRlSnNvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7dC5Xcml0ZU9iamVjdChmdW5jdGlvbih0KXt0LldyaXRlUHJvcGVydHlTdGFydChcInRocmVhZHNcIiksdC5Xcml0ZUFycmF5U3RhcnQoKTt2YXIgZSxuPXB0KGkuX3RocmVhZHMpO3RyeXtmb3Iobi5zKCk7IShlPW4ubigpKS5kb25lOyl7ZS52YWx1ZS5Xcml0ZUpzb24odCl9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfXQuV3JpdGVBcnJheUVuZCgpLHQuV3JpdGVQcm9wZXJ0eUVuZCgpLHQuV3JpdGVQcm9wZXJ0eVN0YXJ0KFwidGhyZWFkQ291bnRlclwiKSx0LldyaXRlSW50KGkuX3RocmVhZENvdW50ZXIpLHQuV3JpdGVQcm9wZXJ0eUVuZCgpfSl9fSx7a2V5OlwiUHVzaFRocmVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jdXJyZW50VGhyZWFkLkNvcHkoKTt0aGlzLl90aHJlYWRDb3VudGVyKyssdC50aHJlYWRJbmRleD10aGlzLl90aHJlYWRDb3VudGVyLHRoaXMuX3RocmVhZHMucHVzaCh0KX19LHtrZXk6XCJGb3JrVGhyZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmN1cnJlbnRUaHJlYWQuQ29weSgpO3JldHVybiB0aGlzLl90aHJlYWRDb3VudGVyKyssdC50aHJlYWRJbmRleD10aGlzLl90aHJlYWRDb3VudGVyLHR9fSx7a2V5OlwiUG9wVGhyZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZighdGhpcy5jYW5Qb3BUaHJlYWQpdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgcG9wIHRocmVhZFwiKTt0aGlzLl90aHJlYWRzLnNwbGljZSh0aGlzLl90aHJlYWRzLmluZGV4T2YodGhpcy5jdXJyZW50VGhyZWFkKSwxKX19LHtrZXk6XCJQdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOjAscj0yPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PW4/bjowLGE9bmV3IHMuRWxlbWVudCh0LHRoaXMuY3VycmVudEVsZW1lbnQuY3VycmVudFBvaW50ZXIsITEpO2EuZXZhbHVhdGlvblN0YWNrSGVpZ2h0V2hlblB1c2hlZD1pLGEuZnVuY3Rpb25TdGFydEluT3V0cHV0U3RyZWFtPXIsdGhpcy5jYWxsU3RhY2sucHVzaChhKX19LHtrZXk6XCJDYW5Qb3BcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQ/dDpudWxsO3JldHVybiEhdGhpcy5jYW5Qb3AmJihudWxsPT1lfHx0aGlzLmN1cnJlbnRFbGVtZW50LnR5cGU9PWUpfX0se2tleTpcIlBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90Om51bGw7aWYoIXRoaXMuQ2FuUG9wKGUpKXRocm93IG5ldyBFcnJvcihcIk1pc21hdGNoZWQgcHVzaC9wb3AgaW4gQ2FsbHN0YWNrXCIpO3RoaXMuY2FsbFN0YWNrLnBvcCgpfX0se2tleTpcIkdldFRlbXBvcmFyeVZhcmlhYmxlV2l0aE5hbWVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZT9lOi0xOy0xPT1uJiYobj10aGlzLmN1cnJlbnRFbGVtZW50SW5kZXgrMSk7dmFyIGk9dyh0aGlzLmNhbGxTdGFja1tuLTFdLnRlbXBvcmFyeVZhcmlhYmxlcyx0LG51bGwpO3JldHVybiBpLmV4aXN0cz9pLnJlc3VsdDpudWxsfX0se2tleTpcIlNldFRlbXBvcmFyeVZhcmlhYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9Mzxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1pP2k6LTE7LTE9PXImJihyPXRoaXMuY3VycmVudEVsZW1lbnRJbmRleCsxKTt2YXIgYT10aGlzLmNhbGxTdGFja1tyLTFdO2lmKCFuJiYhYS50ZW1wb3JhcnlWYXJpYWJsZXMuZ2V0KHQpKXRocm93IG5ldyBidChcIkNvdWxkIG5vdCBmaW5kIHRlbXBvcmFyeSB2YXJpYWJsZSB0byBzZXQ6IFwiK3QpO3ZhciBzPXcoYS50ZW1wb3JhcnlWYXJpYWJsZXMsdCxudWxsKTtzLmV4aXN0cyYmT3QuUmV0YWluTGlzdE9yaWdpbnNGb3JBc3NpZ25tZW50KHMucmVzdWx0LGUpLGEudGVtcG9yYXJ5VmFyaWFibGVzLnNldCh0LGUpfX0se2tleTpcIkNvbnRleHRGb3JWYXJpYWJsZU5hbWVkXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3VycmVudEVsZW1lbnQudGVtcG9yYXJ5VmFyaWFibGVzLmdldCh0KT90aGlzLmN1cnJlbnRFbGVtZW50SW5kZXgrMTowfX0se2tleTpcIlRocmVhZFdpdGhJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3RocmVhZHMuZmlsdGVyKGZ1bmN0aW9uKHQpe2lmKHQudGhyZWFkSW5kZXg9PWUpcmV0dXJuIHR9KTtyZXR1cm4gMDx0Lmxlbmd0aD90WzBdOm51bGx9fSx7a2V5OlwiZWxlbWVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYWxsU3RhY2t9fSx7a2V5OlwiZGVwdGhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50cy5sZW5ndGh9fSx7a2V5OlwiY3VycmVudEVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl90aHJlYWRzW3RoaXMuX3RocmVhZHMubGVuZ3RoLTFdLmNhbGxzdGFjaztyZXR1cm4gdFt0Lmxlbmd0aC0xXX19LHtrZXk6XCJjdXJyZW50RWxlbWVudEluZGV4XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbFN0YWNrLmxlbmd0aC0xfX0se2tleTpcImN1cnJlbnRUaHJlYWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGhyZWFkc1t0aGlzLl90aHJlYWRzLmxlbmd0aC0xXX0sc2V0OmZ1bmN0aW9uKHQpe2suQXNzZXJ0KDE9PXRoaXMuX3RocmVhZHMubGVuZ3RoLFwiU2hvdWxkbid0IGJlIGRpcmVjdGx5IHNldHRpbmcgdGhlIGN1cnJlbnQgdGhyZWFkIHdoZW4gd2UgaGF2ZSBhIHN0YWNrIG9mIHRoZW1cIiksdGhpcy5fdGhyZWFkcy5sZW5ndGg9MCx0aGlzLl90aHJlYWRzLnB1c2godCl9fSx7a2V5OlwiY2FuUG9wXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDE8dGhpcy5jYWxsU3RhY2subGVuZ3RofX0se2tleTpcImNhblBvcFRocmVhZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiAxPHRoaXMuX3RocmVhZHMubGVuZ3RoJiYhdGhpcy5lbGVtZW50SXNFdmFsdWF0ZUZyb21HYW1lfX0se2tleTpcImVsZW1lbnRJc0V2YWx1YXRlRnJvbUdhbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50RWxlbWVudC50eXBlPT1OdC5GdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZX19LHtrZXk6XCJjYWxsU3RhY2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50VGhyZWFkLmNhbGxzdGFja319LHtrZXk6XCJjYWxsU3RhY2tUcmFjZVwiLGdldDpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgU3QsZT0wO2U8dGhpcy5fdGhyZWFkcy5sZW5ndGg7ZSsrKXt2YXIgbj10aGlzLl90aHJlYWRzW2VdLGk9ZT09dGhpcy5fdGhyZWFkcy5sZW5ndGgtMTt0LkFwcGVuZEZvcm1hdChcIj09PSBUSFJFQUQgezB9L3sxfSB7Mn09PT1cXG5cIixlKzEsdGhpcy5fdGhyZWFkcy5sZW5ndGgsaT9cIihjdXJyZW50KSBcIjpcIlwiKTtmb3IodmFyIHI9MDtyPG4uY2FsbHN0YWNrLmxlbmd0aDtyKyspe24uY2FsbHN0YWNrW3JdLnR5cGU9PU50LkZ1bmN0aW9uP3QuQXBwZW5kKFwiICBbRlVOQ1RJT05dIFwiKTp0LkFwcGVuZChcIiAgW1RVTk5FTF0gXCIpO3ZhciBhPW4uY2FsbHN0YWNrW3JdLmN1cnJlbnRQb2ludGVyO2lmKCFhLmlzTnVsbCl7aWYodC5BcHBlbmQoXCI8U09NRVdIRVJFIElOIFwiKSxudWxsPT09YS5jb250YWluZXIpcmV0dXJuIGd0KFwicG9pbnRlci5jb250YWluZXJcIik7dC5BcHBlbmQoYS5jb250YWluZXIucGF0aC50b1N0cmluZygpKSx0LkFwcGVuZExpbmUoXCI+XCIpfX19cmV0dXJuIHQudG9TdHJpbmcoKX19XSksc30oKTshZnVuY3Rpb24odCl7dmFyIHk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHQsZSl7dmFyIG49Mjxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXTttKHRoaXMsaSksdGhpcy5ldmFsdWF0aW9uU3RhY2tIZWlnaHRXaGVuUHVzaGVkPTAsdGhpcy5mdW5jdGlvblN0YXJ0SW5PdXRwdXRTdHJlYW09MCx0aGlzLmN1cnJlbnRQb2ludGVyPWUuY29weSgpLHRoaXMuaW5FeHByZXNzaW9uRXZhbHVhdGlvbj1uLHRoaXMudGVtcG9yYXJ5VmFyaWFibGVzPW5ldyBNYXAsdGhpcy50eXBlPXR9cmV0dXJuIGEoaSxbe2tleTpcIkNvcHlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBpKHRoaXMudHlwZSx0aGlzLmN1cnJlbnRQb2ludGVyLHRoaXMuaW5FeHByZXNzaW9uRXZhbHVhdGlvbik7cmV0dXJuIHQudGVtcG9yYXJ5VmFyaWFibGVzPW5ldyBNYXAodGhpcy50ZW1wb3JhcnlWYXJpYWJsZXMpLHQuZXZhbHVhdGlvblN0YWNrSGVpZ2h0V2hlblB1c2hlZD10aGlzLmV2YWx1YXRpb25TdGFja0hlaWdodFdoZW5QdXNoZWQsdC5mdW5jdGlvblN0YXJ0SW5PdXRwdXRTdHJlYW09dGhpcy5mdW5jdGlvblN0YXJ0SW5PdXRwdXRTdHJlYW0sdH19XSksaX0oKTt0LkVsZW1lbnQ9eTt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHAoKXtpZihtKHRoaXMscCksdGhpcy50aHJlYWRJbmRleD0wLHRoaXMucHJldmlvdXNQb2ludGVyPXh0Lk51bGwsdGhpcy5jYWxsc3RhY2s9W10sYXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMV0pe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLnRocmVhZEluZGV4PXBhcnNlSW50KHQudGhyZWFkSW5kZXgpO3ZhciBuLGk9cHQodC5jYWxsc3RhY2spO3RyeXtmb3IoaS5zKCk7IShuPWkubigpKS5kb25lOyl7dmFyIHI9bi52YWx1ZSxhPXBhcnNlSW50KHIudHlwZSkscz14dC5OdWxsLG89dm9pZCAwLHU9ci5jUGF0aDtpZih2b2lkIDAhPT11KXtvPXUudG9TdHJpbmcoKTt2YXIgbD1lLkNvbnRlbnRBdFBhdGgobmV3IEUobykpO2lmKHMuY29udGFpbmVyPWwuY29udGFpbmVyLHMuaW5kZXg9cGFyc2VJbnQoci5pZHgpLG51bGw9PWwub2JqKXRocm93IG5ldyBFcnJvcihcIldoZW4gbG9hZGluZyBzdGF0ZSwgaW50ZXJuYWwgc3RvcnkgbG9jYXRpb24gY291bGRuJ3QgYmUgZm91bmQ6IFwiK28rXCIuIEhhcyB0aGUgc3RvcnkgY2hhbmdlZCBzaW5jZSB0aGlzIHNhdmUgZGF0YSB3YXMgY3JlYXRlZD9cIik7aWYobC5hcHByb3hpbWF0ZSl7aWYobnVsbD09PXMuY29udGFpbmVyKXJldHVybiBndChcInBvaW50ZXIuY29udGFpbmVyXCIpO2UuV2FybmluZyhcIldoZW4gbG9hZGluZyBzdGF0ZSwgZXhhY3QgaW50ZXJuYWwgc3RvcnkgbG9jYXRpb24gY291bGRuJ3QgYmUgZm91bmQ6ICdcIitvK1wiJywgc28gaXQgd2FzIGFwcHJveGltYXRlZCB0byAnXCIrcy5jb250YWluZXIucGF0aC50b1N0cmluZygpK1wiJyB0byByZWNvdmVyLiBIYXMgdGhlIHN0b3J5IGNoYW5nZWQgc2luY2UgdGhpcyBzYXZlIGRhdGEgd2FzIGNyZWF0ZWQ/XCIpfX12YXIgaD0hIXIuZXhwLGM9bmV3IHkoYSxzLGgpLGY9ci50ZW1wO3ZvaWQgMCE9PWY/Yy50ZW1wb3JhcnlWYXJpYWJsZXM9Sy5KT2JqZWN0VG9EaWN0aW9uYXJ5UnVudGltZU9ianMoZik6Yy50ZW1wb3JhcnlWYXJpYWJsZXMuY2xlYXIoKSx0aGlzLmNhbGxzdGFjay5wdXNoKGMpfX1jYXRjaCh0KXtpLmUodCl9ZmluYWxseXtpLmYoKX12YXIgdixkPXQucHJldmlvdXNDb250ZW50T2JqZWN0O3ZvaWQgMCE9PWQmJih2PW5ldyBFKGQudG9TdHJpbmcoKSksdGhpcy5wcmV2aW91c1BvaW50ZXI9ZS5Qb2ludGVyQXRQYXRoKHYpKX19cmV0dXJuIGEocCxbe2tleTpcIkNvcHlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBwO3QudGhyZWFkSW5kZXg9dGhpcy50aHJlYWRJbmRleDt2YXIgZSxuPXB0KHRoaXMuY2FsbHN0YWNrKTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciBpPWUudmFsdWU7dC5jYWxsc3RhY2sucHVzaChpLkNvcHkoKSl9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfXJldHVybiB0LnByZXZpb3VzUG9pbnRlcj10aGlzLnByZXZpb3VzUG9pbnRlci5jb3B5KCksdH19LHtrZXk6XCJXcml0ZUpzb25cIix2YWx1ZTpmdW5jdGlvbih0KXt0LldyaXRlT2JqZWN0U3RhcnQoKSx0LldyaXRlUHJvcGVydHlTdGFydChcImNhbGxzdGFja1wiKSx0LldyaXRlQXJyYXlTdGFydCgpO3ZhciBlLG49cHQodGhpcy5jYWxsc3RhY2spO3RyeXtmb3Iobi5zKCk7IShlPW4ubigpKS5kb25lOyl7dmFyIGk9ZS52YWx1ZTtpZih0LldyaXRlT2JqZWN0U3RhcnQoKSwhaS5jdXJyZW50UG9pbnRlci5pc051bGwpe2lmKG51bGw9PT1pLmN1cnJlbnRQb2ludGVyLmNvbnRhaW5lcilyZXR1cm4gZ3QoXCJlbC5jdXJyZW50UG9pbnRlci5jb250YWluZXJcIik7dC5Xcml0ZVByb3BlcnR5KFwiY1BhdGhcIixpLmN1cnJlbnRQb2ludGVyLmNvbnRhaW5lci5wYXRoLmNvbXBvbmVudHNTdHJpbmcpLHQuV3JpdGVJbnRQcm9wZXJ0eShcImlkeFwiLGkuY3VycmVudFBvaW50ZXIuaW5kZXgpfXQuV3JpdGVQcm9wZXJ0eShcImV4cFwiLGkuaW5FeHByZXNzaW9uRXZhbHVhdGlvbiksdC5Xcml0ZUludFByb3BlcnR5KFwidHlwZVwiLGkudHlwZSksMDxpLnRlbXBvcmFyeVZhcmlhYmxlcy5zaXplJiYodC5Xcml0ZVByb3BlcnR5U3RhcnQoXCJ0ZW1wXCIpLEsuV3JpdGVEaWN0aW9uYXJ5UnVudGltZU9ianModCxpLnRlbXBvcmFyeVZhcmlhYmxlcyksdC5Xcml0ZVByb3BlcnR5RW5kKCkpLHQuV3JpdGVPYmplY3RFbmQoKX19Y2F0Y2godCl7bi5lKHQpfWZpbmFsbHl7bi5mKCl9aWYodC5Xcml0ZUFycmF5RW5kKCksdC5Xcml0ZVByb3BlcnR5RW5kKCksdC5Xcml0ZUludFByb3BlcnR5KFwidGhyZWFkSW5kZXhcIix0aGlzLnRocmVhZEluZGV4KSwhdGhpcy5wcmV2aW91c1BvaW50ZXIuaXNOdWxsKXt2YXIgcj10aGlzLnByZXZpb3VzUG9pbnRlci5SZXNvbHZlKCk7aWYobnVsbD09PXIpcmV0dXJuIGd0KFwidGhpcy5wcmV2aW91c1BvaW50ZXIuUmVzb2x2ZSgpXCIpO3QuV3JpdGVQcm9wZXJ0eShcInByZXZpb3VzQ29udGVudE9iamVjdFwiLHIucGF0aC50b1N0cmluZygpKX10LldyaXRlT2JqZWN0RW5kKCl9fV0pLHB9KCk7dC5UaHJlYWQ9ZX0oVT1VfHx7fSk7dmFyIHo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBsKHQsZSl7bSh0aGlzLGwpLHRoaXMudmFyaWFibGVDaGFuZ2VkRXZlbnRDYWxsYmFja3M9W10sdGhpcy5wYXRjaD1udWxsLHRoaXMuX2JhdGNoT2JzZXJ2aW5nVmFyaWFibGVDaGFuZ2VzPSExLHRoaXMuX2RlZmF1bHRHbG9iYWxWYXJpYWJsZXM9bmV3IE1hcCx0aGlzLl9jaGFuZ2VkVmFyaWFibGVzRm9yQmF0Y2hPYnM9bmV3IFNldCx0aGlzLl9nbG9iYWxWYXJpYWJsZXM9bmV3IE1hcCx0aGlzLl9jYWxsU3RhY2s9dCx0aGlzLl9saXN0RGVmc09yaWdpbj1lO3RyeXtyZXR1cm4gbmV3IFByb3h5KHRoaXMse2dldDpmdW5jdGlvbih0LGUpe3JldHVybiBlIGluIHQ/dFtlXTp0LiQoZSl9LHNldDpmdW5jdGlvbih0LGUsbil7cmV0dXJuIGUgaW4gdD90W2VdPW46dC4kKGUsbiksITB9fSl9Y2F0Y2godCl7fX1yZXR1cm4gYShsLFt7a2V5OlwidmFyaWFibGVDaGFuZ2VkRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuLGk9cHQodGhpcy52YXJpYWJsZUNoYW5nZWRFdmVudENhbGxiYWNrcyk7dHJ5e2ZvcihpLnMoKTshKG49aS5uKCkpLmRvbmU7KXsoMCxuLnZhbHVlKSh0LGUpfX1jYXRjaCh0KXtpLmUodCl9ZmluYWxseXtpLmYoKX19fSx7a2V5OlwiJFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSl7dmFyIG49bnVsbDtyZXR1cm4gbnVsbCE9PXRoaXMucGF0Y2gmJihuPXRoaXMucGF0Y2guVHJ5R2V0R2xvYmFsKHQsbnVsbCkpLmV4aXN0cz9uLnJlc3VsdC52YWx1ZU9iamVjdDoodm9pZCAwPT09KG49dGhpcy5fZ2xvYmFsVmFyaWFibGVzLmdldCh0KSkmJihuPXRoaXMuX2RlZmF1bHRHbG9iYWxWYXJpYWJsZXMuZ2V0KHQpKSx2b2lkIDAhPT1uP24udmFsdWVPYmplY3Q6bnVsbCl9aWYodm9pZCAwPT09dGhpcy5fZGVmYXVsdEdsb2JhbFZhcmlhYmxlcy5nZXQodCkpdGhyb3cgbmV3IGJ0KFwiQ2Fubm90IGFzc2lnbiB0byBhIHZhcmlhYmxlIChcIit0K1wiKSB0aGF0IGhhc24ndCBiZWVuIGRlY2xhcmVkIGluIHRoZSBzdG9yeVwiKTt2YXIgaT1fdC5DcmVhdGUoZSk7aWYobnVsbD09aSl0aHJvdyBuZXcgYnQobnVsbD09ZT9cIkNhbm5vdCBwYXNzIG51bGwgdG8gVmFyaWFibGVTdGF0ZVwiOlwiSW52YWxpZCB2YWx1ZSBwYXNzZWQgdG8gVmFyaWFibGVTdGF0ZTogXCIrZS50b1N0cmluZygpKTt0aGlzLlNldEdsb2JhbCh0LGkpfX0se2tleTpcIkFwcGx5UGF0Y2hcIix2YWx1ZTpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLnBhdGNoKXJldHVybiBndChcInRoaXMucGF0Y2hcIik7dmFyIHQsZT1wdCh0aGlzLnBhdGNoLmdsb2JhbHMpO3RyeXtmb3IoZS5zKCk7ISh0PWUubigpKS5kb25lOyl7dmFyIG49Uyh0LnZhbHVlLDIpLGk9blswXSxyPW5bMV07dGhpcy5fZ2xvYmFsVmFyaWFibGVzLnNldChpLHIpfX1jYXRjaCh0KXtlLmUodCl9ZmluYWxseXtlLmYoKX1pZihudWxsIT09dGhpcy5fY2hhbmdlZFZhcmlhYmxlc0ZvckJhdGNoT2JzKXt2YXIgYSxzPXB0KHRoaXMucGF0Y2guY2hhbmdlZFZhcmlhYmxlcyk7dHJ5e2ZvcihzLnMoKTshKGE9cy5uKCkpLmRvbmU7KXt2YXIgbz1hLnZhbHVlO3RoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icy5hZGQobyl9fWNhdGNoKHQpe3MuZSh0KX1maW5hbGx5e3MuZigpfX10aGlzLnBhdGNoPW51bGx9fSx7a2V5OlwiU2V0SnNvblRva2VuXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fZ2xvYmFsVmFyaWFibGVzLmNsZWFyKCk7dmFyIGUsbj1wdCh0aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzKTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciBpPVMoZS52YWx1ZSwyKSxyPWlbMF0sYT1pWzFdLHM9dFtyXTtpZih2b2lkIDAhPT1zKXt2YXIgbz1LLkpUb2tlblRvUnVudGltZU9iamVjdChzKTtpZihudWxsPT09bylyZXR1cm4gZ3QoXCJ0b2tlbklua09iamVjdFwiKTt0aGlzLl9nbG9iYWxWYXJpYWJsZXMuc2V0KHIsbyl9ZWxzZSB0aGlzLl9nbG9iYWxWYXJpYWJsZXMuc2V0KHIsYSl9fWNhdGNoKHQpe24uZSh0KX1maW5hbGx5e24uZigpfX19LHtrZXk6XCJXcml0ZUpzb25cIix2YWx1ZTpmdW5jdGlvbih0KXt0LldyaXRlT2JqZWN0U3RhcnQoKTt2YXIgZSxuPXB0KHRoaXMuX2dsb2JhbFZhcmlhYmxlcyk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaT1TKGUudmFsdWUsMikscj1pWzBdLGE9aVsxXSxzPXIsbz1hO2lmKGwuZG9udFNhdmVEZWZhdWx0VmFsdWVzJiZ0aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzLmhhcyhzKSl7dmFyIHU9dGhpcy5fZGVmYXVsdEdsb2JhbFZhcmlhYmxlcy5nZXQocyk7aWYodGhpcy5SdW50aW1lT2JqZWN0c0VxdWFsKG8sdSkpY29udGludWV9dC5Xcml0ZVByb3BlcnR5U3RhcnQocyksSy5Xcml0ZVJ1bnRpbWVPYmplY3QodCxvKSx0LldyaXRlUHJvcGVydHlFbmQoKX19Y2F0Y2godCl7bi5lKHQpfWZpbmFsbHl7bi5mKCl9dC5Xcml0ZU9iamVjdEVuZCgpfX0se2tleTpcIlJ1bnRpbWVPYmplY3RzRXF1YWxcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKG51bGw9PT10KXJldHVybiBndChcIm9iajFcIik7aWYobnVsbD09PWUpcmV0dXJuIGd0KFwib2JqMlwiKTtpZih0LmNvbnN0cnVjdG9yIT09ZS5jb25zdHJ1Y3RvcilyZXR1cm4hMTt2YXIgbj15dCh0LFR0KTtpZihudWxsIT09bilyZXR1cm4gbi52YWx1ZT09PW10KGUsVHQpLnZhbHVlO3ZhciBpPXl0KHQseCk7aWYobnVsbCE9PWkpcmV0dXJuIGkudmFsdWU9PT1tdChlLHgpLnZhbHVlO3ZhciByPXl0KHQsX3QpLGE9eXQoZSxfdCk7aWYobnVsbCE9PXImJm51bGwhPT1hKXJldHVybiBiKHIudmFsdWVPYmplY3QpJiZiKGEudmFsdWVPYmplY3QpP3IudmFsdWVPYmplY3QuRXF1YWxzKGEudmFsdWVPYmplY3QpOnIudmFsdWVPYmplY3Q9PT1hLnZhbHVlT2JqZWN0O3Rocm93IG5ldyBFcnJvcihcIkZhc3RSb3VnaERlZmluaXRlbHlFcXVhbHM6IFVuc3VwcG9ydGVkIHJ1bnRpbWUgb2JqZWN0IHR5cGU6IFwiK3QuY29uc3RydWN0b3IubmFtZSl9fSx7a2V5OlwiR2V0VmFyaWFibGVXaXRoTmFtZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6LTEsaT10aGlzLkdldFJhd1ZhcmlhYmxlV2l0aE5hbWUodCxuKSxyPXl0KGksSSk7cmV0dXJuIG51bGwhPT1yJiYoaT10aGlzLlZhbHVlQXRWYXJpYWJsZVBvaW50ZXIocikpLGl9fSx7a2V5OlwiVHJ5R2V0RGVmYXVsdFZhcmlhYmxlVmFsdWVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT13KHRoaXMuX2RlZmF1bHRHbG9iYWxWYXJpYWJsZXMsdCxudWxsKTtyZXR1cm4gZS5leGlzdHM/ZS5yZXN1bHQ6bnVsbH19LHtrZXk6XCJHbG9iYWxWYXJpYWJsZUV4aXN0c1dpdGhOYW1lXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2dsb2JhbFZhcmlhYmxlcy5oYXModCl8fG51bGwhPT10aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzJiZ0aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzLmhhcyh0KX19LHtrZXk6XCJHZXRSYXdWYXJpYWJsZVdpdGhOYW1lXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZigwPT1lfHwtMT09ZSl7dmFyIG49bnVsbDtpZihudWxsIT09dGhpcy5wYXRjaCYmKG49dGhpcy5wYXRjaC5UcnlHZXRHbG9iYWwodCxudWxsKSkuZXhpc3RzKXJldHVybiBuLnJlc3VsdDtpZigobj13KHRoaXMuX2dsb2JhbFZhcmlhYmxlcyx0LG51bGwpKS5leGlzdHMpcmV0dXJuIG4ucmVzdWx0O2lmKG51bGwhPT10aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzJiYobj13KHRoaXMuX2RlZmF1bHRHbG9iYWxWYXJpYWJsZXMsdCxudWxsKSkuZXhpc3RzKXJldHVybiBuLnJlc3VsdDtpZihudWxsPT09dGhpcy5fbGlzdERlZnNPcmlnaW4pcmV0dXJuIGd0KFwiVmFyaWFibGVzU3RhdGUuX2xpc3REZWZzT3JpZ2luXCIpO3ZhciBpPXRoaXMuX2xpc3REZWZzT3JpZ2luLkZpbmRTaW5nbGVJdGVtTGlzdFdpdGhOYW1lKHQpO2lmKGkpcmV0dXJuIGl9cmV0dXJuIHRoaXMuX2NhbGxTdGFjay5HZXRUZW1wb3JhcnlWYXJpYWJsZVdpdGhOYW1lKHQsZSl9fSx7a2V5OlwiVmFsdWVBdFZhcmlhYmxlUG9pbnRlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkdldFZhcmlhYmxlV2l0aE5hbWUodC52YXJpYWJsZU5hbWUsdC5jb250ZXh0SW5kZXgpfX0se2tleTpcIkFzc2lnblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC52YXJpYWJsZU5hbWU7aWYobnVsbD09PW4pcmV0dXJuIGd0KFwibmFtZVwiKTt2YXIgaT0tMSxyPSExLHI9dC5pc05ld0RlY2xhcmF0aW9uP3QuaXNHbG9iYWw6dGhpcy5HbG9iYWxWYXJpYWJsZUV4aXN0c1dpdGhOYW1lKG4pO2lmKHQuaXNOZXdEZWNsYXJhdGlvbil7dmFyIGE9eXQoZSxJKTtudWxsIT09YSYmKGU9dGhpcy5SZXNvbHZlVmFyaWFibGVQb2ludGVyKGEpKX1lbHNlIGZvcih2YXIgcz1udWxsO251bGwhPShzPXl0KHRoaXMuR2V0UmF3VmFyaWFibGVXaXRoTmFtZShuLGkpLEkpKSYmKG49cy52YXJpYWJsZU5hbWUscj0wPT0oaT1zLmNvbnRleHRJbmRleCkpLG51bGwhPXM7KTtyP3RoaXMuU2V0R2xvYmFsKG4sZSk6dGhpcy5fY2FsbFN0YWNrLlNldFRlbXBvcmFyeVZhcmlhYmxlKG4sZSx0LmlzTmV3RGVjbGFyYXRpb24saSl9fSx7a2V5OlwiU25hcHNob3REZWZhdWx0R2xvYmFsc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZGVmYXVsdEdsb2JhbFZhcmlhYmxlcz1uZXcgTWFwKHRoaXMuX2dsb2JhbFZhcmlhYmxlcyl9fSx7a2V5OlwiUmV0YWluTGlzdE9yaWdpbnNGb3JBc3NpZ25tZW50XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1tdCh0LE90KSxpPW10KGUsT3QpO24udmFsdWUmJmkudmFsdWUmJjA9PWkudmFsdWUuQ291bnQmJmkudmFsdWUuU2V0SW5pdGlhbE9yaWdpbk5hbWVzKG4udmFsdWUub3JpZ2luTmFtZXMpfX0se2tleTpcIlNldEdsb2JhbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49bnVsbDtpZihudWxsPT09dGhpcy5wYXRjaCYmKG49dyh0aGlzLl9nbG9iYWxWYXJpYWJsZXMsdCxudWxsKSksbnVsbCE9PXRoaXMucGF0Y2gmJigobj10aGlzLnBhdGNoLlRyeUdldEdsb2JhbCh0LG51bGwpKS5leGlzdHN8fChuPXcodGhpcy5fZ2xvYmFsVmFyaWFibGVzLHQsbnVsbCkpKSxPdC5SZXRhaW5MaXN0T3JpZ2luc0ZvckFzc2lnbm1lbnQobi5yZXN1bHQsZSksbnVsbD09PXQpcmV0dXJuIGd0KFwidmFyaWFibGVOYW1lXCIpO2lmKG51bGwhPT10aGlzLnBhdGNoP3RoaXMucGF0Y2guU2V0R2xvYmFsKHQsZSk6dGhpcy5fZ2xvYmFsVmFyaWFibGVzLnNldCh0LGUpLG51bGwhPT10aGlzLnZhcmlhYmxlQ2hhbmdlZEV2ZW50JiZudWxsIT09biYmZSE9PW4ucmVzdWx0KWlmKHRoaXMuYmF0Y2hPYnNlcnZpbmdWYXJpYWJsZUNoYW5nZXMpe2lmKG51bGw9PT10aGlzLl9jaGFuZ2VkVmFyaWFibGVzRm9yQmF0Y2hPYnMpcmV0dXJuIGd0KFwidGhpcy5fY2hhbmdlZFZhcmlhYmxlc0ZvckJhdGNoT2JzXCIpO251bGwhPT10aGlzLnBhdGNoP3RoaXMucGF0Y2guQWRkQ2hhbmdlZFZhcmlhYmxlKHQpOm51bGwhPT10aGlzLl9jaGFuZ2VkVmFyaWFibGVzRm9yQmF0Y2hPYnMmJnRoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icy5hZGQodCl9ZWxzZSB0aGlzLnZhcmlhYmxlQ2hhbmdlZEV2ZW50KHQsZSl9fSx7a2V5OlwiUmVzb2x2ZVZhcmlhYmxlUG9pbnRlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuY29udGV4dEluZGV4Oy0xPT1lJiYoZT10aGlzLkdldENvbnRleHRJbmRleE9mVmFyaWFibGVOYW1lZCh0LnZhcmlhYmxlTmFtZSkpO3ZhciBuPXl0KHRoaXMuR2V0UmF3VmFyaWFibGVXaXRoTmFtZSh0LnZhcmlhYmxlTmFtZSxlKSxJKTtyZXR1cm4gbnVsbCE9bj9uOm5ldyBJKHQudmFyaWFibGVOYW1lLGUpfX0se2tleTpcIkdldENvbnRleHRJbmRleE9mVmFyaWFibGVOYW1lZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLkdsb2JhbFZhcmlhYmxlRXhpc3RzV2l0aE5hbWUodCk/MDp0aGlzLl9jYWxsU3RhY2suY3VycmVudEVsZW1lbnRJbmRleH19LHtrZXk6XCJPYnNlcnZlVmFyaWFibGVDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnZhcmlhYmxlQ2hhbmdlZEV2ZW50Q2FsbGJhY2tzLnB1c2godCl9fSx7a2V5OlwiYmF0Y2hPYnNlcnZpbmdWYXJpYWJsZUNoYW5nZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmF0Y2hPYnNlcnZpbmdWYXJpYWJsZUNoYW5nZXN9LHNldDpmdW5jdGlvbih0KXtpZih0aGlzLl9iYXRjaE9ic2VydmluZ1ZhcmlhYmxlQ2hhbmdlcz10KXRoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icz1uZXcgU2V0O2Vsc2UgaWYobnVsbCE9dGhpcy5fY2hhbmdlZFZhcmlhYmxlc0ZvckJhdGNoT2JzKXt2YXIgZSxuPXB0KHRoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icyk7dHJ5e2ZvcihuLnMoKTshKGU9bi5uKCkpLmRvbmU7KXt2YXIgaT1lLnZhbHVlLHI9dGhpcy5fZ2xvYmFsVmFyaWFibGVzLmdldChpKTtyP3RoaXMudmFyaWFibGVDaGFuZ2VkRXZlbnQoaSxyKTpndChcImN1cnJlbnRWYWx1ZVwiKX19Y2F0Y2godCl7bi5lKHQpfWZpbmFsbHl7bi5mKCl9dGhpcy5fY2hhbmdlZFZhcmlhYmxlc0ZvckJhdGNoT2JzPW51bGx9fX0se2tleTpcImNhbGxTdGFja1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYWxsU3RhY2t9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jYWxsU3RhY2s9dH19XSksbH0oKTt6LmRvbnRTYXZlRGVmYXVsdFZhbHVlcz0hMDt2YXIgTHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe20odGhpcyxlKSx0aGlzLnNlZWQ9dCUyMTQ3NDgzNjQ3LHRoaXMuc2VlZDw9MCYmKHRoaXMuc2VlZCs9MjE0NzQ4MzY0Nil9cmV0dXJuIGEoZSxbe2tleTpcIm5leHRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZWQ9MTY4MDcqdGhpcy5zZWVkJTIxNDc0ODM2NDd9fSx7a2V5OlwibmV4dEZsb2F0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5uZXh0KCktMSkvMjE0NzQ4MzY0Nn19XSksZX0oKSxIPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciB0O20odGhpcyxlKSx0aGlzLl9jaGFuZ2VkVmFyaWFibGVzPW5ldyBTZXQsdGhpcy5fdmlzaXRDb3VudHM9bmV3IE1hcCx0aGlzLl90dXJuSW5kaWNlcz1uZXcgTWFwLDE9PT1hcmd1bWVudHMubGVuZ3RoJiZudWxsIT09YXJndW1lbnRzWzBdPyh0PWFyZ3VtZW50c1swXSx0aGlzLl9nbG9iYWxzPW5ldyBNYXAodC5fZ2xvYmFscyksdGhpcy5fY2hhbmdlZFZhcmlhYmxlcz1uZXcgU2V0KHQuX2NoYW5nZWRWYXJpYWJsZXMpLHRoaXMuX3Zpc2l0Q291bnRzPW5ldyBNYXAodC5fdmlzaXRDb3VudHMpLHRoaXMuX3R1cm5JbmRpY2VzPW5ldyBNYXAodC5fdHVybkluZGljZXMpKToodGhpcy5fZ2xvYmFscz1uZXcgTWFwLHRoaXMuX2NoYW5nZWRWYXJpYWJsZXM9bmV3IFNldCx0aGlzLl92aXNpdENvdW50cz1uZXcgTWFwLHRoaXMuX3R1cm5JbmRpY2VzPW5ldyBNYXApfXJldHVybiBhKGUsW3trZXk6XCJUcnlHZXRHbG9iYWxcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT09dCYmdGhpcy5fZ2xvYmFscy5oYXModCk/e3Jlc3VsdDp0aGlzLl9nbG9iYWxzLmdldCh0KSxleGlzdHM6ITB9OntyZXN1bHQ6ZSxleGlzdHM6ITF9fX0se2tleTpcIlNldEdsb2JhbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fZ2xvYmFscy5zZXQodCxlKX19LHtrZXk6XCJBZGRDaGFuZ2VkVmFyaWFibGVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2hhbmdlZFZhcmlhYmxlcy5hZGQodCl9fSx7a2V5OlwiVHJ5R2V0VmlzaXRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3Zpc2l0Q291bnRzLmhhcyh0KT97cmVzdWx0OnRoaXMuX3Zpc2l0Q291bnRzLmdldCh0KSxleGlzdHM6ITB9OntyZXN1bHQ6ZSxleGlzdHM6ITF9fX0se2tleTpcIlNldFZpc2l0Q291bnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX3Zpc2l0Q291bnRzLnNldCh0LGUpfX0se2tleTpcIlNldFR1cm5JbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fdHVybkluZGljZXMuc2V0KHQsZSl9fSx7a2V5OlwiVHJ5R2V0VHVybkluZGV4XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fdHVybkluZGljZXMuaGFzKHQpP3tyZXN1bHQ6dGhpcy5fdHVybkluZGljZXMuZ2V0KHQpLGV4aXN0czohMH06e3Jlc3VsdDplLGV4aXN0czohMX19fSx7a2V5OlwiZ2xvYmFsc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nbG9iYWxzfX0se2tleTpcImNoYW5nZWRWYXJpYWJsZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhbmdlZFZhcmlhYmxlc319LHtrZXk6XCJ2aXNpdENvdW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aXNpdENvdW50c319LHtrZXk6XCJ0dXJuSW5kaWNlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90dXJuSW5kaWNlc319XSksZX0oKSwkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe20odGhpcyxlKX1yZXR1cm4gYShlLG51bGwsW3trZXk6XCJUZXh0VG9EaWN0aW9uYXJ5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlLlJlYWRlcih0KS5Ub0RpY3Rpb25hcnkoKX19LHtrZXk6XCJUZXh0VG9BcnJheVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZS5SZWFkZXIodCkuVG9BcnJheSgpfX1dKSxlfSgpOyFmdW5jdGlvbihuKXt2YXIgdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7bSh0aGlzLGUpLHRoaXMuX3Jvb3RPYmplY3Q9SlNPTi5wYXJzZSh0KX1yZXR1cm4gYShlLFt7a2V5OlwiVG9EaWN0aW9uYXJ5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm9vdE9iamVjdH19LHtrZXk6XCJUb0FycmF5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm9vdE9iamVjdH19XSksZX0oKTtuLlJlYWRlcj10O3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe20odGhpcyx0KSx0aGlzLl9jdXJyZW50UHJvcGVydHlOYW1lPW51bGwsdGhpcy5fY3VycmVudFN0cmluZz1udWxsLHRoaXMuX3N0YXRlU3RhY2s9W10sdGhpcy5fY29sbGVjdGlvblN0YWNrPVtdLHRoaXMuX3Byb3BlcnR5TmFtZVN0YWNrPVtdLHRoaXMuX2pzb25PYmplY3Q9bnVsbH1yZXR1cm4gYSh0LFt7a2V5OlwiV3JpdGVPYmplY3RcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLldyaXRlT2JqZWN0U3RhcnQoKSx0KHRoaXMpLHRoaXMuV3JpdGVPYmplY3RFbmQoKX19LHtrZXk6XCJXcml0ZU9iamVjdFN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLlN0YXJ0TmV3T2JqZWN0KCEwKTt2YXIgdCxlPXt9O3RoaXMuc3RhdGU9PT1uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eT8odGhpcy5Bc3NlcnQobnVsbCE9PXRoaXMuY3VycmVudENvbGxlY3Rpb24pLHRoaXMuQXNzZXJ0KG51bGwhPT10aGlzLmN1cnJlbnRQcm9wZXJ0eU5hbWUpLHQ9dGhpcy5fcHJvcGVydHlOYW1lU3RhY2sucG9wKCksdGhpcy5jdXJyZW50Q29sbGVjdGlvblt0XT1lKTp0aGlzLnN0YXRlPT09bi5Xcml0ZXIuU3RhdGUuQXJyYXk/KHRoaXMuQXNzZXJ0KG51bGwhPT10aGlzLmN1cnJlbnRDb2xsZWN0aW9uKSx0aGlzLmN1cnJlbnRDb2xsZWN0aW9uLnB1c2goZSkpOih0aGlzLkFzc2VydCh0aGlzLnN0YXRlPT09bi5Xcml0ZXIuU3RhdGUuTm9uZSksdGhpcy5fanNvbk9iamVjdD1lKSx0aGlzLl9jb2xsZWN0aW9uU3RhY2sucHVzaChlKSx0aGlzLl9zdGF0ZVN0YWNrLnB1c2gobmV3IG4uV3JpdGVyLlN0YXRlRWxlbWVudChuLldyaXRlci5TdGF0ZS5PYmplY3QpKX19LHtrZXk6XCJXcml0ZU9iamVjdEVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5Bc3NlcnQodGhpcy5zdGF0ZT09PW4uV3JpdGVyLlN0YXRlLk9iamVjdCksdGhpcy5fY29sbGVjdGlvblN0YWNrLnBvcCgpLHRoaXMuX3N0YXRlU3RhY2sucG9wKCl9fSx7a2V5OlwiV3JpdGVQcm9wZXJ0eVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5Xcml0ZVByb3BlcnR5U3RhcnQodCksZSBpbnN0YW5jZW9mIEZ1bmN0aW9uP2UodGhpcyk6dGhpcy5Xcml0ZShlKSx0aGlzLldyaXRlUHJvcGVydHlFbmQoKX19LHtrZXk6XCJXcml0ZUludFByb3BlcnR5XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLldyaXRlUHJvcGVydHlTdGFydCh0KSx0aGlzLldyaXRlSW50KGUpLHRoaXMuV3JpdGVQcm9wZXJ0eUVuZCgpfX0se2tleTpcIldyaXRlRmxvYXRQcm9wZXJ0eVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5Xcml0ZVByb3BlcnR5U3RhcnQodCksdGhpcy5Xcml0ZUZsb2F0KGUpLHRoaXMuV3JpdGVQcm9wZXJ0eUVuZCgpfX0se2tleTpcIldyaXRlUHJvcGVydHlTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuQXNzZXJ0KHRoaXMuc3RhdGU9PT1uLldyaXRlci5TdGF0ZS5PYmplY3QpLHRoaXMuX3Byb3BlcnR5TmFtZVN0YWNrLnB1c2godCksdGhpcy5JbmNyZW1lbnRDaGlsZENvdW50KCksdGhpcy5fc3RhdGVTdGFjay5wdXNoKG5ldyBuLldyaXRlci5TdGF0ZUVsZW1lbnQobi5Xcml0ZXIuU3RhdGUuUHJvcGVydHkpKX19LHtrZXk6XCJXcml0ZVByb3BlcnR5RW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLkFzc2VydCh0aGlzLnN0YXRlPT09bi5Xcml0ZXIuU3RhdGUuUHJvcGVydHkpLHRoaXMuQXNzZXJ0KDE9PT10aGlzLmNoaWxkQ291bnQpLHRoaXMuX3N0YXRlU3RhY2sucG9wKCl9fSx7a2V5OlwiV3JpdGVQcm9wZXJ0eU5hbWVTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5Bc3NlcnQodGhpcy5zdGF0ZT09PW4uV3JpdGVyLlN0YXRlLk9iamVjdCksdGhpcy5JbmNyZW1lbnRDaGlsZENvdW50KCksdGhpcy5fY3VycmVudFByb3BlcnR5TmFtZT1cIlwiLHRoaXMuX3N0YXRlU3RhY2sucHVzaChuZXcgbi5Xcml0ZXIuU3RhdGVFbGVtZW50KG4uV3JpdGVyLlN0YXRlLlByb3BlcnR5KSksdGhpcy5fc3RhdGVTdGFjay5wdXNoKG5ldyBuLldyaXRlci5TdGF0ZUVsZW1lbnQobi5Xcml0ZXIuU3RhdGUuUHJvcGVydHlOYW1lKSl9fSx7a2V5OlwiV3JpdGVQcm9wZXJ0eU5hbWVFbmRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuQXNzZXJ0KHRoaXMuc3RhdGU9PT1uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eU5hbWUpLHRoaXMuQXNzZXJ0KG51bGwhPT10aGlzLl9jdXJyZW50UHJvcGVydHlOYW1lKSx0aGlzLl9wcm9wZXJ0eU5hbWVTdGFjay5wdXNoKHRoaXMuX2N1cnJlbnRQcm9wZXJ0eU5hbWUpLHRoaXMuX2N1cnJlbnRQcm9wZXJ0eU5hbWU9bnVsbCx0aGlzLl9zdGF0ZVN0YWNrLnBvcCgpfX0se2tleTpcIldyaXRlUHJvcGVydHlOYW1lSW5uZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLkFzc2VydCh0aGlzLnN0YXRlPT09bi5Xcml0ZXIuU3RhdGUuUHJvcGVydHlOYW1lKSx0aGlzLkFzc2VydChudWxsIT09dGhpcy5fY3VycmVudFByb3BlcnR5TmFtZSksdGhpcy5fY3VycmVudFByb3BlcnR5TmFtZSs9dH19LHtrZXk6XCJXcml0ZUFycmF5U3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuU3RhcnROZXdPYmplY3QoITApO3ZhciB0LGU9W107dGhpcy5zdGF0ZT09PW4uV3JpdGVyLlN0YXRlLlByb3BlcnR5Pyh0aGlzLkFzc2VydChudWxsIT09dGhpcy5jdXJyZW50Q29sbGVjdGlvbiksdGhpcy5Bc3NlcnQobnVsbCE9PXRoaXMuY3VycmVudFByb3BlcnR5TmFtZSksdD10aGlzLl9wcm9wZXJ0eU5hbWVTdGFjay5wb3AoKSx0aGlzLmN1cnJlbnRDb2xsZWN0aW9uW3RdPWUpOnRoaXMuc3RhdGU9PT1uLldyaXRlci5TdGF0ZS5BcnJheT8odGhpcy5Bc3NlcnQobnVsbCE9PXRoaXMuY3VycmVudENvbGxlY3Rpb24pLHRoaXMuY3VycmVudENvbGxlY3Rpb24ucHVzaChlKSk6KHRoaXMuQXNzZXJ0KHRoaXMuc3RhdGU9PT1uLldyaXRlci5TdGF0ZS5Ob25lKSx0aGlzLl9qc29uT2JqZWN0PWUpLHRoaXMuX2NvbGxlY3Rpb25TdGFjay5wdXNoKGUpLHRoaXMuX3N0YXRlU3RhY2sucHVzaChuZXcgbi5Xcml0ZXIuU3RhdGVFbGVtZW50KG4uV3JpdGVyLlN0YXRlLkFycmF5KSl9fSx7a2V5OlwiV3JpdGVBcnJheUVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5Bc3NlcnQodGhpcy5zdGF0ZT09PW4uV3JpdGVyLlN0YXRlLkFycmF5KSx0aGlzLl9jb2xsZWN0aW9uU3RhY2sucG9wKCksdGhpcy5fc3RhdGVTdGFjay5wb3AoKX19LHtrZXk6XCJXcml0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe251bGwhPT10Pyh0aGlzLlN0YXJ0TmV3T2JqZWN0KCExKSx0aGlzLl9hZGRUb0N1cnJlbnRPYmplY3QodCkpOmNvbnNvbGUuZXJyb3IoXCJXYXJuaW5nOiB0cnlpbmcgdG8gd3JpdGUgYSBudWxsIHN0cmluZ1wiKX19LHtrZXk6XCJXcml0ZUludFwiLHZhbHVlOmZ1bmN0aW9uKHQpe251bGwhPT10JiYodGhpcy5TdGFydE5ld09iamVjdCghMSksdGhpcy5fYWRkVG9DdXJyZW50T2JqZWN0KE1hdGguZmxvb3IodCkpKX19LHtrZXk6XCJXcml0ZUZsb2F0XCIsdmFsdWU6ZnVuY3Rpb24odCl7bnVsbCE9PXQmJih0aGlzLlN0YXJ0TmV3T2JqZWN0KCExKSx0PT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk/dGhpcy5fYWRkVG9DdXJyZW50T2JqZWN0KDM0ZTM3KTp0PT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk/dGhpcy5fYWRkVG9DdXJyZW50T2JqZWN0KC0zNGUzNyk6aXNOYU4odCk/dGhpcy5fYWRkVG9DdXJyZW50T2JqZWN0KDApOnRoaXMuX2FkZFRvQ3VycmVudE9iamVjdCh0KSl9fSx7a2V5OlwiV3JpdGVOdWxsXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLlN0YXJ0TmV3T2JqZWN0KCExKSx0aGlzLl9hZGRUb0N1cnJlbnRPYmplY3QobnVsbCl9fSx7a2V5OlwiV3JpdGVTdHJpbmdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5TdGFydE5ld09iamVjdCghMSksdGhpcy5fY3VycmVudFN0cmluZz1cIlwiLHRoaXMuX3N0YXRlU3RhY2sucHVzaChuZXcgbi5Xcml0ZXIuU3RhdGVFbGVtZW50KG4uV3JpdGVyLlN0YXRlLlN0cmluZykpfX0se2tleTpcIldyaXRlU3RyaW5nRW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLkFzc2VydCh0aGlzLnN0YXRlPT1uLldyaXRlci5TdGF0ZS5TdHJpbmcpLHRoaXMuX3N0YXRlU3RhY2sucG9wKCksdGhpcy5fYWRkVG9DdXJyZW50T2JqZWN0KHRoaXMuX2N1cnJlbnRTdHJpbmcpLHRoaXMuX2N1cnJlbnRTdHJpbmc9bnVsbH19LHtrZXk6XCJXcml0ZVN0cmluZ0lubmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5Bc3NlcnQodGhpcy5zdGF0ZT09PW4uV3JpdGVyLlN0YXRlLlN0cmluZyksbnVsbCE9PXQ/dGhpcy5fY3VycmVudFN0cmluZys9dDpjb25zb2xlLmVycm9yKFwiV2FybmluZzogdHJ5aW5nIHRvIHdyaXRlIGEgbnVsbCBzdHJpbmdcIil9fSx7a2V5OlwiVG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fanNvbk9iamVjdD9cIlwiOkpTT04uc3RyaW5naWZ5KHRoaXMuX2pzb25PYmplY3QpfX0se2tleTpcIlN0YXJ0TmV3T2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dD90aGlzLkFzc2VydCh0aGlzLnN0YXRlPT09bi5Xcml0ZXIuU3RhdGUuTm9uZXx8dGhpcy5zdGF0ZT09PW4uV3JpdGVyLlN0YXRlLlByb3BlcnR5fHx0aGlzLnN0YXRlPT09bi5Xcml0ZXIuU3RhdGUuQXJyYXkpOnRoaXMuQXNzZXJ0KHRoaXMuc3RhdGU9PT1uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eXx8dGhpcy5zdGF0ZT09PW4uV3JpdGVyLlN0YXRlLkFycmF5KSx0aGlzLnN0YXRlPT09bi5Xcml0ZXIuU3RhdGUuUHJvcGVydHkmJnRoaXMuQXNzZXJ0KDA9PT10aGlzLmNoaWxkQ291bnQpLHRoaXMuc3RhdGUhPT1uLldyaXRlci5TdGF0ZS5BcnJheSYmdGhpcy5zdGF0ZSE9PW4uV3JpdGVyLlN0YXRlLlByb3BlcnR5fHx0aGlzLkluY3JlbWVudENoaWxkQ291bnQoKX19LHtrZXk6XCJJbmNyZW1lbnRDaGlsZENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLkFzc2VydCgwPHRoaXMuX3N0YXRlU3RhY2subGVuZ3RoKTt2YXIgdD10aGlzLl9zdGF0ZVN0YWNrLnBvcCgpO3QuY2hpbGRDb3VudCsrLHRoaXMuX3N0YXRlU3RhY2sucHVzaCh0KX19LHtrZXk6XCJBc3NlcnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZighdCl0aHJvdyBFcnJvcihcIkFzc2VydCBmYWlsZWQgd2hpbGUgd3JpdGluZyBKU09OXCIpfX0se2tleTpcIl9hZGRUb0N1cnJlbnRPYmplY3RcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLkFzc2VydChudWxsIT09dGhpcy5jdXJyZW50Q29sbGVjdGlvbiksdGhpcy5zdGF0ZT09PW4uV3JpdGVyLlN0YXRlLkFycmF5Pyh0aGlzLkFzc2VydChBcnJheS5pc0FycmF5KHRoaXMuY3VycmVudENvbGxlY3Rpb24pKSx0aGlzLmN1cnJlbnRDb2xsZWN0aW9uLnB1c2godCkpOnRoaXMuc3RhdGU9PT1uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eSYmKHRoaXMuQXNzZXJ0KCFBcnJheS5pc0FycmF5KHRoaXMuY3VycmVudENvbGxlY3Rpb24pKSx0aGlzLkFzc2VydChudWxsIT09dGhpcy5jdXJyZW50UHJvcGVydHlOYW1lKSx0aGlzLmN1cnJlbnRDb2xsZWN0aW9uW3RoaXMuY3VycmVudFByb3BlcnR5TmFtZV09dCx0aGlzLl9wcm9wZXJ0eU5hbWVTdGFjay5wb3AoKSl9fSx7a2V5Olwic3RhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLl9zdGF0ZVN0YWNrLmxlbmd0aD90aGlzLl9zdGF0ZVN0YWNrW3RoaXMuX3N0YXRlU3RhY2subGVuZ3RoLTFdLnR5cGU6bi5Xcml0ZXIuU3RhdGUuTm9uZX19LHtrZXk6XCJjaGlsZENvdW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5fc3RhdGVTdGFjay5sZW5ndGg/dGhpcy5fc3RhdGVTdGFja1t0aGlzLl9zdGF0ZVN0YWNrLmxlbmd0aC0xXS5jaGlsZENvdW50OjB9fSx7a2V5OlwiY3VycmVudENvbGxlY3Rpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLl9jb2xsZWN0aW9uU3RhY2subGVuZ3RoP3RoaXMuX2NvbGxlY3Rpb25TdGFja1t0aGlzLl9jb2xsZWN0aW9uU3RhY2subGVuZ3RoLTFdOm51bGx9fSx7a2V5OlwiY3VycmVudFByb3BlcnR5TmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiAwPHRoaXMuX3Byb3BlcnR5TmFtZVN0YWNrLmxlbmd0aD90aGlzLl9wcm9wZXJ0eU5hbWVTdGFja1t0aGlzLl9wcm9wZXJ0eU5hbWVTdGFjay5sZW5ndGgtMV06bnVsbH19XSksdH0oKTtuLldyaXRlcj1lLGZ1bmN0aW9uKHQpe3ZhciBlOyhlPXQuU3RhdGV8fCh0LlN0YXRlPXt9KSlbZS5Ob25lPTBdPVwiTm9uZVwiLGVbZS5PYmplY3Q9MV09XCJPYmplY3RcIixlW2UuQXJyYXk9Ml09XCJBcnJheVwiLGVbZS5Qcm9wZXJ0eT0zXT1cIlByb3BlcnR5XCIsZVtlLlByb3BlcnR5TmFtZT00XT1cIlByb3BlcnR5TmFtZVwiLGVbZS5TdHJpbmc9NV09XCJTdHJpbmdcIjt0LlN0YXRlRWxlbWVudD1mdW5jdGlvbiB0KGUpe20odGhpcyx0KSx0aGlzLnR5cGU9bi5Xcml0ZXIuU3RhdGUuTm9uZSx0aGlzLmNoaWxkQ291bnQ9MCx0aGlzLnR5cGU9ZX19KGU9bi5Xcml0ZXJ8fChuLldyaXRlcj17fSkpfSgkPSR8fHt9KTt2YXIgWCxZLFE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQpe20odGhpcyxuKSx0aGlzLmtJbmtTYXZlU3RhdGVWZXJzaW9uPTgsdGhpcy5rTWluQ29tcGF0aWJsZUxvYWRWZXJzaW9uPTgsdGhpcy5fY3VycmVudEVycm9ycz1udWxsLHRoaXMuX2N1cnJlbnRXYXJuaW5ncz1udWxsLHRoaXMuZGl2ZXJ0ZWRQb2ludGVyPXh0Lk51bGwsdGhpcy5fY3VycmVudFR1cm5JbmRleD0wLHRoaXMuc3RvcnlTZWVkPTAsdGhpcy5wcmV2aW91c1JhbmRvbT0wLHRoaXMuZGlkU2FmZUV4aXQ9ITEsdGhpcy5fY3VycmVudFRleHQ9bnVsbCx0aGlzLl9jdXJyZW50VGFncz1udWxsLHRoaXMuX291dHB1dFN0cmVhbVRleHREaXJ0eT0hMCx0aGlzLl9vdXRwdXRTdHJlYW1UYWdzRGlydHk9ITAsdGhpcy5fcGF0Y2g9bnVsbCx0aGlzLnN0b3J5PXQsdGhpcy5fb3V0cHV0U3RyZWFtPVtdLHRoaXMuT3V0cHV0U3RyZWFtRGlydHkoKSx0aGlzLl9ldmFsdWF0aW9uU3RhY2s9W10sdGhpcy5jYWxsU3RhY2s9bmV3IFUodCksdGhpcy5fdmFyaWFibGVzU3RhdGU9bmV3IHoodGhpcy5jYWxsU3RhY2ssdC5saXN0RGVmaW5pdGlvbnMpLHRoaXMuX3Zpc2l0Q291bnRzPW5ldyBNYXAsdGhpcy5fdHVybkluZGljZXM9bmV3IE1hcCx0aGlzLmN1cnJlbnRUdXJuSW5kZXg9LTE7dmFyIGU9KG5ldyBEYXRlKS5nZXRUaW1lKCk7dGhpcy5zdG9yeVNlZWQ9bmV3IEx0KGUpLm5leHQoKSUxMDAsdGhpcy5wcmV2aW91c1JhbmRvbT0wLHRoaXMuX2N1cnJlbnRDaG9pY2VzPVtdLHRoaXMuR29Ub1N0YXJ0KCl9cmV0dXJuIGEobixbe2tleTpcIlRvSnNvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3ICQuV3JpdGVyO3JldHVybiB0aGlzLldyaXRlSnNvbih0KSx0LlRvU3RyaW5nKCl9fSx7a2V5OlwidG9Kc29uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10JiZ0O3JldHVybiB0aGlzLlRvSnNvbihlKX19LHtrZXk6XCJMb2FkSnNvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSQuVGV4dFRvRGljdGlvbmFyeSh0KTt0aGlzLkxvYWRKc29uT2JqKGUpfX0se2tleTpcIlZpc2l0Q291bnRBdFBhdGhTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZTtpZihudWxsIT09dGhpcy5fcGF0Y2gpe3ZhciBuPXRoaXMuc3RvcnkuQ29udGVudEF0UGF0aChuZXcgRSh0KSkuY29udGFpbmVyO2lmKG51bGw9PT1uKXRocm93IG5ldyBFcnJvcihcIkNvbnRlbnQgYXQgcGF0aCBub3QgZm91bmQ6IFwiK3QpO2lmKChlPXRoaXMuX3BhdGNoLlRyeUdldFZpc2l0Q291bnQobiwwKSkuZXhpc3RzKXJldHVybiBlLnJlc3VsdH1yZXR1cm4oZT13KHRoaXMuX3Zpc2l0Q291bnRzLHQsbnVsbCkpLmV4aXN0cz9lLnJlc3VsdDowfX0se2tleTpcIlZpc2l0Q291bnRGb3JDb250YWluZXJcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihudWxsPT09dClyZXR1cm4gZ3QoXCJjb250YWluZXJcIik7aWYoIXQudmlzaXRzU2hvdWxkQmVDb3VudGVkKXJldHVybiB0aGlzLnN0b3J5LkVycm9yKFwiUmVhZCBjb3VudCBmb3IgdGFyZ2V0IChcIit0Lm5hbWUrXCIgLSBvbiBcIit0LmRlYnVnTWV0YWRhdGErXCIpIHVua25vd24uIFRoZSBzdG9yeSBtYXkgbmVlZCB0byBiZSBjb21waWxlZCB3aXRoIGNvdW50QWxsVmlzaXRzIGZsYWcgKC1jKS5cIiksMDtpZihudWxsIT09dGhpcy5fcGF0Y2gpe3ZhciBlPXRoaXMuX3BhdGNoLlRyeUdldFZpc2l0Q291bnQodCwwKTtpZihlLmV4aXN0cylyZXR1cm4gZS5yZXN1bHR9dmFyIG49dC5wYXRoLnRvU3RyaW5nKCksaT13KHRoaXMuX3Zpc2l0Q291bnRzLG4sbnVsbCk7cmV0dXJuIGkuZXhpc3RzP2kucmVzdWx0OjB9fSx7a2V5OlwiSW5jcmVtZW50VmlzaXRDb3VudEZvckNvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKG51bGwhPT10aGlzLl9wYXRjaCl7dmFyIGU9dGhpcy5WaXNpdENvdW50Rm9yQ29udGFpbmVyKHQpO3JldHVybiBlKyssdm9pZCB0aGlzLl9wYXRjaC5TZXRWaXNpdENvdW50KHQsZSl9dmFyIG49dC5wYXRoLnRvU3RyaW5nKCksaT13KHRoaXMuX3Zpc2l0Q291bnRzLG4sbnVsbCk7aS5leGlzdHM/dGhpcy5fdmlzaXRDb3VudHMuc2V0KG4saS5yZXN1bHQrMSk6dGhpcy5fdmlzaXRDb3VudHMuc2V0KG4sMSl9fSx7a2V5OlwiUmVjb3JkVHVybkluZGV4VmlzaXRUb0NvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlO251bGw9PT10aGlzLl9wYXRjaD8oZT10LnBhdGgudG9TdHJpbmcoKSx0aGlzLl90dXJuSW5kaWNlcy5zZXQoZSx0aGlzLmN1cnJlbnRUdXJuSW5kZXgpKTp0aGlzLl9wYXRjaC5TZXRUdXJuSW5kZXgodCx0aGlzLmN1cnJlbnRUdXJuSW5kZXgpfX0se2tleTpcIlR1cm5zU2luY2VGb3JDb250YWluZXJcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0LnR1cm5JbmRleFNob3VsZEJlQ291bnRlZHx8dGhpcy5zdG9yeS5FcnJvcihcIlRVUk5TX1NJTkNFKCkgZm9yIHRhcmdldCAoXCIrdC5uYW1lK1wiIC0gb24gXCIrdC5kZWJ1Z01ldGFkYXRhK1wiKSB1bmtub3duLiBUaGUgc3RvcnkgbWF5IG5lZWQgdG8gYmUgY29tcGlsZWQgd2l0aCBjb3VudEFsbFZpc2l0cyBmbGFnICgtYykuXCIpLG51bGwhPT10aGlzLl9wYXRjaCl7dmFyIGU9dGhpcy5fcGF0Y2guVHJ5R2V0VHVybkluZGV4KHQsMCk7aWYoZS5leGlzdHMpcmV0dXJuIHRoaXMuY3VycmVudFR1cm5JbmRleC1lLnJlc3VsdH12YXIgbj10LnBhdGgudG9TdHJpbmcoKSxpPXcodGhpcy5fdHVybkluZGljZXMsbiwwKTtyZXR1cm4gaS5leGlzdHM/dGhpcy5jdXJyZW50VHVybkluZGV4LWkucmVzdWx0Oi0xfX0se2tleTpcIkNsZWFuT3V0cHV0V2hpdGVzcGFjZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgU3Qsbj0tMSxpPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgYT10LmNoYXJBdChyKSxzPVwiIFwiPT1hfHxcIlxcdFwiPT1hO3MmJi0xPT1uJiYobj1yKSxzfHwoXCJcXG5cIiE9YSYmMDxuJiZuIT1pJiZlLkFwcGVuZChcIiBcIiksbj0tMSksXCJcXG5cIj09YSYmKGk9cisxKSxzfHxlLkFwcGVuZChhKX1yZXR1cm4gZS50b1N0cmluZygpfX0se2tleTpcIkdvVG9TdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQuY3VycmVudFBvaW50ZXI9eHQuU3RhcnRPZih0aGlzLnN0b3J5Lm1haW5Db250ZW50Q29udGFpbmVyKX19LHtrZXk6XCJDb3B5QW5kU3RhcnRQYXRjaGluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4odGhpcy5zdG9yeSk7cmV0dXJuIHQuX3BhdGNoPW5ldyBIKHRoaXMuX3BhdGNoKSx0Lm91dHB1dFN0cmVhbS5wdXNoLmFwcGx5KHQub3V0cHV0U3RyZWFtLHRoaXMuX291dHB1dFN0cmVhbSksdC5PdXRwdXRTdHJlYW1EaXJ0eSgpLHQuX2N1cnJlbnRDaG9pY2VzLnB1c2guYXBwbHkodC5fY3VycmVudENob2ljZXMsdGhpcy5fY3VycmVudENob2ljZXMpLHRoaXMuaGFzRXJyb3ImJih0Ll9jdXJyZW50RXJyb3JzPVtdLHQuX2N1cnJlbnRFcnJvcnMucHVzaC5hcHBseSh0Ll9jdXJyZW50RXJyb3JzLHRoaXMuY3VycmVudEVycm9yc3x8W10pKSx0aGlzLmhhc1dhcm5pbmcmJih0Ll9jdXJyZW50V2FybmluZ3M9W10sdC5fY3VycmVudFdhcm5pbmdzLnB1c2guYXBwbHkodC5fY3VycmVudFdhcm5pbmdzLHRoaXMuY3VycmVudFdhcm5pbmdzfHxbXSkpLHQuY2FsbFN0YWNrPW5ldyBVKHRoaXMuY2FsbFN0YWNrKSx0LnZhcmlhYmxlc1N0YXRlPXRoaXMudmFyaWFibGVzU3RhdGUsdC52YXJpYWJsZXNTdGF0ZS5jYWxsU3RhY2s9dC5jYWxsU3RhY2ssdC52YXJpYWJsZXNTdGF0ZS5wYXRjaD10Ll9wYXRjaCx0LmV2YWx1YXRpb25TdGFjay5wdXNoLmFwcGx5KHQuZXZhbHVhdGlvblN0YWNrLHRoaXMuZXZhbHVhdGlvblN0YWNrKSx0aGlzLmRpdmVydGVkUG9pbnRlci5pc051bGx8fCh0LmRpdmVydGVkUG9pbnRlcj10aGlzLmRpdmVydGVkUG9pbnRlci5jb3B5KCkpLHQucHJldmlvdXNQb2ludGVyPXRoaXMucHJldmlvdXNQb2ludGVyLmNvcHkoKSx0Ll92aXNpdENvdW50cz10aGlzLl92aXNpdENvdW50cyx0Ll90dXJuSW5kaWNlcz10aGlzLl90dXJuSW5kaWNlcyx0LmN1cnJlbnRUdXJuSW5kZXg9dGhpcy5jdXJyZW50VHVybkluZGV4LHQuc3RvcnlTZWVkPXRoaXMuc3RvcnlTZWVkLHQucHJldmlvdXNSYW5kb209dGhpcy5wcmV2aW91c1JhbmRvbSx0LmRpZFNhZmVFeGl0PXRoaXMuZGlkU2FmZUV4aXQsdH19LHtrZXk6XCJSZXN0b3JlQWZ0ZXJQYXRjaFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy52YXJpYWJsZXNTdGF0ZS5jYWxsU3RhY2s9dGhpcy5jYWxsU3RhY2ssdGhpcy52YXJpYWJsZXNTdGF0ZS5wYXRjaD10aGlzLl9wYXRjaH19LHtrZXk6XCJBcHBseUFueVBhdGNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy5fcGF0Y2gpe3RoaXMudmFyaWFibGVzU3RhdGUuQXBwbHlQYXRjaCgpO3ZhciB0LGU9cHQodGhpcy5fcGF0Y2gudmlzaXRDb3VudHMpO3RyeXtmb3IoZS5zKCk7ISh0PWUubigpKS5kb25lOyl7dmFyIG49Uyh0LnZhbHVlLDIpLGk9blswXSxyPW5bMV07dGhpcy5BcHBseUNvdW50Q2hhbmdlcyhpLHIsITApfX1jYXRjaCh0KXtlLmUodCl9ZmluYWxseXtlLmYoKX12YXIgYSxzPXB0KHRoaXMuX3BhdGNoLnR1cm5JbmRpY2VzKTt0cnl7Zm9yKHMucygpOyEoYT1zLm4oKSkuZG9uZTspe3ZhciBvPVMoYS52YWx1ZSwyKSx1PW9bMF0sbD1vWzFdO3RoaXMuQXBwbHlDb3VudENoYW5nZXModSxsLCExKX19Y2F0Y2godCl7cy5lKHQpfWZpbmFsbHl7cy5mKCl9dGhpcy5fcGF0Y2g9bnVsbH19fSx7a2V5OlwiQXBwbHlDb3VudENoYW5nZXNcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7KG4/dGhpcy5fdmlzaXRDb3VudHM6dGhpcy5fdHVybkluZGljZXMpLnNldCh0LnBhdGgudG9TdHJpbmcoKSxlKX19LHtrZXk6XCJXcml0ZUpzb25cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10aGlzO3QuV3JpdGVPYmplY3RTdGFydCgpO3ZhciBlLG49ITEsaT1wdCh0aGlzLl9jdXJyZW50Q2hvaWNlcyk7dHJ5e2ZvcihpLnMoKTshKGU9aS5uKCkpLmRvbmU7KXt2YXIgYT1lLnZhbHVlO2lmKG51bGw9PT1hLnRocmVhZEF0R2VuZXJhdGlvbilyZXR1cm4gZ3QoXCJjLnRocmVhZEF0R2VuZXJhdGlvblwiKTthLm9yaWdpbmFsVGhyZWFkSW5kZXg9YS50aHJlYWRBdEdlbmVyYXRpb24udGhyZWFkSW5kZXgsbnVsbD09PXRoaXMuY2FsbFN0YWNrLlRocmVhZFdpdGhJbmRleChhLm9yaWdpbmFsVGhyZWFkSW5kZXgpJiYobnx8KG49ITAsdC5Xcml0ZVByb3BlcnR5U3RhcnQoXCJjaG9pY2VUaHJlYWRzXCIpLHQuV3JpdGVPYmplY3RTdGFydCgpKSx0LldyaXRlUHJvcGVydHlTdGFydChhLm9yaWdpbmFsVGhyZWFkSW5kZXgpLGEudGhyZWFkQXRHZW5lcmF0aW9uLldyaXRlSnNvbih0KSx0LldyaXRlUHJvcGVydHlFbmQoKSl9fWNhdGNoKHQpe2kuZSh0KX1maW5hbGx5e2kuZigpfWlmKG4mJih0LldyaXRlT2JqZWN0RW5kKCksdC5Xcml0ZVByb3BlcnR5RW5kKCkpLHQuV3JpdGVQcm9wZXJ0eShcImNhbGxzdGFja1RocmVhZHNcIixmdW5jdGlvbih0KXtyZXR1cm4gci5jYWxsU3RhY2suV3JpdGVKc29uKHQpfSksdC5Xcml0ZVByb3BlcnR5KFwidmFyaWFibGVzU3RhdGVcIixmdW5jdGlvbih0KXtyZXR1cm4gci52YXJpYWJsZXNTdGF0ZS5Xcml0ZUpzb24odCl9KSx0LldyaXRlUHJvcGVydHkoXCJldmFsU3RhY2tcIixmdW5jdGlvbih0KXtyZXR1cm4gSy5Xcml0ZUxpc3RSdW50aW1lT2Jqcyh0LHIuZXZhbHVhdGlvblN0YWNrKX0pLHQuV3JpdGVQcm9wZXJ0eShcIm91dHB1dFN0cmVhbVwiLGZ1bmN0aW9uKHQpe3JldHVybiBLLldyaXRlTGlzdFJ1bnRpbWVPYmpzKHQsci5fb3V0cHV0U3RyZWFtKX0pLHQuV3JpdGVQcm9wZXJ0eShcImN1cnJlbnRDaG9pY2VzXCIsZnVuY3Rpb24odCl7dC5Xcml0ZUFycmF5U3RhcnQoKTt2YXIgZSxuPXB0KHIuX2N1cnJlbnRDaG9pY2VzKTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciBpPWUudmFsdWU7Sy5Xcml0ZUNob2ljZSh0LGkpfX1jYXRjaCh0KXtuLmUodCl9ZmluYWxseXtuLmYoKX10LldyaXRlQXJyYXlFbmQoKX0pLCF0aGlzLmRpdmVydGVkUG9pbnRlci5pc051bGwpe2lmKG51bGw9PT10aGlzLmRpdmVydGVkUG9pbnRlci5wYXRoKXJldHVybiBndChcImRpdmVydGVkUG9pbnRlclwiKTt0LldyaXRlUHJvcGVydHkoXCJjdXJyZW50RGl2ZXJ0VGFyZ2V0XCIsdGhpcy5kaXZlcnRlZFBvaW50ZXIucGF0aC5jb21wb25lbnRzU3RyaW5nKX10LldyaXRlUHJvcGVydHkoXCJ2aXNpdENvdW50c1wiLGZ1bmN0aW9uKHQpe3JldHVybiBLLldyaXRlSW50RGljdGlvbmFyeSh0LHIuX3Zpc2l0Q291bnRzKX0pLHQuV3JpdGVQcm9wZXJ0eShcInR1cm5JbmRpY2VzXCIsZnVuY3Rpb24odCl7cmV0dXJuIEsuV3JpdGVJbnREaWN0aW9uYXJ5KHQsci5fdHVybkluZGljZXMpfSksdC5Xcml0ZUludFByb3BlcnR5KFwidHVybklkeFwiLHRoaXMuY3VycmVudFR1cm5JbmRleCksdC5Xcml0ZUludFByb3BlcnR5KFwic3RvcnlTZWVkXCIsdGhpcy5zdG9yeVNlZWQpLHQuV3JpdGVJbnRQcm9wZXJ0eShcInByZXZpb3VzUmFuZG9tXCIsdGhpcy5wcmV2aW91c1JhbmRvbSksdC5Xcml0ZUludFByb3BlcnR5KFwiaW5rU2F2ZVZlcnNpb25cIix0aGlzLmtJbmtTYXZlU3RhdGVWZXJzaW9uKSx0LldyaXRlSW50UHJvcGVydHkoXCJpbmtGb3JtYXRWZXJzaW9uXCIsby5TdG9yeS5pbmtWZXJzaW9uQ3VycmVudCksdC5Xcml0ZU9iamVjdEVuZCgpfX0se2tleTpcIkxvYWRKc29uT2JqXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dCxuPWUuaW5rU2F2ZVZlcnNpb247aWYobnVsbD09bil0aHJvdyBuZXcgYnQoXCJpbmsgc2F2ZSBmb3JtYXQgaW5jb3JyZWN0LCBjYW4ndCBsb2FkLlwiKTtpZihwYXJzZUludChuKTx0aGlzLmtNaW5Db21wYXRpYmxlTG9hZFZlcnNpb24pdGhyb3cgbmV3IGJ0KFwiSW5rIHNhdmUgZm9ybWF0IGlzbid0IGNvbXBhdGlibGUgd2l0aCB0aGUgY3VycmVudCB2ZXJzaW9uIChzYXcgJ1wiK24rXCInLCBidXQgbWluaW11bSBpcyBcIit0aGlzLmtNaW5Db21wYXRpYmxlTG9hZFZlcnNpb24rXCIpLCBzbyBjYW4ndCBsb2FkLlwiKTt0aGlzLmNhbGxTdGFjay5TZXRKc29uVG9rZW4oZS5jYWxsc3RhY2tUaHJlYWRzLHRoaXMuc3RvcnkpLHRoaXMudmFyaWFibGVzU3RhdGUuU2V0SnNvblRva2VuKGUudmFyaWFibGVzU3RhdGUpLHRoaXMuX2V2YWx1YXRpb25TdGFjaz1LLkpBcnJheVRvUnVudGltZU9iakxpc3QoZS5ldmFsU3RhY2spLHRoaXMuX291dHB1dFN0cmVhbT1LLkpBcnJheVRvUnVudGltZU9iakxpc3QoZS5vdXRwdXRTdHJlYW0pLHRoaXMuT3V0cHV0U3RyZWFtRGlydHkoKSx0aGlzLl9jdXJyZW50Q2hvaWNlcz1LLkpBcnJheVRvUnVudGltZU9iakxpc3QoZS5jdXJyZW50Q2hvaWNlcyk7dmFyIGkscj1lLmN1cnJlbnREaXZlcnRUYXJnZXQ7bnVsbCE9ciYmKGk9bmV3IEUoci50b1N0cmluZygpKSx0aGlzLmRpdmVydGVkUG9pbnRlcj10aGlzLnN0b3J5LlBvaW50ZXJBdFBhdGgoaSkpLHRoaXMuX3Zpc2l0Q291bnRzPUsuSk9iamVjdFRvSW50RGljdGlvbmFyeShlLnZpc2l0Q291bnRzKSx0aGlzLl90dXJuSW5kaWNlcz1LLkpPYmplY3RUb0ludERpY3Rpb25hcnkoZS50dXJuSW5kaWNlcyksdGhpcy5jdXJyZW50VHVybkluZGV4PXBhcnNlSW50KGUudHVybklkeCksdGhpcy5zdG9yeVNlZWQ9cGFyc2VJbnQoZS5zdG9yeVNlZWQpLHRoaXMucHJldmlvdXNSYW5kb209cGFyc2VJbnQoZS5wcmV2aW91c1JhbmRvbSk7dmFyIGEscz1lLmNob2ljZVRocmVhZHMsbz1wdCh0aGlzLl9jdXJyZW50Q2hvaWNlcyk7dHJ5e2ZvcihvLnMoKTshKGE9by5uKCkpLmRvbmU7KXt2YXIgdSxsPWEudmFsdWUsaD10aGlzLmNhbGxTdGFjay5UaHJlYWRXaXRoSW5kZXgobC5vcmlnaW5hbFRocmVhZEluZGV4KTtudWxsIT1oP2wudGhyZWFkQXRHZW5lcmF0aW9uPWguQ29weSgpOih1PXNbbC5vcmlnaW5hbFRocmVhZEluZGV4LnRvU3RyaW5nKCldLGwudGhyZWFkQXRHZW5lcmF0aW9uPW5ldyBVLlRocmVhZCh1LHRoaXMuc3RvcnkpKX19Y2F0Y2godCl7by5lKHQpfWZpbmFsbHl7by5mKCl9fX0se2tleTpcIlJlc2V0RXJyb3JzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50RXJyb3JzPW51bGwsdGhpcy5fY3VycmVudFdhcm5pbmdzPW51bGx9fSx7a2V5OlwiUmVzZXRPdXRwdXRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQ/dDpudWxsO3RoaXMuX291dHB1dFN0cmVhbS5sZW5ndGg9MCxudWxsIT09ZSYmdGhpcy5fb3V0cHV0U3RyZWFtLnB1c2guYXBwbHkodGhpcy5fb3V0cHV0U3RyZWFtLGUpLHRoaXMuT3V0cHV0U3RyZWFtRGlydHkoKX19LHtrZXk6XCJQdXNoVG9PdXRwdXRTdHJlYW1cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT15dCh0LHd0KTtpZihudWxsIT09ZSl7dmFyIG49dGhpcy5UcnlTcGxpdHRpbmdIZWFkVGFpbFdoaXRlc3BhY2UoZSk7aWYobnVsbCE9PW4pe3ZhciBpLHI9cHQobik7dHJ5e2ZvcihyLnMoKTshKGk9ci5uKCkpLmRvbmU7KXt2YXIgYT1pLnZhbHVlO3RoaXMuUHVzaFRvT3V0cHV0U3RyZWFtSW5kaXZpZHVhbChhKX19Y2F0Y2godCl7ci5lKHQpfWZpbmFsbHl7ci5mKCl9cmV0dXJuIHZvaWQgdGhpcy5PdXRwdXRTdHJlYW1EaXJ0eSgpfX10aGlzLlB1c2hUb091dHB1dFN0cmVhbUluZGl2aWR1YWwodCksdGhpcy5PdXRwdXRTdHJlYW1EaXJ0eSgpfX0se2tleTpcIlBvcEZyb21PdXRwdXRTdHJlYW1cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLm91dHB1dFN0cmVhbS5zcGxpY2UodGhpcy5vdXRwdXRTdHJlYW0ubGVuZ3RoLXQsdCksdGhpcy5PdXRwdXRTdHJlYW1EaXJ0eSgpfX0se2tleTpcIlRyeVNwbGl0dGluZ0hlYWRUYWlsV2hpdGVzcGFjZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudmFsdWU7aWYobnVsbD09PWUpcmV0dXJuIGd0KFwic2luZ2xlLnZhbHVlXCIpO2Zvcih2YXIgbj0tMSxpPS0xLHI9MDtyPGUubGVuZ3RoOysrcil7dmFyIGE9ZVtyXTtpZihcIlxcblwiIT1hKXtpZihcIiBcIj09YXx8XCJcXHRcIj09YSljb250aW51ZTticmVha30tMT09biYmKG49ciksaT1yfWZvcih2YXIgcz0tMSxvPS0xLHU9MDt1PGUubGVuZ3RoOysrdSl7dmFyIGw9ZVt1XTtpZihcIlxcblwiIT1sKXtpZihcIiBcIj09bHx8XCJcXHRcIj09bCljb250aW51ZTticmVha30tMT09cyYmKHM9dSksbz11fWlmKC0xPT1uJiYtMT09cylyZXR1cm4gbnVsbDt2YXIgaCxjLGYsdixkPVtdLHA9MCx5PWUubGVuZ3RoO3JldHVybi0xIT1uJiYoMDxuJiYoaD1uZXcgd3QoZS5zdWJzdHJpbmcoMCxuKSksZC5wdXNoKGgpKSxkLnB1c2gobmV3IHd0KFwiXFxuXCIpKSxwPWkrMSksLTEhPXMmJih5PW8pLHA8eSYmKGM9ZS5zdWJzdHJpbmcocCx5LXApLGQucHVzaChuZXcgd3QoYykpKSwtMSE9cyYmaTxvJiYoZC5wdXNoKG5ldyB3dChcIlxcblwiKSksczxlLmxlbmd0aC0xJiYoZj1lLmxlbmd0aC1zLTEsdj1uZXcgd3QoZS5zdWJzdHJpbmcocysxLGYpKSxkLnB1c2godikpKSxkfX0se2tleTpcIlB1c2hUb091dHB1dFN0cmVhbUluZGl2aWR1YWxcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT15dCh0LEQpLG49eXQodCx3dCksaT0hMDtpZihlKXRoaXMuVHJpbU5ld2xpbmVzRnJvbU91dHB1dFN0cmVhbSgpLGk9ITA7ZWxzZSBpZihuKXt2YXIgcj0tMSxhPXRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50O2EudHlwZT09TnQuRnVuY3Rpb24mJihyPWEuZnVuY3Rpb25TdGFydEluT3V0cHV0U3RyZWFtKTtmb3IodmFyIHM9LTEsbz10aGlzLl9vdXRwdXRTdHJlYW0ubGVuZ3RoLTE7MDw9bztvLS0pe3ZhciB1PXRoaXMuX291dHB1dFN0cmVhbVtvXSxsPXUgaW5zdGFuY2VvZiBBdD91Om51bGw7aWYobnVsbCE9KHUgaW5zdGFuY2VvZiBEP3U6bnVsbCkpe3M9bzticmVha31pZihudWxsIT1sJiZsLmNvbW1hbmRUeXBlPT1BdC5Db21tYW5kVHlwZS5CZWdpblN0cmluZyl7cjw9byYmKHI9LTEpO2JyZWFrfX1pZigtMSE9KC0xIT1zJiYtMSE9cj9NYXRoLm1pbihyLHMpOi0xIT1zP3M6cikpe2lmKG4uaXNOZXdsaW5lKWk9ITE7ZWxzZSBpZihuLmlzTm9uV2hpdGVzcGFjZSYmKC0xPHMmJnRoaXMuUmVtb3ZlRXhpc3RpbmdHbHVlKCksLTE8cikpZm9yKHZhciBoPXRoaXMuY2FsbFN0YWNrLmVsZW1lbnRzLGM9aC5sZW5ndGgtMTswPD1jO2MtLSl7dmFyIGY9aFtjXTtpZihmLnR5cGUhPU50LkZ1bmN0aW9uKWJyZWFrO2YuZnVuY3Rpb25TdGFydEluT3V0cHV0U3RyZWFtPS0xfX1lbHNlIG4uaXNOZXdsaW5lJiYoIXRoaXMub3V0cHV0U3RyZWFtRW5kc0luTmV3bGluZSYmdGhpcy5vdXRwdXRTdHJlYW1Db250YWluc0NvbnRlbnR8fChpPSExKSl9aWYoaSl7aWYobnVsbD09PXQpcmV0dXJuIGd0KFwib2JqXCIpO3RoaXMuX291dHB1dFN0cmVhbS5wdXNoKHQpLHRoaXMuT3V0cHV0U3RyZWFtRGlydHkoKX19fSx7a2V5OlwiVHJpbU5ld2xpbmVzRnJvbU91dHB1dFN0cmVhbVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PS0xLGU9dGhpcy5fb3V0cHV0U3RyZWFtLmxlbmd0aC0xOzA8PWU7KXt2YXIgbj10aGlzLl9vdXRwdXRTdHJlYW1bZV0saT15dChuLEF0KSxyPXl0KG4sd3QpO2lmKG51bGwhPWl8fG51bGwhPXImJnIuaXNOb25XaGl0ZXNwYWNlKWJyZWFrO251bGwhPXImJnIuaXNOZXdsaW5lJiYodD1lKSxlLS19aWYoMDw9dClmb3IoZT10O2U8dGhpcy5fb3V0cHV0U3RyZWFtLmxlbmd0aDspe3l0KHRoaXMuX291dHB1dFN0cmVhbVtlXSx3dCk/dGhpcy5fb3V0cHV0U3RyZWFtLnNwbGljZShlLDEpOmUrK310aGlzLk91dHB1dFN0cmVhbURpcnR5KCl9fSx7a2V5OlwiUmVtb3ZlRXhpc3RpbmdHbHVlXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fb3V0cHV0U3RyZWFtLmxlbmd0aC0xOzA8PXQ7dC0tKXt2YXIgZT10aGlzLl9vdXRwdXRTdHJlYW1bdF07aWYoZSBpbnN0YW5jZW9mIEQpdGhpcy5fb3V0cHV0U3RyZWFtLnNwbGljZSh0LDEpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIEF0KWJyZWFrfXRoaXMuT3V0cHV0U3RyZWFtRGlydHkoKX19LHtrZXk6XCJQdXNoRXZhbHVhdGlvblN0YWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9eXQodCxPdCk7aWYoZSl7dmFyIG49ZS52YWx1ZTtpZihudWxsPT09bilyZXR1cm4gZ3QoXCJyYXdMaXN0XCIpO2lmKG51bGwhPW4ub3JpZ2luTmFtZXMpe24ub3JpZ2luc3x8KG4ub3JpZ2lucz1bXSksbi5vcmlnaW5zLmxlbmd0aD0wO3ZhciBpLHI9cHQobi5vcmlnaW5OYW1lcyk7dHJ5e2ZvcihyLnMoKTshKGk9ci5uKCkpLmRvbmU7KXt2YXIgYT1pLnZhbHVlO2lmKG51bGw9PT10aGlzLnN0b3J5Lmxpc3REZWZpbml0aW9ucylyZXR1cm4gZ3QoXCJTdG9yeVN0YXRlLnN0b3J5Lmxpc3REZWZpbml0aW9uc1wiKTt2YXIgcz10aGlzLnN0b3J5Lmxpc3REZWZpbml0aW9ucy5UcnlMaXN0R2V0RGVmaW5pdGlvbihhLG51bGwpO2lmKG51bGw9PT1zLnJlc3VsdClyZXR1cm4gZ3QoXCJTdG9yeVN0YXRlIGRlZi5yZXN1bHRcIik7bi5vcmlnaW5zLmluZGV4T2Yocy5yZXN1bHQpPDAmJm4ub3JpZ2lucy5wdXNoKHMucmVzdWx0KX19Y2F0Y2godCl7ci5lKHQpfWZpbmFsbHl7ci5mKCl9fX1pZihudWxsPT09dClyZXR1cm4gZ3QoXCJvYmpcIik7dGhpcy5ldmFsdWF0aW9uU3RhY2sucHVzaCh0KX19LHtrZXk6XCJQb3BFdmFsdWF0aW9uU3RhY2tcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiBnKHRoaXMuZXZhbHVhdGlvblN0YWNrLnBvcCgpKTtpZih0PnRoaXMuZXZhbHVhdGlvblN0YWNrLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJ0cnlpbmcgdG8gcG9wIHRvbyBtYW55IG9iamVjdHNcIik7cmV0dXJuIGcodGhpcy5ldmFsdWF0aW9uU3RhY2suc3BsaWNlKHRoaXMuZXZhbHVhdGlvblN0YWNrLmxlbmd0aC10LHQpKX19LHtrZXk6XCJQZWVrRXZhbHVhdGlvblN0YWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmFsdWF0aW9uU3RhY2tbdGhpcy5ldmFsdWF0aW9uU3RhY2subGVuZ3RoLTFdfX0se2tleTpcIkZvcmNlRW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxTdGFjay5SZXNldCgpLHRoaXMuX2N1cnJlbnRDaG9pY2VzLmxlbmd0aD0wLHRoaXMuY3VycmVudFBvaW50ZXI9eHQuTnVsbCx0aGlzLnByZXZpb3VzUG9pbnRlcj14dC5OdWxsLHRoaXMuZGlkU2FmZUV4aXQ9ITB9fSx7a2V5OlwiVHJpbVdoaXRlc3BhY2VGcm9tRnVuY3Rpb25FbmRcIix2YWx1ZTpmdW5jdGlvbigpe2suQXNzZXJ0KHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LnR5cGU9PU50LkZ1bmN0aW9uKTt2YXIgdD10aGlzLmNhbGxTdGFjay5jdXJyZW50RWxlbWVudC5mdW5jdGlvblN0YXJ0SW5PdXRwdXRTdHJlYW07LTE9PXQmJih0PTApO2Zvcih2YXIgZT10aGlzLl9vdXRwdXRTdHJlYW0ubGVuZ3RoLTE7dDw9ZTtlLS0pe3ZhciBuPXRoaXMuX291dHB1dFN0cmVhbVtlXSxpPXl0KG4sd3QpLHI9eXQobixBdCk7aWYobnVsbCE9aSl7aWYocilicmVhaztpZighaS5pc05ld2xpbmUmJiFpLmlzSW5saW5lV2hpdGVzcGFjZSlicmVhazt0aGlzLl9vdXRwdXRTdHJlYW0uc3BsaWNlKGUsMSksdGhpcy5PdXRwdXRTdHJlYW1EaXJ0eSgpfX19fSx7a2V5OlwiUG9wQ2FsbFN0YWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10P3Q6bnVsbDt0aGlzLmNhbGxTdGFjay5jdXJyZW50RWxlbWVudC50eXBlPT1OdC5GdW5jdGlvbiYmdGhpcy5UcmltV2hpdGVzcGFjZUZyb21GdW5jdGlvbkVuZCgpLHRoaXMuY2FsbFN0YWNrLlBvcChlKX19LHtrZXk6XCJTZXRDaG9zZW5QYXRoXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9jdXJyZW50Q2hvaWNlcy5sZW5ndGg9MDt2YXIgbj10aGlzLnN0b3J5LlBvaW50ZXJBdFBhdGgodCk7bi5pc051bGx8fC0xIT1uLmluZGV4fHwobi5pbmRleD0wKSx0aGlzLmN1cnJlbnRQb2ludGVyPW4sZSYmdGhpcy5jdXJyZW50VHVybkluZGV4Kyt9fSx7a2V5OlwiU3RhcnRGdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5jYWxsU3RhY2suUHVzaChOdC5GdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZSx0aGlzLmV2YWx1YXRpb25TdGFjay5sZW5ndGgpLHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmN1cnJlbnRQb2ludGVyPXh0LlN0YXJ0T2YodCksdGhpcy5QYXNzQXJndW1lbnRzVG9FdmFsdWF0aW9uU3RhY2soZSl9fSx7a2V5OlwiUGFzc0FyZ3VtZW50c1RvRXZhbHVhdGlvblN0YWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYobnVsbCE9dClmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHRbZV0mJlwic3RyaW5nXCIhPXR5cGVvZiB0W2VdKXRocm93IG5ldyBFcnJvcihcImluayBhcmd1bWVudHMgd2hlbiBjYWxsaW5nIEV2YWx1YXRlRnVuY3Rpb24gLyBDaG9vc2VQYXRoU3RyaW5nV2l0aFBhcmFtZXRlcnMgIG11c3QgYmUgaW50LCBmbG9hdCBvciBzdHJpbmdcIik7dGhpcy5QdXNoRXZhbHVhdGlvblN0YWNrKF90LkNyZWF0ZSh0W2VdKSl9fX0se2tleTpcIlRyeUV4aXRGdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LnR5cGU9PU50LkZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lJiYodGhpcy5jdXJyZW50UG9pbnRlcj14dC5OdWxsLHRoaXMuZGlkU2FmZUV4aXQ9ITApfX0se2tleTpcIkNvbXBsZXRlRnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LnR5cGUhPU50LkZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lKXRocm93IG5ldyBidChcIkV4cGVjdGVkIGV4dGVybmFsIGZ1bmN0aW9uIGV2YWx1YXRpb24gdG8gYmUgY29tcGxldGUuIFN0YWNrIHRyYWNlOiBcIit0aGlzLmNhbGxTdGFjay5jYWxsU3RhY2tUcmFjZSk7Zm9yKHZhciB0PXRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmV2YWx1YXRpb25TdGFja0hlaWdodFdoZW5QdXNoZWQsZT1udWxsO3RoaXMuZXZhbHVhdGlvblN0YWNrLmxlbmd0aD50Oyl7dmFyIG49dGhpcy5Qb3BFdmFsdWF0aW9uU3RhY2soKTtudWxsPT09ZSYmKGU9bil9aWYodGhpcy5Qb3BDYWxsU3RhY2soTnQuRnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUpLGUpe2lmKGUgaW5zdGFuY2VvZiBWdClyZXR1cm4gbnVsbDt2YXIgaT1tdChlLF90KTtyZXR1cm4gaS52YWx1ZVR5cGU9PVAuRGl2ZXJ0VGFyZ2V0P2kudmFsdWVPYmplY3QudG9TdHJpbmcoKTppLnZhbHVlT2JqZWN0fXJldHVybiBudWxsfX0se2tleTpcIkFkZEVycm9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPyhudWxsPT10aGlzLl9jdXJyZW50V2FybmluZ3MmJih0aGlzLl9jdXJyZW50V2FybmluZ3M9W10pLHRoaXMuX2N1cnJlbnRXYXJuaW5ncy5wdXNoKHQpKToobnVsbD09dGhpcy5fY3VycmVudEVycm9ycyYmKHRoaXMuX2N1cnJlbnRFcnJvcnM9W10pLHRoaXMuX2N1cnJlbnRFcnJvcnMucHVzaCh0KSl9fSx7a2V5OlwiT3V0cHV0U3RyZWFtRGlydHlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX291dHB1dFN0cmVhbVRleHREaXJ0eT0hMCx0aGlzLl9vdXRwdXRTdHJlYW1UYWdzRGlydHk9ITB9fSx7a2V5OlwiY2FsbHN0YWNrRGVwdGhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYWxsU3RhY2suZGVwdGh9fSx7a2V5Olwib3V0cHV0U3RyZWFtXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dHB1dFN0cmVhbX19LHtrZXk6XCJjdXJyZW50Q2hvaWNlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbkNvbnRpbnVlP1tdOnRoaXMuX2N1cnJlbnRDaG9pY2VzfX0se2tleTpcImdlbmVyYXRlZENob2ljZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudENob2ljZXN9fSx7a2V5OlwiY3VycmVudEVycm9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50RXJyb3JzfX0se2tleTpcImN1cnJlbnRXYXJuaW5nc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50V2FybmluZ3N9fSx7a2V5OlwidmFyaWFibGVzU3RhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFyaWFibGVzU3RhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92YXJpYWJsZXNTdGF0ZT10fX0se2tleTpcImV2YWx1YXRpb25TdGFja1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmFsdWF0aW9uU3RhY2t9fSx7a2V5OlwidmlzaXRDb3VudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmlzaXRDb3VudHN9fSx7a2V5OlwidHVybkluZGljZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHVybkluZGljZXN9fSx7a2V5OlwiY3VycmVudFR1cm5JbmRleFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50VHVybkluZGV4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY3VycmVudFR1cm5JbmRleD10fX0se2tleTpcImN1cnJlbnRQYXRoU3RyaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jdXJyZW50UG9pbnRlcjtyZXR1cm4gdC5pc051bGw/bnVsbDpudWxsPT09dC5wYXRoP2d0KFwicG9pbnRlci5wYXRoXCIpOnQucGF0aC50b1N0cmluZygpfX0se2tleTpcImN1cnJlbnRQb2ludGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmN1cnJlbnRQb2ludGVyLmNvcHkoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmN1cnJlbnRQb2ludGVyPXQuY29weSgpfX0se2tleTpcInByZXZpb3VzUG9pbnRlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbGxTdGFjay5jdXJyZW50VGhyZWFkLnByZXZpb3VzUG9pbnRlci5jb3B5KCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLmNhbGxTdGFjay5jdXJyZW50VGhyZWFkLnByZXZpb3VzUG9pbnRlcj10LmNvcHkoKX19LHtrZXk6XCJjYW5Db250aW51ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmN1cnJlbnRQb2ludGVyLmlzTnVsbCYmIXRoaXMuaGFzRXJyb3J9fSx7a2V5OlwiaGFzRXJyb3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5jdXJyZW50RXJyb3JzJiYwPHRoaXMuY3VycmVudEVycm9ycy5sZW5ndGh9fSx7a2V5OlwiaGFzV2FybmluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLmN1cnJlbnRXYXJuaW5ncyYmMDx0aGlzLmN1cnJlbnRXYXJuaW5ncy5sZW5ndGh9fSx7a2V5OlwiY3VycmVudFRleHRcIixnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9vdXRwdXRTdHJlYW1UZXh0RGlydHkpe3ZhciB0LGU9bmV3IFN0LG49cHQodGhpcy5fb3V0cHV0U3RyZWFtKTt0cnl7Zm9yKG4ucygpOyEodD1uLm4oKSkuZG9uZTspe3ZhciBpPXl0KHQudmFsdWUsd3QpO251bGwhPT1pJiZlLkFwcGVuZChpLnZhbHVlKX19Y2F0Y2godCl7bi5lKHQpfWZpbmFsbHl7bi5mKCl9dGhpcy5fY3VycmVudFRleHQ9dGhpcy5DbGVhbk91dHB1dFdoaXRlc3BhY2UoZS50b1N0cmluZygpKSx0aGlzLl9vdXRwdXRTdHJlYW1UZXh0RGlydHk9ITF9cmV0dXJuIHRoaXMuX2N1cnJlbnRUZXh0fX0se2tleTpcImN1cnJlbnRUYWdzXCIsZ2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fb3V0cHV0U3RyZWFtVGFnc0RpcnR5KXt0aGlzLl9jdXJyZW50VGFncz1bXTt2YXIgdCxlPXB0KHRoaXMuX291dHB1dFN0cmVhbSk7dHJ5e2ZvcihlLnMoKTshKHQ9ZS5uKCkpLmRvbmU7KXt2YXIgbj15dCh0LnZhbHVlLEIpO251bGwhPT1uJiZ0aGlzLl9jdXJyZW50VGFncy5wdXNoKG4udGV4dCl9fWNhdGNoKHQpe2UuZSh0KX1maW5hbGx5e2UuZigpfXRoaXMuX291dHB1dFN0cmVhbVRhZ3NEaXJ0eT0hMX1yZXR1cm4gdGhpcy5fY3VycmVudFRhZ3N9fSx7a2V5OlwiaW5FeHByZXNzaW9uRXZhbHVhdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbGxTdGFjay5jdXJyZW50RWxlbWVudC5pbkV4cHJlc3Npb25FdmFsdWF0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQuaW5FeHByZXNzaW9uRXZhbHVhdGlvbj10fX0se2tleTpcIm91dHB1dFN0cmVhbUVuZHNJbk5ld2xpbmVcIixnZXQ6ZnVuY3Rpb24oKXtpZigwPHRoaXMuX291dHB1dFN0cmVhbS5sZW5ndGgpZm9yKHZhciB0PXRoaXMuX291dHB1dFN0cmVhbS5sZW5ndGgtMTswPD10O3QtLSl7aWYodGhpcy5fb3V0cHV0U3RyZWFtW3RdaW5zdGFuY2VvZiBBdClicmVhazt2YXIgZT10aGlzLl9vdXRwdXRTdHJlYW1bdF07aWYoZSBpbnN0YW5jZW9mIHd0KXtpZihlLmlzTmV3bGluZSlyZXR1cm4hMDtpZihlLmlzTm9uV2hpdGVzcGFjZSlicmVha319cmV0dXJuITF9fSx7a2V5Olwib3V0cHV0U3RyZWFtQ29udGFpbnNDb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLl9vdXRwdXRTdHJlYW0ubGVuZ3RoO3QrKylpZih0aGlzLl9vdXRwdXRTdHJlYW1bdF1pbnN0YW5jZW9mIHd0KXJldHVybiEwO3JldHVybiExfX0se2tleTpcImluU3RyaW5nRXZhbHVhdGlvblwiLGdldDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLl9vdXRwdXRTdHJlYW0ubGVuZ3RoLTE7MDw9dDt0LS0pe3ZhciBlPXl0KHRoaXMuX291dHB1dFN0cmVhbVt0XSxBdCk7aWYoZSBpbnN0YW5jZW9mIEF0JiZlLmNvbW1hbmRUeXBlPT1BdC5Db21tYW5kVHlwZS5CZWdpblN0cmluZylyZXR1cm4hMH1yZXR1cm4hMX19XSksbn0oKSxaPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe20odGhpcyx0KSx0aGlzLnN0YXJ0VGltZT12b2lkIDB9cmV0dXJuIGEodCxbe2tleTpcIlN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0VGltZT0obmV3IERhdGUpLmdldFRpbWUoKX19LHtrZXk6XCJTdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0VGltZT12b2lkIDB9fSx7a2V5OlwiRWxhcHNlZE1pbGxpc2Vjb25kc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLnN0YXJ0VGltZT8wOihuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMuc3RhcnRUaW1lfX1dKSx0fSgpO051bWJlci5pc0ludGVnZXJ8fChOdW1iZXIuaXNJbnRlZ2VyPWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZpc0Zpbml0ZSh0KSYmLTkwMDcxOTkyNTQ3NDA5OTI8dCYmdDw5MDA3MTk5MjU0NzQwOTkyJiZNYXRoLmZsb29yKHQpPT09dH0pLG8uU3Rvcnk9ZnVuY3Rpb24oKXtzKGYsVCk7dmFyIGg9dihmKTtmdW5jdGlvbiBmKCl7dmFyIHQsZTttKHRoaXMsZiksKHQ9aC5jYWxsKHRoaXMpKS5pbmtWZXJzaW9uTWluaW11bUNvbXBhdGlibGU9MTgsdC5fcHJldkNvbnRhaW5lcnM9W10sdC5hbGxvd0V4dGVybmFsRnVuY3Rpb25GYWxsYmFja3M9ITEsdC5fbGlzdERlZmluaXRpb25zPW51bGwsdC5fdmFyaWFibGVPYnNlcnZlcnM9bnVsbCx0Ll9oYXNWYWxpZGF0ZWRFeHRlcm5hbHM9ITEsdC5fdGVtcG9yYXJ5RXZhbHVhdGlvbkNvbnRhaW5lcj1udWxsLHQuX2FzeW5jQ29udGludWVBY3RpdmU9ITEsdC5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmU9bnVsbCx0Ll9yZWN1cnNpdmVDb250aW51ZUNvdW50PTAsdC5fYXN5bmNTYXZpbmc9ITE7dmFyIG4saT10Ll9wcm9maWxlcj1udWxsLHI9bnVsbDtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEV0PyhlPWFyZ3VtZW50c1swXSx2b2lkIDAhPT1hcmd1bWVudHNbMV0mJihpPWFyZ3VtZW50c1sxXSksdC5fbWFpbkNvbnRlbnRDb250YWluZXI9ZSk6cj1cInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdPyhuPWFyZ3VtZW50c1swXSwkLlRleHRUb0RpY3Rpb25hcnkobikpOmFyZ3VtZW50c1swXSxudWxsIT1pJiYodC5fbGlzdERlZmluaXRpb25zPW5ldyBKKGkpKSx0Ll9leHRlcm5hbHM9bmV3IE1hcCxudWxsIT09cil7dmFyIGE9cixzPWEuaW5rVmVyc2lvbjtpZihudWxsPT1zKXRocm93IG5ldyBFcnJvcihcImluayB2ZXJzaW9uIG51bWJlciBub3QgZm91bmQuIEFyZSB5b3Ugc3VyZSBpdCdzIGEgdmFsaWQgLmluay5qc29uIGZpbGU/XCIpO3ZhciBvPXBhcnNlSW50KHMpO2lmKGYuaW5rVmVyc2lvbkN1cnJlbnQ8byl0aHJvdyBuZXcgRXJyb3IoXCJWZXJzaW9uIG9mIGluayB1c2VkIHRvIGJ1aWxkIHN0b3J5IHdhcyBuZXdlciB0aGFuIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgdGhlIGVuZ2luZVwiKTtpZihvPHQuaW5rVmVyc2lvbk1pbmltdW1Db21wYXRpYmxlKXRocm93IG5ldyBFcnJvcihcIlZlcnNpb24gb2YgaW5rIHVzZWQgdG8gYnVpbGQgc3RvcnkgaXMgdG9vIG9sZCB0byBiZSBsb2FkZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIHRoZSBlbmdpbmVcIik7byE9Zi5pbmtWZXJzaW9uQ3VycmVudCYmY29uc29sZS53YXJuKFwiV0FSTklORzogVmVyc2lvbiBvZiBpbmsgdXNlZCB0byBidWlsZCBzdG9yeSBkb2Vzbid0IG1hdGNoIGN1cnJlbnQgdmVyc2lvbiBvZiBlbmdpbmUuIE5vbi1jcml0aWNhbCwgYnV0IHJlY29tbWVuZCBzeW5jaHJvbmlzaW5nLlwiKTt2YXIgdSxsPWEucm9vdDtpZihudWxsPT1sKXRocm93IG5ldyBFcnJvcihcIlJvb3Qgbm9kZSBmb3IgaW5rIG5vdCBmb3VuZC4gQXJlIHlvdSBzdXJlIGl0J3MgYSB2YWxpZCAuaW5rLmpzb24gZmlsZT9cIik7KHU9YS5saXN0RGVmcykmJih0Ll9saXN0RGVmaW5pdGlvbnM9Sy5KVG9rZW5Ub0xpc3REZWZpbml0aW9ucyh1KSksdC5fbWFpbkNvbnRlbnRDb250YWluZXI9bXQoSy5KVG9rZW5Ub1J1bnRpbWVPYmplY3QobCksRXQpLHQuUmVzZXRTdGF0ZSgpfXJldHVybiB0fXJldHVybiBhKGYsW3trZXk6XCJTdGFydFByb2ZpbGluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIkVuZFByb2ZpbGluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIlRvSnNvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj0hMTtpZih0fHwobj0hMCx0PW5ldyAkLldyaXRlciksdC5Xcml0ZU9iamVjdFN0YXJ0KCksdC5Xcml0ZUludFByb3BlcnR5KFwiaW5rVmVyc2lvblwiLGYuaW5rVmVyc2lvbkN1cnJlbnQpLHQuV3JpdGVQcm9wZXJ0eShcInJvb3RcIixmdW5jdGlvbih0KXtyZXR1cm4gSy5Xcml0ZVJ1bnRpbWVDb250YWluZXIodCxlLl9tYWluQ29udGVudENvbnRhaW5lcil9KSxudWxsIT10aGlzLl9saXN0RGVmaW5pdGlvbnMpe3QuV3JpdGVQcm9wZXJ0eVN0YXJ0KFwibGlzdERlZnNcIiksdC5Xcml0ZU9iamVjdFN0YXJ0KCk7dmFyIGkscj1wdCh0aGlzLl9saXN0RGVmaW5pdGlvbnMubGlzdHMpO3RyeXtmb3Ioci5zKCk7IShpPXIubigpKS5kb25lOyl7dmFyIGE9aS52YWx1ZTt0LldyaXRlUHJvcGVydHlTdGFydChhLm5hbWUpLHQuV3JpdGVPYmplY3RTdGFydCgpO3ZhciBzLG89cHQoYS5pdGVtcyk7dHJ5e2ZvcihvLnMoKTshKHM9by5uKCkpLmRvbmU7KXt2YXIgdT1TKHMudmFsdWUsMiksbD11WzBdLGg9dVsxXSxjPWt0LmZyb21TZXJpYWxpemVkS2V5KGwpO3QuV3JpdGVJbnRQcm9wZXJ0eShjLml0ZW1OYW1lLGgpfX1jYXRjaCh0KXtvLmUodCl9ZmluYWxseXtvLmYoKX10LldyaXRlT2JqZWN0RW5kKCksdC5Xcml0ZVByb3BlcnR5RW5kKCl9fWNhdGNoKHQpe3IuZSh0KX1maW5hbGx5e3IuZigpfXQuV3JpdGVPYmplY3RFbmQoKSx0LldyaXRlUHJvcGVydHlFbmQoKX1pZih0LldyaXRlT2JqZWN0RW5kKCksbilyZXR1cm4gdC5Ub1N0cmluZygpfX0se2tleTpcIlJlc2V0U3RhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuSWZBc3luY1dlQ2FudChcIlJlc2V0U3RhdGVcIiksdGhpcy5fc3RhdGU9bmV3IFEodGhpcyksdGhpcy5fc3RhdGUudmFyaWFibGVzU3RhdGUuT2JzZXJ2ZVZhcmlhYmxlQ2hhbmdlKHRoaXMuVmFyaWFibGVTdGF0ZURpZENoYW5nZUV2ZW50LmJpbmQodGhpcykpLHRoaXMuUmVzZXRHbG9iYWxzKCl9fSx7a2V5OlwiUmVzZXRFcnJvcnNcIix2YWx1ZTpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLl9zdGF0ZSlyZXR1cm4gZ3QoXCJ0aGlzLl9zdGF0ZVwiKTt0aGlzLl9zdGF0ZS5SZXNldEVycm9ycygpfX0se2tleTpcIlJlc2V0Q2FsbHN0YWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLklmQXN5bmNXZUNhbnQoXCJSZXNldENhbGxzdGFja1wiKSxudWxsPT09dGhpcy5fc3RhdGUpcmV0dXJuIGd0KFwidGhpcy5fc3RhdGVcIik7dGhpcy5fc3RhdGUuRm9yY2VFbmQoKX19LHtrZXk6XCJSZXNldEdsb2JhbHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O3RoaXMuX21haW5Db250ZW50Q29udGFpbmVyLm5hbWVkQ29udGVudC5nZXQoXCJnbG9iYWwgZGVjbFwiKSYmKHQ9dGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlci5jb3B5KCksdGhpcy5DaG9vc2VQYXRoKG5ldyBFKFwiZ2xvYmFsIGRlY2xcIiksITEpLHRoaXMuQ29udGludWVJbnRlcm5hbCgpLHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXI9dCksdGhpcy5zdGF0ZS52YXJpYWJsZXNTdGF0ZS5TbmFwc2hvdERlZmF1bHRHbG9iYWxzKCl9fSx7a2V5OlwiQ29udGludWVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLkNvbnRpbnVlQXN5bmMoMCksdGhpcy5jdXJyZW50VGV4dH19LHtrZXk6XCJDb250aW51ZUFzeW5jXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5faGFzVmFsaWRhdGVkRXh0ZXJuYWxzfHx0aGlzLlZhbGlkYXRlRXh0ZXJuYWxCaW5kaW5ncygpLHRoaXMuQ29udGludWVJbnRlcm5hbCh0KX19LHtrZXk6XCJDb250aW51ZUludGVybmFsXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10P3Q6MDtudWxsIT10aGlzLl9wcm9maWxlciYmdGhpcy5fcHJvZmlsZXIuUHJlQ29udGludWUoKTt2YXIgbj0wPGU7aWYodGhpcy5fcmVjdXJzaXZlQ29udGludWVDb3VudCsrLCF0aGlzLl9hc3luY0NvbnRpbnVlQWN0aXZlKXtpZih0aGlzLl9hc3luY0NvbnRpbnVlQWN0aXZlPW4sIXRoaXMuY2FuQ29udGludWUpdGhyb3cgbmV3IGJ0KFwiQ2FuJ3QgY29udGludWUgLSBzaG91bGQgY2hlY2sgY2FuQ29udGludWUgYmVmb3JlIGNhbGxpbmcgQ29udGludWVcIik7dGhpcy5fc3RhdGUuZGlkU2FmZUV4aXQ9ITEsdGhpcy5fc3RhdGUuUmVzZXRPdXRwdXQoKSwxPT10aGlzLl9yZWN1cnNpdmVDb250aW51ZUNvdW50JiYodGhpcy5fc3RhdGUudmFyaWFibGVzU3RhdGUuYmF0Y2hPYnNlcnZpbmdWYXJpYWJsZUNoYW5nZXM9ITApfXZhciBpPW5ldyBaO2kuU3RhcnQoKTt2YXIgcj0hMTtkb3t0cnl7cj10aGlzLkNvbnRpbnVlU2luZ2xlU3RlcCgpfWNhdGNoKHQpe2lmKCEodCBpbnN0YW5jZW9mIGJ0KSl0aHJvdyB0O3RoaXMuQWRkRXJyb3IodC5tZXNzYWdlLHZvaWQgMCx0LnVzZUVuZExpbmVOdW1iZXIpO2JyZWFrfWlmKHIpYnJlYWs7aWYodGhpcy5fYXN5bmNDb250aW51ZUFjdGl2ZSYmaS5FbGFwc2VkTWlsbGlzZWNvbmRzPmUpYnJlYWt9d2hpbGUodGhpcy5jYW5Db250aW51ZSk7aS5TdG9wKCksIXImJnRoaXMuY2FuQ29udGludWV8fChudWxsIT09dGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUmJnRoaXMuUmVzdG9yZVN0YXRlU25hcHNob3QoKSx0aGlzLmNhbkNvbnRpbnVlfHwodGhpcy5zdGF0ZS5jYWxsU3RhY2suY2FuUG9wVGhyZWFkJiZ0aGlzLkFkZEVycm9yKFwiVGhyZWFkIGF2YWlsYWJsZSB0byBwb3AsIHRocmVhZHMgc2hvdWxkIGFsd2F5cyBiZSBmbGF0IGJ5IHRoZSBlbmQgb2YgZXZhbHVhdGlvbj9cIiksMCE9dGhpcy5zdGF0ZS5nZW5lcmF0ZWRDaG9pY2VzLmxlbmd0aHx8dGhpcy5zdGF0ZS5kaWRTYWZlRXhpdHx8bnVsbCE9dGhpcy5fdGVtcG9yYXJ5RXZhbHVhdGlvbkNvbnRhaW5lcnx8KHRoaXMuc3RhdGUuY2FsbFN0YWNrLkNhblBvcChOdC5UdW5uZWwpP3RoaXMuQWRkRXJyb3IoXCJ1bmV4cGVjdGVkbHkgcmVhY2hlZCBlbmQgb2YgY29udGVudC4gRG8geW91IG5lZWQgYSAnLT4tPicgdG8gcmV0dXJuIGZyb20gYSB0dW5uZWw/XCIpOnRoaXMuc3RhdGUuY2FsbFN0YWNrLkNhblBvcChOdC5GdW5jdGlvbik/dGhpcy5BZGRFcnJvcihcInVuZXhwZWN0ZWRseSByZWFjaGVkIGVuZCBvZiBjb250ZW50LiBEbyB5b3UgbmVlZCBhICd+IHJldHVybic/XCIpOnRoaXMuc3RhdGUuY2FsbFN0YWNrLmNhblBvcD90aGlzLkFkZEVycm9yKFwidW5leHBlY3RlZGx5IHJlYWNoZWQgZW5kIG9mIGNvbnRlbnQgZm9yIHVua25vd24gcmVhc29uLiBQbGVhc2UgZGVidWcgY29tcGlsZXIhXCIpOnRoaXMuQWRkRXJyb3IoXCJyYW4gb3V0IG9mIGNvbnRlbnQuIERvIHlvdSBuZWVkIGEgJy0+IERPTkUnIG9yICctPiBFTkQnP1wiKSkpLHRoaXMuc3RhdGUuZGlkU2FmZUV4aXQ9ITEsMT09dGhpcy5fcmVjdXJzaXZlQ29udGludWVDb3VudCYmKHRoaXMuX3N0YXRlLnZhcmlhYmxlc1N0YXRlLmJhdGNoT2JzZXJ2aW5nVmFyaWFibGVDaGFuZ2VzPSExKSx0aGlzLl9hc3luY0NvbnRpbnVlQWN0aXZlPSExKSx0aGlzLl9yZWN1cnNpdmVDb250aW51ZUNvdW50LS0sbnVsbCE9dGhpcy5fcHJvZmlsZXImJnRoaXMuX3Byb2ZpbGVyLlBvc3RDb250aW51ZSgpfX0se2tleTpcIkNvbnRpbnVlU2luZ2xlU3RlcFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5fcHJvZmlsZXImJnRoaXMuX3Byb2ZpbGVyLlByZVN0ZXAoKSx0aGlzLlN0ZXAoKSxudWxsIT10aGlzLl9wcm9maWxlciYmdGhpcy5fcHJvZmlsZXIuUG9zdFN0ZXAoKSx0aGlzLmNhbkNvbnRpbnVlfHx0aGlzLnN0YXRlLmNhbGxTdGFjay5lbGVtZW50SXNFdmFsdWF0ZUZyb21HYW1lfHx0aGlzLlRyeUZvbGxvd0RlZmF1bHRJbnZpc2libGVDaG9pY2UoKSxudWxsIT10aGlzLl9wcm9maWxlciYmdGhpcy5fcHJvZmlsZXIuUHJlU25hcHNob3QoKSwhdGhpcy5zdGF0ZS5pblN0cmluZ0V2YWx1YXRpb24pe2lmKG51bGwhPT10aGlzLl9zdGF0ZVNuYXBzaG90QXRMYXN0TmV3bGluZSl7aWYobnVsbD09PXRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lLmN1cnJlbnRUYWdzKXJldHVybiBndChcInRoaXMuX3N0YXRlQXRMYXN0TmV3bGluZS5jdXJyZW50VGFnc1wiKTtpZihudWxsPT09dGhpcy5zdGF0ZS5jdXJyZW50VGFncylyZXR1cm4gZ3QoXCJ0aGlzLnN0YXRlLmN1cnJlbnRUYWdzXCIpO3ZhciB0PXRoaXMuQ2FsY3VsYXRlTmV3bGluZU91dHB1dFN0YXRlQ2hhbmdlKHRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lLmN1cnJlbnRUZXh0LHRoaXMuc3RhdGUuY3VycmVudFRleHQsdGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUuY3VycmVudFRhZ3MubGVuZ3RoLHRoaXMuc3RhdGUuY3VycmVudFRhZ3MubGVuZ3RoKTtpZih0PT1mLk91dHB1dFN0YXRlQ2hhbmdlLkV4dGVuZGVkQmV5b25kTmV3bGluZSlyZXR1cm4gdGhpcy5SZXN0b3JlU3RhdGVTbmFwc2hvdCgpLCEwO3Q9PWYuT3V0cHV0U3RhdGVDaGFuZ2UuTmV3bGluZVJlbW92ZWQmJnRoaXMuRGlzY2FyZFNuYXBzaG90KCl9dGhpcy5zdGF0ZS5vdXRwdXRTdHJlYW1FbmRzSW5OZXdsaW5lJiYodGhpcy5jYW5Db250aW51ZT9udWxsPT10aGlzLl9zdGF0ZVNuYXBzaG90QXRMYXN0TmV3bGluZSYmdGhpcy5TdGF0ZVNuYXBzaG90KCk6dGhpcy5EaXNjYXJkU25hcHNob3QoKSl9cmV0dXJuIG51bGwhPXRoaXMuX3Byb2ZpbGVyJiZ0aGlzLl9wcm9maWxlci5Qb3N0U25hcHNob3QoKSwhMX19LHtrZXk6XCJDYWxjdWxhdGVOZXdsaW5lT3V0cHV0U3RhdGVDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXtpZihudWxsPT09dClyZXR1cm4gZ3QoXCJwcmV2VGV4dFwiKTtpZihudWxsPT09ZSlyZXR1cm4gZ3QoXCJjdXJyVGV4dFwiKTt2YXIgcj1lLmxlbmd0aD49dC5sZW5ndGgmJlwiXFxuXCI9PWUuY2hhckF0KHQubGVuZ3RoLTEpO2lmKG49PWkmJnQubGVuZ3RoPT1lLmxlbmd0aCYmcilyZXR1cm4gZi5PdXRwdXRTdGF0ZUNoYW5nZS5Ob0NoYW5nZTtpZighcilyZXR1cm4gZi5PdXRwdXRTdGF0ZUNoYW5nZS5OZXdsaW5lUmVtb3ZlZDtpZihuPGkpcmV0dXJuIGYuT3V0cHV0U3RhdGVDaGFuZ2UuRXh0ZW5kZWRCZXlvbmROZXdsaW5lO2Zvcih2YXIgYT10Lmxlbmd0aDthPGUubGVuZ3RoO2ErKyl7dmFyIHM9ZS5jaGFyQXQoYSk7aWYoXCIgXCIhPXMmJlwiXFx0XCIhPXMpcmV0dXJuIGYuT3V0cHV0U3RhdGVDaGFuZ2UuRXh0ZW5kZWRCZXlvbmROZXdsaW5lfXJldHVybiBmLk91dHB1dFN0YXRlQ2hhbmdlLk5vQ2hhbmdlfX0se2tleTpcIkNvbnRpbnVlTWF4aW1hbGx5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLklmQXN5bmNXZUNhbnQoXCJDb250aW51ZU1heGltYWxseVwiKTtmb3IodmFyIHQ9bmV3IFN0O3RoaXMuY2FuQ29udGludWU7KXQuQXBwZW5kKHRoaXMuQ29udGludWUoKSk7cmV0dXJuIHQudG9TdHJpbmcoKX19LHtrZXk6XCJDb250ZW50QXRQYXRoXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWFpbkNvbnRlbnRDb250YWluZXIuQ29udGVudEF0UGF0aCh0KX19LHtrZXk6XCJLbm90Q29udGFpbmVyV2l0aE5hbWVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm1haW5Db250ZW50Q29udGFpbmVyLm5hbWVkQ29udGVudC5nZXQodCk7cmV0dXJuIGUgaW5zdGFuY2VvZiBFdD9lOm51bGx9fSx7a2V5OlwiUG9pbnRlckF0UGF0aFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKDA9PXQubGVuZ3RoKXJldHVybiB4dC5OdWxsO3ZhciBlPW5ldyB4dCxuPXQubGVuZ3RoLGk9bnVsbDtyZXR1cm4gbnVsbD09PXQubGFzdENvbXBvbmVudD9ndChcInBhdGgubGFzdENvbXBvbmVudFwiKToodC5sYXN0Q29tcG9uZW50LmlzSW5kZXg/KG49dC5sZW5ndGgtMSxpPXRoaXMubWFpbkNvbnRlbnRDb250YWluZXIuQ29udGVudEF0UGF0aCh0LHZvaWQgMCxuKSxlLmNvbnRhaW5lcj1pLmNvbnRhaW5lcixlLmluZGV4PXQubGFzdENvbXBvbmVudC5pbmRleCk6KGk9dGhpcy5tYWluQ29udGVudENvbnRhaW5lci5Db250ZW50QXRQYXRoKHQpLGUuY29udGFpbmVyPWkuY29udGFpbmVyLGUuaW5kZXg9LTEpLG51bGw9PWkub2JqfHxpLm9iaj09dGhpcy5tYWluQ29udGVudENvbnRhaW5lciYmMDxuP3RoaXMuRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBjb250ZW50IGF0IHBhdGggJ1wiK3QrXCInLCBhbmQgbm8gYXBwcm94aW1hdGlvbiBvZiBpdCB3YXMgcG9zc2libGUuXCIpOmkuYXBwcm94aW1hdGUmJnRoaXMuV2FybmluZyhcIkZhaWxlZCB0byBmaW5kIGNvbnRlbnQgYXQgcGF0aCAnXCIrdCtcIicsIHNvIGl0IHdhcyBhcHByb3hpbWF0ZWQgdG86ICdcIitpLm9iai5wYXRoK1wiJy5cIiksZSl9fSx7a2V5OlwiU3RhdGVTbmFwc2hvdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmU9dGhpcy5fc3RhdGUsdGhpcy5fc3RhdGU9dGhpcy5fc3RhdGUuQ29weUFuZFN0YXJ0UGF0Y2hpbmcoKX19LHtrZXk6XCJSZXN0b3JlU3RhdGVTbmFwc2hvdFwiLHZhbHVlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lJiZndChcIl9zdGF0ZVNuYXBzaG90QXRMYXN0TmV3bGluZVwiKSx0aGlzLl9zdGF0ZVNuYXBzaG90QXRMYXN0TmV3bGluZS5SZXN0b3JlQWZ0ZXJQYXRjaCgpLHRoaXMuX3N0YXRlPXRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lLHRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lPW51bGwsdGhpcy5fYXN5bmNTYXZpbmd8fHRoaXMuX3N0YXRlLkFwcGx5QW55UGF0Y2goKX19LHtrZXk6XCJEaXNjYXJkU25hcHNob3RcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2FzeW5jU2F2aW5nfHx0aGlzLl9zdGF0ZS5BcHBseUFueVBhdGNoKCksdGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmU9bnVsbH19LHtrZXk6XCJDb3B5U3RhdGVGb3JCYWNrZ3JvdW5kVGhyZWFkU2F2ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5JZkFzeW5jV2VDYW50KFwic3RhcnQgc2F2aW5nIG9uIGEgYmFja2dyb3VuZCB0aHJlYWRcIiksdGhpcy5fYXN5bmNTYXZpbmcpdGhyb3cgbmV3IEVycm9yKFwiU3RvcnkgaXMgYWxyZWFkeSBpbiBiYWNrZ3JvdW5kIHNhdmluZyBtb2RlLCBjYW4ndCBjYWxsIENvcHlTdGF0ZUZvckJhY2tncm91bmRUaHJlYWRTYXZlIGFnYWluIVwiKTt2YXIgdD10aGlzLl9zdGF0ZTtyZXR1cm4gdGhpcy5fc3RhdGU9dGhpcy5fc3RhdGUuQ29weUFuZFN0YXJ0UGF0Y2hpbmcoKSx0aGlzLl9hc3luY1NhdmluZz0hMCx0fX0se2tleTpcIkJhY2tncm91bmRTYXZlQ29tcGxldGVcIix2YWx1ZTpmdW5jdGlvbigpe251bGw9PT10aGlzLl9zdGF0ZVNuYXBzaG90QXRMYXN0TmV3bGluZSYmdGhpcy5fc3RhdGUuQXBwbHlBbnlQYXRjaCgpLHRoaXMuX2FzeW5jU2F2aW5nPSExfX0se2tleTpcIlN0ZXBcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PSEwLGU9dGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlci5jb3B5KCk7aWYoIWUuaXNOdWxsKXtmb3IodmFyIG49eXQoZS5SZXNvbHZlKCksRXQpO24mJih0aGlzLlZpc2l0Q29udGFpbmVyKG4sITApLDAhPW4uY29udGVudC5sZW5ndGgpOyluPXl0KChlPXh0LlN0YXJ0T2YobikpLlJlc29sdmUoKSxFdCk7dGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlcj1lLmNvcHkoKSxudWxsIT10aGlzLl9wcm9maWxlciYmdGhpcy5fcHJvZmlsZXIuU3RlcCh0aGlzLnN0YXRlLmNhbGxTdGFjayk7dmFyIGkscixhLHMsbyx1PWUuUmVzb2x2ZSgpLGw9dGhpcy5QZXJmb3JtTG9naWNBbmRGbG93Q29udHJvbCh1KTt0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLmlzTnVsbHx8KGwmJih0PSExKSwoaT15dCh1LEcpKSYmKChyPXRoaXMuUHJvY2Vzc0Nob2ljZShpKSkmJnRoaXMuc3RhdGUuZ2VuZXJhdGVkQ2hvaWNlcy5wdXNoKHIpLHU9bnVsbCx0PSExKSx1IGluc3RhbmNlb2YgRXQmJih0PSExKSx0JiYoKGE9eXQodSxJKSkmJi0xPT1hLmNvbnRleHRJbmRleCYmKHM9dGhpcy5zdGF0ZS5jYWxsU3RhY2suQ29udGV4dEZvclZhcmlhYmxlTmFtZWQoYS52YXJpYWJsZU5hbWUpLHU9bmV3IEkoYS52YXJpYWJsZU5hbWUscykpLHRoaXMuc3RhdGUuaW5FeHByZXNzaW9uRXZhbHVhdGlvbj90aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sodSk6dGhpcy5zdGF0ZS5QdXNoVG9PdXRwdXRTdHJlYW0odSkpLHRoaXMuTmV4dENvbnRlbnQoKSwobz15dCh1LEF0KSkmJm8uY29tbWFuZFR5cGU9PUF0LkNvbW1hbmRUeXBlLlN0YXJ0VGhyZWFkJiZ0aGlzLnN0YXRlLmNhbGxTdGFjay5QdXNoVGhyZWFkKCkpfX19LHtrZXk6XCJWaXNpdENvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dC5jb3VudGluZ0F0U3RhcnRPbmx5JiYhZXx8KHQudmlzaXRzU2hvdWxkQmVDb3VudGVkJiZ0aGlzLnN0YXRlLkluY3JlbWVudFZpc2l0Q291bnRGb3JDb250YWluZXIodCksdC50dXJuSW5kZXhTaG91bGRCZUNvdW50ZWQmJnRoaXMuc3RhdGUuUmVjb3JkVHVybkluZGV4VmlzaXRUb0NvbnRhaW5lcih0KSl9fSx7a2V5OlwiVmlzaXRDaGFuZ2VkQ29udGFpbmVyc0R1ZVRvRGl2ZXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnN0YXRlLnByZXZpb3VzUG9pbnRlci5jb3B5KCksZT10aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLmNvcHkoKTtpZighZS5pc051bGwmJi0xIT1lLmluZGV4KXtpZih0aGlzLl9wcmV2Q29udGFpbmVycy5sZW5ndGg9MCwhdC5pc051bGwpZm9yKHZhciBuPXl0KHQuUmVzb2x2ZSgpLEV0KXx8eXQodC5jb250YWluZXIsRXQpO247KXRoaXMuX3ByZXZDb250YWluZXJzLnB1c2gobiksbj15dChuLnBhcmVudCxFdCk7dmFyIGk9ZS5SZXNvbHZlKCk7aWYobnVsbCE9aSlmb3IodmFyIHI9eXQoaS5wYXJlbnQsRXQpO3ImJih0aGlzLl9wcmV2Q29udGFpbmVycy5pbmRleE9mKHIpPDB8fHIuY291bnRpbmdBdFN0YXJ0T25seSk7KXt2YXIgYT0wPHIuY29udGVudC5sZW5ndGgmJmk9PXIuY29udGVudFswXTt0aGlzLlZpc2l0Q29udGFpbmVyKHIsYSkscj15dCgoaT1yKS5wYXJlbnQsRXQpfX19fSx7a2V5OlwiUHJvY2Vzc0Nob2ljZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLG49ITA7dC5oYXNDb25kaXRpb24mJihlPXRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCksdGhpcy5Jc1RydXRoeShlKXx8KG49ITEpKTt2YXIgaT1cIlwiLHI9XCJcIjtpZih0Lmhhc0Nob2ljZU9ubHlDb250ZW50JiYocj1tdCh0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLHd0KS52YWx1ZXx8XCJcIiksdC5oYXNTdGFydENvbnRlbnQmJihpPW10KHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCksd3QpLnZhbHVlfHxcIlwiKSx0Lm9uY2VPbmx5JiYwPHRoaXMuc3RhdGUuVmlzaXRDb3VudEZvckNvbnRhaW5lcih0LmNob2ljZVRhcmdldCkmJihuPSExKSwhbilyZXR1cm4gbnVsbDt2YXIgYT1uZXcgTTtyZXR1cm4gYS50YXJnZXRQYXRoPXQucGF0aE9uQ2hvaWNlLGEuc291cmNlUGF0aD10LnBhdGgudG9TdHJpbmcoKSxhLmlzSW52aXNpYmxlRGVmYXVsdD10LmlzSW52aXNpYmxlRGVmYXVsdCxhLnRocmVhZEF0R2VuZXJhdGlvbj10aGlzLnN0YXRlLmNhbGxTdGFjay5Gb3JrVGhyZWFkKCksYS50ZXh0PShpK3IpLnJlcGxhY2UoL15bIFxcdF0rfFsgXFx0XSskL2csXCJcIiksYX19LHtrZXk6XCJJc1RydXRoeVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBfdCl7dmFyIGU9dDtyZXR1cm4gZSBpbnN0YW5jZW9mIFB0Pyh0aGlzLkVycm9yKFwiU2hvdWxkbid0IHVzZSBhIGRpdmVydCB0YXJnZXQgKHRvIFwiK2UudGFyZ2V0UGF0aCtcIikgYXMgYSBjb25kaXRpb25hbCB2YWx1ZS4gRGlkIHlvdSBpbnRlbmQgYSBmdW5jdGlvbiBjYWxsICdsaWtlVGhpcygpJyBvciBhIHJlYWQgY291bnQgY2hlY2sgJ2xpa2VUaGlzJz8gKG5vIGFycm93cylcIiksITEpOmUuaXNUcnV0aHl9cmV0dXJuITF9fSx7a2V5OlwiUGVyZm9ybUxvZ2ljQW5kRmxvd0NvbnRyb2xcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihudWxsPT10KXJldHVybiExO2lmKHQgaW5zdGFuY2VvZiBJdCl7dmFyIGU9dDtpZihlLmlzQ29uZGl0aW9uYWwpe3ZhciBuPXRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCk7aWYoIXRoaXMuSXNUcnV0aHkobikpcmV0dXJuITB9aWYoZS5oYXNWYXJpYWJsZVRhcmdldCl7dmFyIGkscixhPWUudmFyaWFibGVEaXZlcnROYW1lLHM9dGhpcy5zdGF0ZS52YXJpYWJsZXNTdGF0ZS5HZXRWYXJpYWJsZVdpdGhOYW1lKGEpO251bGw9PXM/dGhpcy5FcnJvcihcIlRyaWVkIHRvIGRpdmVydCB1c2luZyBhIHRhcmdldCBmcm9tIGEgdmFyaWFibGUgdGhhdCBjb3VsZCBub3QgYmUgZm91bmQgKFwiK2ErXCIpXCIpOnMgaW5zdGFuY2VvZiBQdHx8KHI9XCJUcmllZCB0byBkaXZlcnQgdG8gYSB0YXJnZXQgZnJvbSBhIHZhcmlhYmxlLCBidXQgdGhlIHZhcmlhYmxlIChcIithK1wiKSBkaWRuJ3QgY29udGFpbiBhIGRpdmVydCB0YXJnZXQsIGl0IFwiLChpPXl0KHMsVHQpKWluc3RhbmNlb2YgVHQmJjA9PWkudmFsdWU/cis9XCJ3YXMgZW1wdHkvbnVsbCAodGhlIHZhbHVlIDApLlwiOnIrPVwiY29udGFpbmVkICdcIitzK1wiJy5cIix0aGlzLkVycm9yKHIpKTt2YXIgbz1tdChzLFB0KTt0aGlzLnN0YXRlLmRpdmVydGVkUG9pbnRlcj10aGlzLlBvaW50ZXJBdFBhdGgoby50YXJnZXRQYXRoKX1lbHNle2lmKGUuaXNFeHRlcm5hbClyZXR1cm4gdGhpcy5DYWxsRXh0ZXJuYWxGdW5jdGlvbihlLnRhcmdldFBhdGhTdHJpbmcsZS5leHRlcm5hbEFyZ3MpLCEwO3RoaXMuc3RhdGUuZGl2ZXJ0ZWRQb2ludGVyPWUudGFyZ2V0UG9pbnRlci5jb3B5KCl9cmV0dXJuIGUucHVzaGVzVG9TdGFjayYmdGhpcy5zdGF0ZS5jYWxsU3RhY2suUHVzaChlLnN0YWNrUHVzaFR5cGUsdm9pZCAwLHRoaXMuc3RhdGUub3V0cHV0U3RyZWFtLmxlbmd0aCksdGhpcy5zdGF0ZS5kaXZlcnRlZFBvaW50ZXIuaXNOdWxsJiYhZS5pc0V4dGVybmFsJiYoZSYmZS5kZWJ1Z01ldGFkYXRhJiZudWxsIT1lLmRlYnVnTWV0YWRhdGEuc291cmNlTmFtZT90aGlzLkVycm9yKFwiRGl2ZXJ0IHRhcmdldCBkb2Vzbid0IGV4aXN0OiBcIitlLmRlYnVnTWV0YWRhdGEuc291cmNlTmFtZSk6dGhpcy5FcnJvcihcIkRpdmVydCByZXNvbHV0aW9uIGZhaWxlZDogXCIrZSkpLCEwfWlmKHQgaW5zdGFuY2VvZiBBdCl7dmFyIHUsbCxoPXQ7c3dpdGNoKGguY29tbWFuZFR5cGUpe2Nhc2UgQXQuQ29tbWFuZFR5cGUuRXZhbFN0YXJ0OnRoaXMuQXNzZXJ0KCExPT09dGhpcy5zdGF0ZS5pbkV4cHJlc3Npb25FdmFsdWF0aW9uLFwiQWxyZWFkeSBpbiBleHByZXNzaW9uIGV2YWx1YXRpb24/XCIpLHRoaXMuc3RhdGUuaW5FeHByZXNzaW9uRXZhbHVhdGlvbj0hMDticmVhaztjYXNlIEF0LkNvbW1hbmRUeXBlLkV2YWxFbmQ6dGhpcy5Bc3NlcnQoITA9PT10aGlzLnN0YXRlLmluRXhwcmVzc2lvbkV2YWx1YXRpb24sXCJOb3QgaW4gZXhwcmVzc2lvbiBldmFsdWF0aW9uIG1vZGVcIiksdGhpcy5zdGF0ZS5pbkV4cHJlc3Npb25FdmFsdWF0aW9uPSExO2JyZWFrO2Nhc2UgQXQuQ29tbWFuZFR5cGUuRXZhbE91dHB1dDowPHRoaXMuc3RhdGUuZXZhbHVhdGlvblN0YWNrLmxlbmd0aCYmKCh1PXRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCkpaW5zdGFuY2VvZiBWdHx8KGw9bmV3IHd0KHUudG9TdHJpbmcoKSksdGhpcy5zdGF0ZS5QdXNoVG9PdXRwdXRTdHJlYW0obCkpKTticmVhaztjYXNlIEF0LkNvbW1hbmRUeXBlLk5vT3A6YnJlYWs7Y2FzZSBBdC5Db21tYW5kVHlwZS5EdXBsaWNhdGU6dGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKHRoaXMuc3RhdGUuUGVla0V2YWx1YXRpb25TdGFjaygpKTticmVhaztjYXNlIEF0LkNvbW1hbmRUeXBlLlBvcEV2YWx1YXRlZFZhbHVlOnRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCk7YnJlYWs7Y2FzZSBBdC5Db21tYW5kVHlwZS5Qb3BGdW5jdGlvbjpjYXNlIEF0LkNvbW1hbmRUeXBlLlBvcFR1bm5lbDp2YXIgYyxmLHYsZCxwPWguY29tbWFuZFR5cGU9PUF0LkNvbW1hbmRUeXBlLlBvcEZ1bmN0aW9uP050LkZ1bmN0aW9uOk50LlR1bm5lbCx5PW51bGw7aWYocCE9TnQuVHVubmVsfHxudWxsPT09KHk9eXQoYz10aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLFB0KSkmJnRoaXMuQXNzZXJ0KGMgaW5zdGFuY2VvZiBWdCxcIkV4cGVjdGVkIHZvaWQgaWYgLT4tPiBkb2Vzbid0IG92ZXJyaWRlIHRhcmdldFwiKSx0aGlzLnN0YXRlLlRyeUV4aXRGdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZSgpKWJyZWFrO3RoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LnR5cGU9PXAmJnRoaXMuc3RhdGUuY2FsbFN0YWNrLmNhblBvcD8odGhpcy5zdGF0ZS5Qb3BDYWxsU3RhY2soKSx5JiYodGhpcy5zdGF0ZS5kaXZlcnRlZFBvaW50ZXI9dGhpcy5Qb2ludGVyQXRQYXRoKHkudGFyZ2V0UGF0aCkpKTooKGY9bmV3IE1hcCkuc2V0KE50LkZ1bmN0aW9uLFwiZnVuY3Rpb24gcmV0dXJuIHN0YXRlbWVudCAofiByZXR1cm4pXCIpLGYuc2V0KE50LlR1bm5lbCxcInR1bm5lbCBvbndhcmRzIHN0YXRlbWVudCAoLT4tPilcIiksdj1mLmdldCh0aGlzLnN0YXRlLmNhbGxTdGFjay5jdXJyZW50RWxlbWVudC50eXBlKSx0aGlzLnN0YXRlLmNhbGxTdGFjay5jYW5Qb3B8fCh2PVwiZW5kIG9mIGZsb3cgKC0+IEVORCBvciBjaG9pY2UpXCIpLGQ9XCJGb3VuZCBcIitmLmdldChwKStcIiwgd2hlbiBleHBlY3RlZCBcIit2LHRoaXMuRXJyb3IoZCkpO2JyZWFrO2Nhc2UgQXQuQ29tbWFuZFR5cGUuQmVnaW5TdHJpbmc6dGhpcy5zdGF0ZS5QdXNoVG9PdXRwdXRTdHJlYW0oaCksdGhpcy5Bc3NlcnQoITA9PT10aGlzLnN0YXRlLmluRXhwcmVzc2lvbkV2YWx1YXRpb24sXCJFeHBlY3RlZCB0byBiZSBpbiBhbiBleHByZXNzaW9uIHdoZW4gZXZhbHVhdGluZyBhIHN0cmluZ1wiKSx0aGlzLnN0YXRlLmluRXhwcmVzc2lvbkV2YWx1YXRpb249ITE7YnJlYWs7Y2FzZSBBdC5Db21tYW5kVHlwZS5FbmRTdHJpbmc6Zm9yKHZhciBtPVtdLGc9MCxTPXRoaXMuc3RhdGUub3V0cHV0U3RyZWFtLmxlbmd0aC0xOzA8PVM7LS1TKXt2YXIgaz10aGlzLnN0YXRlLm91dHB1dFN0cmVhbVtTXTtnKys7dmFyIEM9eXQoayxBdCk7aWYoQyYmQy5jb21tYW5kVHlwZT09QXQuQ29tbWFuZFR5cGUuQmVnaW5TdHJpbmcpYnJlYWs7ayBpbnN0YW5jZW9mIHd0JiZtLnB1c2goayl9dGhpcy5zdGF0ZS5Qb3BGcm9tT3V0cHV0U3RyZWFtKGcpLG09bS5yZXZlcnNlKCk7dmFyIGIsXz1uZXcgU3QsVD1wdChtKTt0cnl7Zm9yKFQucygpOyEoYj1ULm4oKSkuZG9uZTspe3ZhciB3PWIudmFsdWU7Xy5BcHBlbmQody50b1N0cmluZygpKX19Y2F0Y2godCl7VC5lKHQpfWZpbmFsbHl7VC5mKCl9dGhpcy5zdGF0ZS5pbkV4cHJlc3Npb25FdmFsdWF0aW9uPSEwLHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgd3QoXy50b1N0cmluZygpKSk7YnJlYWs7Y2FzZSBBdC5Db21tYW5kVHlwZS5DaG9pY2VDb3VudDp2YXIgUD10aGlzLnN0YXRlLmdlbmVyYXRlZENob2ljZXMubGVuZ3RoO3RoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgVHQoUCkpO2JyZWFrO2Nhc2UgQXQuQ29tbWFuZFR5cGUuVHVybnM6dGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKG5ldyBUdCh0aGlzLnN0YXRlLmN1cnJlbnRUdXJuSW5kZXgrMSkpO2JyZWFrO2Nhc2UgQXQuQ29tbWFuZFR5cGUuVHVybnNTaW5jZTpjYXNlIEF0LkNvbW1hbmRUeXBlLlJlYWRDb3VudDp2YXIgTz10aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpO2lmKCEoTyBpbnN0YW5jZW9mIFB0KSl7dmFyIEU9TyBpbnN0YW5jZW9mIFR0P1wiLiBEaWQgeW91IGFjY2lkZW50YWxseSBwYXNzIGEgcmVhZCBjb3VudCAoJ2tub3RfbmFtZScpIGluc3RlYWQgb2YgYSB0YXJnZXQgKCctPiBrbm90X25hbWUnKT9cIjpcIlwiO3RoaXMuRXJyb3IoXCJUVVJOU19TSU5DRSAvIFJFQURfQ09VTlQgZXhwZWN0ZWQgYSBkaXZlcnQgdGFyZ2V0IChrbm90LCBzdGl0Y2gsIGxhYmVsIG5hbWUpLCBidXQgc2F3IFwiK08rRSk7YnJlYWt9dmFyIE4sQT1tdChPLFB0KSx4PXl0KHRoaXMuQ29udGVudEF0UGF0aChBLnRhcmdldFBhdGgpLmNvcnJlY3RPYmosRXQpO251bGwhPXg/Tj1oLmNvbW1hbmRUeXBlPT1BdC5Db21tYW5kVHlwZS5UdXJuc1NpbmNlP3RoaXMuc3RhdGUuVHVybnNTaW5jZUZvckNvbnRhaW5lcih4KTp0aGlzLnN0YXRlLlZpc2l0Q291bnRGb3JDb250YWluZXIoeCk6KE49aC5jb21tYW5kVHlwZT09QXQuQ29tbWFuZFR5cGUuVHVybnNTaW5jZT8tMTowLHRoaXMuV2FybmluZyhcIkZhaWxlZCB0byBmaW5kIGNvbnRhaW5lciBmb3IgXCIraC50b1N0cmluZygpK1wiIGxvb2t1cCBhdCBcIitBLnRhcmdldFBhdGgudG9TdHJpbmcoKSkpLHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgVHQoTikpO2JyZWFrO2Nhc2UgQXQuQ29tbWFuZFR5cGUuUmFuZG9tOnZhciBJPXl0KHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCksVHQpLFc9eXQodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSxUdCk7aWYobnVsbD09V3x8VyBpbnN0YW5jZW9mIFR0PT0hMSlyZXR1cm4gdGhpcy5FcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIG1pbmltdW0gcGFyYW1ldGVyIG9mIFJBTkRPTShtaW4sIG1heClcIik7aWYobnVsbD09SXx8VyBpbnN0YW5jZW9mIFR0PT0hMSlyZXR1cm4gdGhpcy5FcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIG1heGltdW0gcGFyYW1ldGVyIG9mIFJBTkRPTShtaW4sIG1heClcIik7aWYobnVsbD09PUkudmFsdWUpcmV0dXJuIGd0KFwibWF4SW50LnZhbHVlXCIpO2lmKG51bGw9PT1XLnZhbHVlKXJldHVybiBndChcIm1pbkludC52YWx1ZVwiKTt2YXIgRj1JLnZhbHVlLVcudmFsdWUrMTtGPD0wJiZ0aGlzLkVycm9yKFwiUkFORE9NIHdhcyBjYWxsZWQgd2l0aCBtaW5pbXVtIGFzIFwiK1cudmFsdWUrXCIgYW5kIG1heGltdW0gYXMgXCIrSS52YWx1ZStcIi4gVGhlIG1heGltdW0gbXVzdCBiZSBsYXJnZXJcIik7dmFyIFY9dGhpcy5zdGF0ZS5zdG9yeVNlZWQrdGhpcy5zdGF0ZS5wcmV2aW91c1JhbmRvbSxSPW5ldyBMdChWKS5uZXh0KCksTD1SJUYrVy52YWx1ZTt0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sobmV3IFR0KEwpKSx0aGlzLnN0YXRlLnByZXZpb3VzUmFuZG9tPVI7YnJlYWs7Y2FzZSBBdC5Db21tYW5kVHlwZS5TZWVkUmFuZG9tOnZhciBqPXl0KHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCksVHQpO2lmKG51bGw9PWp8fGogaW5zdGFuY2VvZiBUdD09ITEpcmV0dXJuIHRoaXMuRXJyb3IoXCJJbnZhbGlkIHZhbHVlIHBhc3NlZCB0byBTRUVEX1JBTkRPTVwiKTtpZihudWxsPT09ai52YWx1ZSlyZXR1cm4gZ3QoXCJtaW5JbnQudmFsdWVcIik7dGhpcy5zdGF0ZS5zdG9yeVNlZWQ9ai52YWx1ZSx0aGlzLnN0YXRlLnByZXZpb3VzUmFuZG9tPTAsdGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKG5ldyBWdCk7YnJlYWs7Y2FzZSBBdC5Db21tYW5kVHlwZS5WaXNpdEluZGV4OnZhciBEPXRoaXMuc3RhdGUuVmlzaXRDb3VudEZvckNvbnRhaW5lcih0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLmNvbnRhaW5lciktMTt0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sobmV3IFR0KEQpKTticmVhaztjYXNlIEF0LkNvbW1hbmRUeXBlLlNlcXVlbmNlU2h1ZmZsZUluZGV4OnZhciBHPXRoaXMuTmV4dFNlcXVlbmNlU2h1ZmZsZUluZGV4KCk7dGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKG5ldyBUdChHKSk7YnJlYWs7Y2FzZSBBdC5Db21tYW5kVHlwZS5TdGFydFRocmVhZDpicmVhaztjYXNlIEF0LkNvbW1hbmRUeXBlLkRvbmU6dGhpcy5zdGF0ZS5jYWxsU3RhY2suY2FuUG9wVGhyZWFkP3RoaXMuc3RhdGUuY2FsbFN0YWNrLlBvcFRocmVhZCgpOih0aGlzLnN0YXRlLmRpZFNhZmVFeGl0PSEwLHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXI9eHQuTnVsbCk7YnJlYWs7Y2FzZSBBdC5Db21tYW5kVHlwZS5FbmQ6dGhpcy5zdGF0ZS5Gb3JjZUVuZCgpO2JyZWFrO2Nhc2UgQXQuQ29tbWFuZFR5cGUuTGlzdEZyb21JbnQ6dmFyIEI9eXQodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSxUdCksTT1tdCh0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLHd0KTtpZihudWxsPT09Qil0aHJvdyBuZXcgYnQoXCJQYXNzZWQgbm9uLWludGVnZXIgd2hlbiBjcmVhdGluZyBhIGxpc3QgZWxlbWVudCBmcm9tIGEgbnVtZXJpY2FsIHZhbHVlLlwiKTt2YXIgcT1udWxsO2lmKG51bGw9PT10aGlzLmxpc3REZWZpbml0aW9ucylyZXR1cm4gZ3QoXCJ0aGlzLmxpc3REZWZpbml0aW9uc1wiKTt2YXIgSj10aGlzLmxpc3REZWZpbml0aW9ucy5UcnlMaXN0R2V0RGVmaW5pdGlvbihNLnZhbHVlLG51bGwpO2lmKCFKLmV4aXN0cyl0aHJvdyBuZXcgYnQoXCJGYWlsZWQgdG8gZmluZCBMSVNUIGNhbGxlZCBcIitNLnZhbHVlKTtpZihudWxsPT09Qi52YWx1ZSlyZXR1cm4gZ3QoXCJtaW5JbnQudmFsdWVcIik7dmFyIEs9Si5yZXN1bHQuVHJ5R2V0SXRlbVdpdGhWYWx1ZShCLnZhbHVlLGt0Lk51bGwpO0suZXhpc3RzJiYocT1uZXcgT3QoSy5yZXN1bHQsQi52YWx1ZSkpLG51bGw9PXEmJihxPW5ldyBPdCksdGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKHEpO2JyZWFrO2Nhc2UgQXQuQ29tbWFuZFR5cGUuTGlzdFJhbmdlOnZhciBVPXl0KHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCksX3QpLHo9eXQodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSxfdCksSD15dCh0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLE90KTtpZihudWxsPT09SHx8bnVsbD09PXp8fG51bGw9PT1VKXRocm93IG5ldyBidChcIkV4cGVjdGVkIGxpc3QsIG1pbmltdW0gYW5kIG1heGltdW0gZm9yIExJU1RfUkFOR0VcIik7aWYobnVsbD09PUgudmFsdWUpcmV0dXJuIGd0KFwidGFyZ2V0TGlzdC52YWx1ZVwiKTt2YXIgJD1ILnZhbHVlLkxpc3RXaXRoU3ViUmFuZ2Uoei52YWx1ZU9iamVjdCxVLnZhbHVlT2JqZWN0KTt0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sobmV3IE90KCQpKTticmVhaztjYXNlIEF0LkNvbW1hbmRUeXBlLkxpc3RSYW5kb206dmFyIFg9dGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKTtpZihudWxsPT09WCl0aHJvdyBuZXcgYnQoXCJFeHBlY3RlZCBsaXN0IGZvciBMSVNUX1JBTkRPTVwiKTt2YXIgWT1YLnZhbHVlLFE9bnVsbDtpZihudWxsPT09WSl0aHJvdyBndChcImxpc3RcIik7aWYoMD09WS5Db3VudClRPW5ldyBDdDtlbHNle2Zvcih2YXIgWj10aGlzLnN0YXRlLnN0b3J5U2VlZCt0aGlzLnN0YXRlLnByZXZpb3VzUmFuZG9tLHR0PW5ldyBMdChaKS5uZXh0KCksZXQ9dHQlWS5Db3VudCxudD1ZLmVudHJpZXMoKSxpdD0wO2l0PD1ldC0xO2l0KyspbnQubmV4dCgpO3ZhciBydD1udC5uZXh0KCkudmFsdWUsYXQ9e0tleTprdC5mcm9tU2VyaWFsaXplZEtleShydFswXSksVmFsdWU6cnRbMV19O2lmKG51bGw9PT1hdC5LZXkub3JpZ2luTmFtZSlyZXR1cm4gZ3QoXCJyYW5kb21JdGVtLktleS5vcmlnaW5OYW1lXCIpOyhRPW5ldyBDdChhdC5LZXkub3JpZ2luTmFtZSx0aGlzKSkuQWRkKGF0LktleSxhdC5WYWx1ZSksdGhpcy5zdGF0ZS5wcmV2aW91c1JhbmRvbT10dH10aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sobmV3IE90KFEpKTticmVhaztkZWZhdWx0OnRoaXMuRXJyb3IoXCJ1bmhhbmRsZWQgQ29udHJvbENvbW1hbmQ6IFwiK2gpfXJldHVybiEwfWlmKHQgaW5zdGFuY2VvZiBGdCl7dmFyIHN0PXQsb3Q9dGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKTtyZXR1cm4gdGhpcy5zdGF0ZS52YXJpYWJsZXNTdGF0ZS5Bc3NpZ24oc3Qsb3QpLCEwfWlmKHQgaW5zdGFuY2VvZiBXdCl7dmFyIHV0LGx0LGh0PXQsY3Q9bnVsbDtyZXR1cm4gbnVsbCE9aHQucGF0aEZvckNvdW50Pyh1dD1odC5jb250YWluZXJGb3JDb3VudCxsdD10aGlzLnN0YXRlLlZpc2l0Q291bnRGb3JDb250YWluZXIodXQpLGN0PW5ldyBUdChsdCkpOm51bGw9PShjdD10aGlzLnN0YXRlLnZhcmlhYmxlc1N0YXRlLkdldFZhcmlhYmxlV2l0aE5hbWUoaHQubmFtZSkpJiYodGhpcy5XYXJuaW5nKFwiVmFyaWFibGUgbm90IGZvdW5kOiAnXCIraHQubmFtZStcIicuIFVzaW5nIGRlZmF1bHQgdmFsdWUgb2YgMCAoZmFsc2UpLiBUaGlzIGNhbiBoYXBwZW4gd2l0aCB0ZW1wb3JhcnkgdmFyaWFibGVzIGlmIHRoZSBkZWNsYXJhdGlvbiBoYXNuJ3QgeWV0IGJlZW4gaGl0LiBHbG9iYWxzIGFyZSBhbHdheXMgZ2l2ZW4gYSBkZWZhdWx0IHZhbHVlIG9uIGxvYWQgaWYgYSB2YWx1ZSBkb2Vzbid0IGV4aXN0IGluIHRoZSBzYXZlIHN0YXRlLlwiKSxjdD1uZXcgVHQoMCkpLHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhjdCksITB9aWYodCBpbnN0YW5jZW9mIFJ0KXt2YXIgZnQ9dCx2dD10aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjayhmdC5udW1iZXJPZlBhcmFtZXRlcnMpLGR0PWZ0LkNhbGwodnQpO3JldHVybiB0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2soZHQpLCEwfXJldHVybiExfX0se2tleTpcIkNob29zZVBhdGhTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9ISgxPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWUpfHxlLHI9Mjxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1uP246W107aWYodGhpcy5JZkFzeW5jV2VDYW50KFwiY2FsbCBDaG9vc2VQYXRoU3RyaW5nIHJpZ2h0IG5vd1wiKSxpKXRoaXMuUmVzZXRDYWxsc3RhY2soKTtlbHNlIGlmKHRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LnR5cGU9PU50LkZ1bmN0aW9uKXt2YXIgYT1cIlwiLHM9dGhpcy5zdGF0ZS5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQuY3VycmVudFBvaW50ZXIuY29udGFpbmVyO3Rocm93IG51bGwhPXMmJihhPVwiKFwiK3MucGF0aC50b1N0cmluZygpK1wiKSBcIiksbmV3IEVycm9yKFwiU3Rvcnkgd2FzIHJ1bm5pbmcgYSBmdW5jdGlvbiBcIithK1wid2hlbiB5b3UgY2FsbGVkIENob29zZVBhdGhTdHJpbmcoXCIrdCtcIikgLSB0aGlzIGlzIGFsbW9zdCBjZXJ0YWlubHkgbm90IG5vdCB3aGF0IHlvdSB3YW50ISBGdWxsIHN0YWNrIHRyYWNlOiBcXG5cIit0aGlzLnN0YXRlLmNhbGxTdGFjay5jYWxsU3RhY2tUcmFjZSl9dGhpcy5zdGF0ZS5QYXNzQXJndW1lbnRzVG9FdmFsdWF0aW9uU3RhY2sociksdGhpcy5DaG9vc2VQYXRoKG5ldyBFKHQpKX19LHtrZXk6XCJJZkFzeW5jV2VDYW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5fYXN5bmNDb250aW51ZUFjdGl2ZSl0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBcIit0K1wiLiBTdG9yeSBpcyBpbiB0aGUgbWlkZGxlIG9mIGEgQ29udGludWVBc3luYygpLiBNYWtlIG1vcmUgQ29udGludWVBc3luYygpIGNhbGxzIG9yIGEgc2luZ2xlIENvbnRpbnVlKCkgY2FsbCBiZWZvcmVoYW5kLlwiKX19LHtrZXk6XCJDaG9vc2VQYXRoXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj0hKDE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZSl8fGU7dGhpcy5zdGF0ZS5TZXRDaG9zZW5QYXRoKHQsbiksdGhpcy5WaXNpdENoYW5nZWRDb250YWluZXJzRHVlVG9EaXZlcnQoKX19LHtrZXk6XCJDaG9vc2VDaG9pY2VJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9dDt2YXIgZT10aGlzLmN1cnJlbnRDaG9pY2VzO3RoaXMuQXNzZXJ0KDA8PXQmJnQ8ZS5sZW5ndGgsXCJjaG9pY2Ugb3V0IG9mIHJhbmdlXCIpO3ZhciBuPWVbdF07cmV0dXJuIG51bGw9PT1uLnRocmVhZEF0R2VuZXJhdGlvbj9ndChcImNob2ljZVRvQ2hvb3NlLnRocmVhZEF0R2VuZXJhdGlvblwiKTpudWxsPT09bi50YXJnZXRQYXRoP2d0KFwiY2hvaWNlVG9DaG9vc2UudGFyZ2V0UGF0aFwiKToodGhpcy5zdGF0ZS5jYWxsU3RhY2suY3VycmVudFRocmVhZD1uLnRocmVhZEF0R2VuZXJhdGlvbix2b2lkIHRoaXMuQ2hvb3NlUGF0aChuLnRhcmdldFBhdGgpKX19LHtrZXk6XCJIYXNGdW5jdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gbnVsbCE9dGhpcy5Lbm90Q29udGFpbmVyV2l0aE5hbWUodCl9Y2F0Y2godCl7cmV0dXJuITF9fX0se2tleTpcIkV2YWx1YXRlRnVuY3Rpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6W10scj0yPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PW4mJm47aWYodGhpcy5JZkFzeW5jV2VDYW50KFwiZXZhbHVhdGUgYSBmdW5jdGlvblwiKSxudWxsPT10KXRocm93IG5ldyBFcnJvcihcIkZ1bmN0aW9uIGlzIG51bGxcIik7aWYoXCJcIj09dHx8XCJcIj09dC50cmltKCkpdGhyb3cgbmV3IEVycm9yKFwiRnVuY3Rpb24gaXMgZW1wdHkgb3Igd2hpdGUgc3BhY2UuXCIpO3ZhciBhPXRoaXMuS25vdENvbnRhaW5lcldpdGhOYW1lKHQpO2lmKG51bGw9PWEpdGhyb3cgbmV3IEVycm9yKFwiRnVuY3Rpb24gZG9lc24ndCBleGlzdDogJ1wiK3QrXCInXCIpO3ZhciBzPVtdO3MucHVzaC5hcHBseShzLHRoaXMuc3RhdGUub3V0cHV0U3RyZWFtKSx0aGlzLl9zdGF0ZS5SZXNldE91dHB1dCgpLHRoaXMuc3RhdGUuU3RhcnRGdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZShhLGkpO2Zvcih2YXIgbz1uZXcgU3Q7dGhpcy5jYW5Db250aW51ZTspby5BcHBlbmQodGhpcy5Db250aW51ZSgpKTt2YXIgdT1vLnRvU3RyaW5nKCk7dGhpcy5fc3RhdGUuUmVzZXRPdXRwdXQocyk7dmFyIGw9dGhpcy5zdGF0ZS5Db21wbGV0ZUZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lKCk7cmV0dXJuIHI/e3JldHVybmVkOmwsb3V0cHV0OnV9Omx9fSx7a2V5OlwiRXZhbHVhdGVFeHByZXNzaW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdGF0ZS5jYWxsU3RhY2suZWxlbWVudHMubGVuZ3RoO3RoaXMuc3RhdGUuY2FsbFN0YWNrLlB1c2goTnQuVHVubmVsKSx0aGlzLl90ZW1wb3JhcnlFdmFsdWF0aW9uQ29udGFpbmVyPXQsdGhpcy5zdGF0ZS5Hb1RvU3RhcnQoKTt2YXIgbj10aGlzLnN0YXRlLmV2YWx1YXRpb25TdGFjay5sZW5ndGg7cmV0dXJuIHRoaXMuQ29udGludWUoKSx0aGlzLl90ZW1wb3JhcnlFdmFsdWF0aW9uQ29udGFpbmVyPW51bGwsdGhpcy5zdGF0ZS5jYWxsU3RhY2suZWxlbWVudHMubGVuZ3RoPmUmJnRoaXMuc3RhdGUuUG9wQ2FsbFN0YWNrKCksbjx0aGlzLnN0YXRlLmV2YWx1YXRpb25TdGFjay5sZW5ndGg/dGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKTpudWxsfX0se2tleTpcIkNhbGxFeHRlcm5hbEZ1bmN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZihudWxsPT09dClyZXR1cm4gZ3QoXCJmdW5jTmFtZVwiKTt2YXIgbj10aGlzLl9leHRlcm5hbHMuZ2V0KHQpLGk9bnVsbDtpZighKHZvaWQgMCE9PW4pKXtpZih0aGlzLmFsbG93RXh0ZXJuYWxGdW5jdGlvbkZhbGxiYWNrcylyZXR1cm4gaT10aGlzLktub3RDb250YWluZXJXaXRoTmFtZSh0KSx0aGlzLkFzc2VydChudWxsIT09aSxcIlRyeWluZyB0byBjYWxsIEVYVEVSTkFMIGZ1bmN0aW9uICdcIit0K1wiJyB3aGljaCBoYXMgbm90IGJlZW4gYm91bmQsIGFuZCBmYWxsYmFjayBpbmsgZnVuY3Rpb24gY291bGQgbm90IGJlIGZvdW5kLlwiKSx0aGlzLnN0YXRlLmNhbGxTdGFjay5QdXNoKE50LkZ1bmN0aW9uLHZvaWQgMCx0aGlzLnN0YXRlLm91dHB1dFN0cmVhbS5sZW5ndGgpLHZvaWQodGhpcy5zdGF0ZS5kaXZlcnRlZFBvaW50ZXI9eHQuU3RhcnRPZihpKSk7dGhpcy5Bc3NlcnQoITEsXCJUcnlpbmcgdG8gY2FsbCBFWFRFUk5BTCBmdW5jdGlvbiAnXCIrdCtcIicgd2hpY2ggaGFzIG5vdCBiZWVuIGJvdW5kIChhbmQgaW5rIGZhbGxiYWNrcyBkaXNhYmxlZCkuXCIpfWZvcih2YXIgcj1bXSxhPTA7YTxlOysrYSl7dmFyIHM9bXQodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSxfdCkudmFsdWVPYmplY3Q7ci5wdXNoKHMpfXIucmV2ZXJzZSgpO3ZhciBvPW4ociksdT1udWxsO251bGwhPW8/KHU9X3QuQ3JlYXRlKG8pLHRoaXMuQXNzZXJ0KG51bGwhPT11LFwiQ291bGQgbm90IGNyZWF0ZSBpbmsgdmFsdWUgZnJvbSByZXR1cm5lZCBvYmplY3Qgb2YgdHlwZSBcIitPKG8pKSk6dT1uZXcgVnQsdGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKHUpfX0se2tleTpcIkJpbmRFeHRlcm5hbEZ1bmN0aW9uR2VuZXJhbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5JZkFzeW5jV2VDYW50KFwiYmluZCBhbiBleHRlcm5hbCBmdW5jdGlvblwiKSx0aGlzLkFzc2VydCghdGhpcy5fZXh0ZXJuYWxzLmhhcyh0KSxcIkZ1bmN0aW9uICdcIit0K1wiJyBoYXMgYWxyZWFkeSBiZWVuIGJvdW5kLlwiKSx0aGlzLl9leHRlcm5hbHMuc2V0KHQsZSl9fSx7a2V5OlwiVHJ5Q29lcmNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHR9fSx7a2V5OlwiQmluZEV4dGVybmFsRnVuY3Rpb25cIix2YWx1ZTpmdW5jdGlvbih0LHIpe3ZhciBhPXRoaXM7dGhpcy5Bc3NlcnQobnVsbCE9cixcIkNhbid0IGJpbmQgYSBudWxsIGZ1bmN0aW9uXCIpLHRoaXMuQmluZEV4dGVybmFsRnVuY3Rpb25HZW5lcmFsKHQsZnVuY3Rpb24odCl7YS5Bc3NlcnQodC5sZW5ndGg+PXIubGVuZ3RoLFwiRXh0ZXJuYWwgZnVuY3Rpb24gZXhwZWN0ZWQgXCIrci5sZW5ndGgrXCIgYXJndW1lbnRzXCIpO2Zvcih2YXIgZT1bXSxuPTAsaT10Lmxlbmd0aDtuPGk7bisrKWVbbl09YS5UcnlDb2VyY2UodFtuXSk7cmV0dXJuIHIuYXBwbHkobnVsbCxlKX0pfX0se2tleTpcIlVuYmluZEV4dGVybmFsRnVuY3Rpb25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLklmQXN5bmNXZUNhbnQoXCJ1bmJpbmQgYW4gZXh0ZXJuYWwgYSBmdW5jdGlvblwiKSx0aGlzLkFzc2VydCh0aGlzLl9leHRlcm5hbHMuaGFzKHQpLFwiRnVuY3Rpb24gJ1wiK3QrXCInIGhhcyBub3QgYmVlbiBib3VuZC5cIiksdGhpcy5fZXh0ZXJuYWxzLmRlbGV0ZSh0KX19LHtrZXk6XCJWYWxpZGF0ZUV4dGVybmFsQmluZGluZ3NcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuLGk9bnVsbCxyPW51bGwsYT1lfHxuZXcgU2V0O2lmKHQgaW5zdGFuY2VvZiBFdCYmKGk9dCksdCBpbnN0YW5jZW9mIFQmJihyPXQpLG51bGw9PT1pJiZudWxsPT09cil0aGlzLlZhbGlkYXRlRXh0ZXJuYWxCaW5kaW5ncyh0aGlzLl9tYWluQ29udGVudENvbnRhaW5lcixhKSx0aGlzLl9oYXNWYWxpZGF0ZWRFeHRlcm5hbHM9ITAsMD09YS5zaXplP3RoaXMuX2hhc1ZhbGlkYXRlZEV4dGVybmFscz0hMDoobj1cIkVycm9yOiBNaXNzaW5nIGZ1bmN0aW9uIGJpbmRpbmcgZm9yIGV4dGVybmFsXCIsbis9MTxhLnNpemU/XCJzXCI6XCJcIixuKz1cIjogJ1wiLG4rPUFycmF5LmZyb20oYSkuam9pbihcIicsICdcIiksbis9XCInIFwiLG4rPXRoaXMuYWxsb3dFeHRlcm5hbEZ1bmN0aW9uRmFsbGJhY2tzP1wiLCBhbmQgbm8gZmFsbGJhY2sgaW5rIGZ1bmN0aW9uIGZvdW5kLlwiOlwiIChpbmsgZmFsbGJhY2tzIGRpc2FibGVkKVwiLHRoaXMuRXJyb3IobikpO2Vsc2UgaWYobnVsbCE9aSl7dmFyIHMsbz1wdChpLmNvbnRlbnQpO3RyeXtmb3Ioby5zKCk7IShzPW8ubigpKS5kb25lOyl7dmFyIHU9cy52YWx1ZTtudWxsIT11JiZ1Lmhhc1ZhbGlkTmFtZXx8dGhpcy5WYWxpZGF0ZUV4dGVybmFsQmluZGluZ3ModSxhKX19Y2F0Y2godCl7by5lKHQpfWZpbmFsbHl7by5mKCl9dmFyIGwsaD1wdChpLm5hbWVkQ29udGVudCk7dHJ5e2ZvcihoLnMoKTshKGw9aC5uKCkpLmRvbmU7KXt2YXIgYz1TKGwudmFsdWUsMilbMV07dGhpcy5WYWxpZGF0ZUV4dGVybmFsQmluZGluZ3MoeXQoYyxUKSxhKX19Y2F0Y2godCl7aC5lKHQpfWZpbmFsbHl7aC5mKCl9fWVsc2UgaWYobnVsbCE9cil7dmFyIGY9eXQocixJdCk7aWYoZiYmZi5pc0V4dGVybmFsKXt2YXIgdj1mLnRhcmdldFBhdGhTdHJpbmc7aWYobnVsbD09PXYpcmV0dXJuIGd0KFwibmFtZVwiKTt0aGlzLl9leHRlcm5hbHMuaGFzKHYpfHx0aGlzLmFsbG93RXh0ZXJuYWxGdW5jdGlvbkZhbGxiYWNrcyYmdGhpcy5tYWluQ29udGVudENvbnRhaW5lci5uYW1lZENvbnRlbnQuaGFzKHYpfHxhLmFkZCh2KX19fX0se2tleTpcIk9ic2VydmVWYXJpYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5JZkFzeW5jV2VDYW50KFwib2JzZXJ2ZSBhIG5ldyB2YXJpYWJsZVwiKSxudWxsPT09dGhpcy5fdmFyaWFibGVPYnNlcnZlcnMmJih0aGlzLl92YXJpYWJsZU9ic2VydmVycz1uZXcgTWFwKSwhdGhpcy5zdGF0ZS52YXJpYWJsZXNTdGF0ZS5HbG9iYWxWYXJpYWJsZUV4aXN0c1dpdGhOYW1lKHQpKXRocm93IG5ldyBidChcIkNhbm5vdCBvYnNlcnZlIHZhcmlhYmxlICdcIit0K1wiJyBiZWNhdXNlIGl0IHdhc24ndCBkZWNsYXJlZCBpbiB0aGUgaW5rIHN0b3J5LlwiKTt0aGlzLl92YXJpYWJsZU9ic2VydmVycy5oYXModCk/dGhpcy5fdmFyaWFibGVPYnNlcnZlcnMuZ2V0KHQpLnB1c2goZSk6dGhpcy5fdmFyaWFibGVPYnNlcnZlcnMuc2V0KHQsW2VdKX19LHtrZXk6XCJPYnNlcnZlVmFyaWFibGVzXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxpPXQubGVuZ3RoO248aTtuKyspdGhpcy5PYnNlcnZlVmFyaWFibGUodFtuXSxlW25dKX19LHtrZXk6XCJSZW1vdmVWYXJpYWJsZU9ic2VydmVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbjtpZih0aGlzLklmQXN5bmNXZUNhbnQoXCJyZW1vdmUgYSB2YXJpYWJsZSBvYnNlcnZlclwiKSxudWxsIT09dGhpcy5fdmFyaWFibGVPYnNlcnZlcnMpaWYodm9pZCAwIT09ZSl0aGlzLl92YXJpYWJsZU9ic2VydmVycy5oYXMoZSkmJihuPXRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLmdldChlKSxudWxsIT09dD9uLnNwbGljZShuLmluZGV4T2YodCksMSk6dGhpcy5fdmFyaWFibGVPYnNlcnZlcnMuZGVsZXRlKGUpKTtlbHNlIGlmKG51bGwhPT10KXt2YXIgaSxyPXB0KHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLmtleXMoKSk7dHJ5e2ZvcihyLnMoKTshKGk9ci5uKCkpLmRvbmU7KXt2YXIgYT1pLnZhbHVlLHM9dGhpcy5fdmFyaWFibGVPYnNlcnZlcnMuZ2V0KGEpO3Muc3BsaWNlKHMuaW5kZXhPZih0KSwxKX19Y2F0Y2godCl7ci5lKHQpfWZpbmFsbHl7ci5mKCl9fX19LHtrZXk6XCJWYXJpYWJsZVN0YXRlRGlkQ2hhbmdlRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKG51bGwhPT10aGlzLl92YXJpYWJsZU9ic2VydmVycyl7dmFyIG49dGhpcy5fdmFyaWFibGVPYnNlcnZlcnMuZ2V0KHQpO2lmKHZvaWQgMCE9PW4pe2lmKCEoZSBpbnN0YW5jZW9mIF90KSl0aHJvdyBuZXcgRXJyb3IoXCJUcmllZCB0byBnZXQgdGhlIHZhbHVlIG9mIGEgdmFyaWFibGUgdGhhdCBpc24ndCBhIHN0YW5kYXJkIHR5cGVcIik7dmFyIGkscj1tdChlLF90KSxhPXB0KG4pO3RyeXtmb3IoYS5zKCk7IShpPWEubigpKS5kb25lOyl7KDAsaS52YWx1ZSkodCxyLnZhbHVlT2JqZWN0KX19Y2F0Y2godCl7YS5lKHQpfWZpbmFsbHl7YS5mKCl9fX19fSx7a2V5OlwiVGFnc0ZvckNvbnRlbnRBdFBhdGhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5UYWdzQXRTdGFydE9mRmxvd0NvbnRhaW5lcldpdGhQYXRoU3RyaW5nKHQpfX0se2tleTpcIlRhZ3NBdFN0YXJ0T2ZGbG93Q29udGFpbmVyV2l0aFBhdGhTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgRSh0KSxuPXRoaXMuQ29udGVudEF0UGF0aChlKS5jb250YWluZXI7aWYobnVsbD09PW4pcmV0dXJuIGd0KFwiZmxvd0NvbnRhaW5lclwiKTtmb3IoOzspe3ZhciBpPW4uY29udGVudFswXTtpZighKGkgaW5zdGFuY2VvZiBFdCkpYnJlYWs7bj1pfXZhciByLGE9bnVsbCxzPXB0KG4uY29udGVudCk7dHJ5e2ZvcihzLnMoKTshKHI9cy5uKCkpLmRvbmU7KXt2YXIgbz15dChyLnZhbHVlLEIpO2lmKCFvKWJyZWFrO251bGw9PWEmJihhPVtdKSxhLnB1c2goby50ZXh0KX19Y2F0Y2godCl7cy5lKHQpfWZpbmFsbHl7cy5mKCl9cmV0dXJuIGF9fSx7a2V5OlwiQnVpbGRTdHJpbmdPZkhpZXJhcmNoeVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFN0O3JldHVybiB0aGlzLm1haW5Db250ZW50Q29udGFpbmVyLkJ1aWxkU3RyaW5nT2ZIaWVyYXJjaHkodCwwLHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIuUmVzb2x2ZSgpKSx0LnRvU3RyaW5nKCl9fSx7a2V5OlwiQnVpbGRTdHJpbmdPZkNvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBTdDtyZXR1cm4gdC5CdWlsZFN0cmluZ09mSGllcmFyY2h5KGUsMCx0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLlJlc29sdmUoKSksZS50b1N0cmluZygpfX0se2tleTpcIk5leHRDb250ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdDt0aGlzLnN0YXRlLnByZXZpb3VzUG9pbnRlcj10aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLmNvcHkoKSwodGhpcy5zdGF0ZS5kaXZlcnRlZFBvaW50ZXIuaXNOdWxsfHwodGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlcj10aGlzLnN0YXRlLmRpdmVydGVkUG9pbnRlci5jb3B5KCksdGhpcy5zdGF0ZS5kaXZlcnRlZFBvaW50ZXI9eHQuTnVsbCx0aGlzLlZpc2l0Q2hhbmdlZENvbnRhaW5lcnNEdWVUb0RpdmVydCgpLHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIuaXNOdWxsKSkmJih0aGlzLkluY3JlbWVudENvbnRlbnRQb2ludGVyKCl8fCh0PSExLHRoaXMuc3RhdGUuY2FsbFN0YWNrLkNhblBvcChOdC5GdW5jdGlvbik/KHRoaXMuc3RhdGUuUG9wQ2FsbFN0YWNrKE50LkZ1bmN0aW9uKSx0aGlzLnN0YXRlLmluRXhwcmVzc2lvbkV2YWx1YXRpb24mJnRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgVnQpLHQ9ITApOnRoaXMuc3RhdGUuY2FsbFN0YWNrLmNhblBvcFRocmVhZD8odGhpcy5zdGF0ZS5jYWxsU3RhY2suUG9wVGhyZWFkKCksdD0hMCk6dGhpcy5zdGF0ZS5UcnlFeGl0RnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUoKSx0JiYhdGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlci5pc051bGwmJnRoaXMuTmV4dENvbnRlbnQoKSkpfX0se2tleTpcIkluY3JlbWVudENvbnRlbnRQb2ludGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0hMCxlPXRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmN1cnJlbnRQb2ludGVyLmNvcHkoKTtpZihlLmluZGV4KyssbnVsbD09PWUuY29udGFpbmVyKXJldHVybiBndChcInBvaW50ZXIuY29udGFpbmVyXCIpO2Zvcig7ZS5pbmRleD49ZS5jb250YWluZXIuY29udGVudC5sZW5ndGg7KXt0PSExO3ZhciBuPXl0KGUuY29udGFpbmVyLnBhcmVudCxFdCk7aWYobiBpbnN0YW5jZW9mIEV0PT0hMSlicmVhazt2YXIgaT1uLmNvbnRlbnQuaW5kZXhPZihlLmNvbnRhaW5lcik7aWYoLTE9PWkpYnJlYWs7aWYoKGU9bmV3IHh0KG4saSkpLmluZGV4KyssdD0hMCxudWxsPT09ZS5jb250YWluZXIpcmV0dXJuIGd0KFwicG9pbnRlci5jb250YWluZXJcIil9cmV0dXJuIHR8fChlPXh0Lk51bGwpLHRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmN1cnJlbnRQb2ludGVyPWUuY29weSgpLHR9fSx7a2V5OlwiVHJ5Rm9sbG93RGVmYXVsdEludmlzaWJsZUNob2ljZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fc3RhdGUuY3VycmVudENob2ljZXMsZT10LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0ludmlzaWJsZURlZmF1bHR9KTtpZigwPT1lLmxlbmd0aHx8dC5sZW5ndGg+ZS5sZW5ndGgpcmV0dXJuITE7dmFyIG49ZVswXTtyZXR1cm4gbnVsbD09PW4udGFyZ2V0UGF0aD9ndChcImNob2ljZS50YXJnZXRQYXRoXCIpOm51bGw9PT1uLnRocmVhZEF0R2VuZXJhdGlvbj9ndChcImNob2ljZS50aHJlYWRBdEdlbmVyYXRpb25cIik6KHRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRUaHJlYWQ9bi50aHJlYWRBdEdlbmVyYXRpb24sdGhpcy5DaG9vc2VQYXRoKG4udGFyZ2V0UGF0aCwhMSksITApfX0se2tleTpcIk5leHRTZXF1ZW5jZVNodWZmbGVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9eXQodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSxUdCk7aWYoISh0IGluc3RhbmNlb2YgVHQpKXJldHVybiB0aGlzLkVycm9yKFwiZXhwZWN0ZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGluIHNlcXVlbmNlIGZvciBzaHVmZmxlIGluZGV4XCIpLDA7dmFyIGU9dGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlci5jb250YWluZXI7aWYobnVsbD09PWUpcmV0dXJuIGd0KFwic2VxQ29udGFpbmVyXCIpO2lmKG51bGw9PT10LnZhbHVlKXJldHVybiBndChcIm51bUVsZW1lbnRzSW50VmFsLnZhbHVlXCIpO3ZhciBuPXQudmFsdWUsaT1tdCh0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLFR0KS52YWx1ZTtpZihudWxsPT09aSlyZXR1cm4gZ3QoXCJzZXFDb3VudFwiKTtmb3IodmFyIHI9aS9uLGE9aSVuLHM9ZS5wYXRoLnRvU3RyaW5nKCksbz0wLHU9MCxsPXMubGVuZ3RoO3U8bDt1Kyspbys9cy5jaGFyQ29kZUF0KHUpfHwwO2Zvcih2YXIgaD1vK3IrdGhpcy5zdGF0ZS5zdG9yeVNlZWQsYz1uZXcgTHQoTWF0aC5mbG9vcihoKSksZj1bXSx2PTA7djxuOysrdilmLnB1c2godik7Zm9yKHZhciBkPTA7ZDw9YTsrK2Qpe3ZhciBwPWMubmV4dCgpJWYubGVuZ3RoLHk9ZltwXTtpZihmLnNwbGljZShwLDEpLGQ9PWEpcmV0dXJuIHl9dGhyb3cgbmV3IEVycm9yKFwiU2hvdWxkIG5ldmVyIHJlYWNoIGhlcmVcIil9fSx7a2V5OlwiRXJyb3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09ZSYmZSxpPW5ldyBidCh0KTt0aHJvdyBpLnVzZUVuZExpbmVOdW1iZXI9bixpfX0se2tleTpcIldhcm5pbmdcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLkFkZEVycm9yKHQsITApfX0se2tleTpcIkFkZEVycm9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lJiZlLGE9Mjxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1uJiZuLHM9dGhpcy5jdXJyZW50RGVidWdNZXRhZGF0YSxvPXI/XCJXQVJOSU5HXCI6XCJFUlJPUlwiO3Q9bnVsbCE9cz8oaT1hP3MuZW5kTGluZU51bWJlcjpzLnN0YXJ0TGluZU51bWJlcixcIlJVTlRJTUUgXCIrbytcIjogJ1wiK3MuZmlsZU5hbWUrXCInIGxpbmUgXCIraStcIjogXCIrdCk6dGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlci5pc051bGw/XCJSVU5USU1FIFwiK28rXCI6IFwiK3Q6XCJSVU5USU1FIFwiK28rXCI6IChcIit0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyK1wiKTogXCIrdCx0aGlzLnN0YXRlLkFkZEVycm9yKHQscikscnx8dGhpcy5zdGF0ZS5Gb3JjZUVuZCgpfX0se2tleTpcIkFzc2VydFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6bnVsbDtpZigwPT10KXRocm93IG51bGw9PW4mJihuPVwiU3RvcnkgYXNzZXJ0XCIpLG5ldyBFcnJvcihuK1wiIFwiK3RoaXMuY3VycmVudERlYnVnTWV0YWRhdGEpfX0se2tleTpcImN1cnJlbnRDaG9pY2VzXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9W107aWYobnVsbD09PXRoaXMuX3N0YXRlKXJldHVybiBndChcInRoaXMuX3N0YXRlXCIpO3ZhciBlLG49cHQodGhpcy5fc3RhdGUuY3VycmVudENob2ljZXMpO3RyeXtmb3Iobi5zKCk7IShlPW4ubigpKS5kb25lOyl7dmFyIGk9ZS52YWx1ZTtpLmlzSW52aXNpYmxlRGVmYXVsdHx8KGkuaW5kZXg9dC5sZW5ndGgsdC5wdXNoKGkpKX19Y2F0Y2godCl7bi5lKHQpfWZpbmFsbHl7bi5mKCl9cmV0dXJuIHR9fSx7a2V5OlwiY3VycmVudFRleHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5JZkFzeW5jV2VDYW50KFwiY2FsbCBjdXJyZW50VGV4dCBzaW5jZSBpdCdzIGEgd29yayBpbiBwcm9ncmVzc1wiKSx0aGlzLnN0YXRlLmN1cnJlbnRUZXh0fX0se2tleTpcImN1cnJlbnRUYWdzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuSWZBc3luY1dlQ2FudChcImNhbGwgY3VycmVudFRhZ3Mgc2luY2UgaXQncyBhIHdvcmsgaW4gcHJvZ3Jlc3NcIiksdGhpcy5zdGF0ZS5jdXJyZW50VGFnc319LHtrZXk6XCJjdXJyZW50RXJyb3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGUuY3VycmVudEVycm9yc319LHtrZXk6XCJjdXJyZW50V2FybmluZ3NcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZS5jdXJyZW50V2FybmluZ3N9fSx7a2V5OlwiaGFzRXJyb3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZS5oYXNFcnJvcn19LHtrZXk6XCJoYXNXYXJuaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGUuaGFzV2FybmluZ319LHtrZXk6XCJ2YXJpYWJsZXNTdGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlLnZhcmlhYmxlc1N0YXRlfX0se2tleTpcImxpc3REZWZpbml0aW9uc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saXN0RGVmaW5pdGlvbnN9fSx7a2V5Olwic3RhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGV9fSx7a2V5OlwiY2FuQ29udGludWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZS5jYW5Db250aW51ZX19LHtrZXk6XCJhc3luY0NvbnRpbnVlQ29tcGxldGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5fYXN5bmNDb250aW51ZUFjdGl2ZX19LHtrZXk6XCJnbG9iYWxUYWdzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVGFnc0F0U3RhcnRPZkZsb3dDb250YWluZXJXaXRoUGF0aFN0cmluZyhcIlwiKX19LHtrZXk6XCJjdXJyZW50RGVidWdNZXRhZGF0YVwiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXI7aWYoIXQuaXNOdWxsJiZudWxsIT09dC5SZXNvbHZlKCkmJm51bGwhPT0obj10LlJlc29sdmUoKS5kZWJ1Z01ldGFkYXRhKSlyZXR1cm4gbjtmb3IodmFyIGU9dGhpcy5zdGF0ZS5jYWxsU3RhY2suZWxlbWVudHMubGVuZ3RoLTE7MDw9ZTstLWUpaWYoISh0PXRoaXMuc3RhdGUuY2FsbFN0YWNrLmVsZW1lbnRzW2VdLmN1cnJlbnRQb2ludGVyKS5pc051bGwmJm51bGwhPT10LlJlc29sdmUoKSYmbnVsbCE9PShuPXQuUmVzb2x2ZSgpLmRlYnVnTWV0YWRhdGEpKXJldHVybiBuO2Zvcih2YXIgbixpPXRoaXMuc3RhdGUub3V0cHV0U3RyZWFtLmxlbmd0aC0xOzA8PWk7LS1pKXtpZihudWxsIT09KG49dGhpcy5zdGF0ZS5vdXRwdXRTdHJlYW1baV0uZGVidWdNZXRhZGF0YSkpcmV0dXJuIG59cmV0dXJuIG51bGx9fSx7a2V5OlwibWFpbkNvbnRlbnRDb250YWluZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGVtcG9yYXJ5RXZhbHVhdGlvbkNvbnRhaW5lcj90aGlzLl90ZW1wb3JhcnlFdmFsdWF0aW9uQ29udGFpbmVyOnRoaXMuX21haW5Db250ZW50Q29udGFpbmVyfX1dKSxmfSgpLG8uU3RvcnkuaW5rVmVyc2lvbkN1cnJlbnQ9MTksWD1vLlN0b3J5fHwoby5TdG9yeT17fSksKFk9WC5PdXRwdXRTdGF0ZUNoYW5nZXx8KFguT3V0cHV0U3RhdGVDaGFuZ2U9e30pKVtZLk5vQ2hhbmdlPTBdPVwiTm9DaGFuZ2VcIixZW1kuRXh0ZW5kZWRCZXlvbmROZXdsaW5lPTFdPVwiRXh0ZW5kZWRCZXlvbmROZXdsaW5lXCIsWVtZLk5ld2xpbmVSZW1vdmVkPTJdPVwiTmV3bGluZVJlbW92ZWRcIixvLklua0xpc3Q9Q3QsT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluay5qcy5tYXBcbiIsImltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCdcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgaW5ranMgZnJvbSAnaW5ranMvZGlzdC9pbmsnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb21lKCkge1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coaW5ranMpO1xuICAgICAgICAvKiBmZXRjaChcInN0b3J5Lmpzb25cIilcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChzdG9yeUNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdG9yeUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHN0b3J5ID0gbmV3IGlua2pzLlN0b3J5KHN0b3J5Q29udGVudCk7XG4gICAgICAgICAgICAgICAgY29udGludWVTdG9yeSgpO1xuICAgICAgICAgICAgfSk7ICovXG4gICAgfSlcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8SGVhZD5cbiAgICAgICAgICAgICAgICA8dGl0bGU+RGF0aW5nIFNpbTwvdGl0bGU+XG4gICAgICAgICAgICA8L0hlYWQ+XG5cbiAgICAgICAgICAgIDxtYWluPlxuICAgICAgICAgICAgICAgIDxoMT5EYXRpbmcgU2ltPC9oMT5cblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgPC9tYWluPlxuICAgICAgICA8L2Rpdj5cbiAgICApXG59Il0sInNvdXJjZVJvb3QiOiIifQ==